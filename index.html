<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="Description" content="A single-page Rust resource for people who like high information density.">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2">

    <title>Rust Language Cheat Sheet</title>

    <!-- Icon -->
    <link rel="icon" type="image/png" href="favicon32.png">

    <!-- CSS -->
    <link rel="stylesheet" href="font-opensans.css" />
    <link rel="stylesheet" href="font-firacode.css" />
    <link rel="stylesheet" href="main.css" />
</head>

<body>
    <!-- Github ribbon -->
    <noprint>
    <div class="hide_on_small">
        <a class="noprint" href="https://github.com/ralfbiedert/cheats.rs/"><img
            style="position: absolute; top: 0; right: 0; border: 0;" src="forkme_right_gray.png"
            alt="Fork me on GitHub"></a>
    </div>
    </noprint>

    <div class="page">
        <div class="page__content">
            <div class="book-content">
                <h1></h1>
                <p><img id="logo" class="hide_on_small" src="logo.png" alt="Ferris holding a cheat sheet."></img>
<pagetitle>Rust Language Cheat Sheet</pagetitle>
<subtitle><span id="subtitle" onclick="advance_subtitle()">28. March 2024</span></subtitle></p>
<blockquote class="legend">
<symbol-legend class="short">
<p>Contains clickable links to
<strong>The Book</strong> <a href="https://doc.rust-lang.org/book/" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a>,
<strong>Rust by Example</strong> <a href="https://doc.rust-lang.org/stable/rust-by-example/" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a>,
<strong>Std Docs</strong> <a href="https://doc.rust-lang.org/std"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a>,
<strong>Nomicon</strong> <a href="https://doc.rust-lang.org/nightly/nomicon/" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a>,
<strong>Reference</strong> <a href="https://doc.rust-lang.org/stable/reference/" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>.</p>
</symbol-legend>
<symbol-legend class="long">
<twocolumn>
<column>
<p><strong>Clickable symbols</strong> <br>
<br> <legend-symbol> <a href="https://doc.rust-lang.org/book/" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> </legend-symbol> <strong>The Book</strong>.
<br> <legend-symbol> <a href="https://doc.rust-lang.org/stable/rust-by-example/" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> </legend-symbol> <strong>Rust by Example</strong>.
<br> <legend-symbol> <a href="https://doc.rust-lang.org/std"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> </legend-symbol>  <strong>Standard Library (API)</strong>.
<br> <legend-symbol> <a href="https://doc.rust-lang.org/nightly/nomicon/" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> </legend-symbol> <strong>Nomicon</strong>.
<br> <legend-symbol> <a href="https://doc.rust-lang.org/stable/reference/" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> </legend-symbol> <strong>Reference</strong>.
<br> <legend-symbol> <a href="https://rust-lang.github.io/rfcs/"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a> </legend-symbol> Official <strong>RFC</strong> documents.
<br> <legend-symbol> <a href="https:&#x2F;&#x2F;cheats.rs" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> </legend-symbol> The <strong>internet</strong>.
<br> <legend-symbol> <a href="#" title="On this site, above."><sup>↑</sup></a> </legend-symbol> On this page, <strong>above</strong>.
<br> <legend-symbol> <a href="#" title="On this site, below."><sup>↓</sup></a> </legend-symbol> On this page, <strong>below</strong>.</p>
</column>
<column>
<p><strong>Other symbols</strong> <br>
<br> <legend-symbol> <a class="tooltip" title="Largely deprecated or outdated; prefer modern alternative."><sup>🗑️</sup></a>   </legend-symbol>Largely <strong>deprecated</strong>.
<br> <legend-symbol> <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'18</sup></a> </legend-symbol>Has <strong>minimum edition</strong> requirement.
<br> <legend-symbol> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a> </legend-symbol>Requires <strong>Rust nightly</strong> (or is incomplete).
<br> <legend-symbol> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a>   </legend-symbol>Intentionally <strong>wrong example</strong> or <strong>pitfall</strong>.
<br> <legend-symbol> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a>   </legend-symbol>Slightly <strong>esoteric</strong>, rarely used or advanced.
<br> <legend-symbol> <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a>   </legend-symbol>Something with <strong>outstanding utility</strong>.
<br> <legend-symbol> <a class="tooltip" style="font-size: 70%; position:relative; left: 3px; color: gray;" title="The parent item expands to ...">↪ </a> </legend-symbol>The parent item <strong>expands to</strong> …
<br> <legend-symbol> <a class="tooltip" title="Author's opinion."><sup>💬</sup></a> </legend-symbol><strong>Opinionated</strong>.
<br> <legend-symbol> <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a> </legend-symbol>Is <strong>missing good link</strong> or explanation.</p>
</column>
</twocolumn>
</symbol-legend>
<div style="text-align: right; height: 1px;">
    <span class="expander" style="font-size: 10px; position: relative; top: -20px;">
        <a href="javascript:toggle_legend();">➕</a>
    </span>
</div>
</blockquote>
<noprint>
<page-controls>
    <!-- <a id="" href="" style="float: left; margin-left:5px;">X-Ray Mode 👓</a> -->
    <a id="toggle_ligatures" href="javascript:toggle_ligatures()">Font Ligatures (<code>..=, =></code>)</a>
    <!-- <a id="expand_everything" class="hide_on_small" href="javascript:toggle_expand_all()">Expand all the things?</a> -->
    <a href="javascript:toggle_night_mode()">Night Mode &#x1f4a1;</a>
</page-controls>
</noprint>
<noprint>
<toc><column>
<p><strong>Language Constructs</strong></p>
<ul>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#data-structures">Data Structures</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#references-pointers">References &amp; Pointers</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#functions-behavior">Functions &amp; Behavior</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#control-flow">Control Flow</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#organizing-code">Organizing Code</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#type-aliases-and-casts">Type Aliases and Casts</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#macros-attributes">Macros &amp; Attributes</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#pattern-matching">Pattern Matching</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#generics-constraints">Generics &amp; Constraints</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#higher-ranked-items">Higher-Ranked Items</a><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#strings-chars">Strings &amp; Chars</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#documentation">Documentation</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#miscellaneous">Miscellaneous</a></li>
</ul>
<p><strong>Behind the Scenes</strong></p>
<ul>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#the-abstract-machine">The Abstract Machine</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#language-sugar">Language Sugar</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#memory-lifetimes">Memory &amp; Lifetimes</a></li>
</ul>
<p><strong>Memory Layout</strong></p>
<ul>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#basic-types">Basic Types</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#custom-types">Custom Types</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#references-pointers-ui">References &amp; Pointers</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#closures-data">Closures</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#standard-library-types">Standard Library Types</a></li>
</ul>
<p><strong>Misc</strong></p>
<ul>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#links-services">Links &amp; Services</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#printing-pdf">Printing &amp; PDF</a></li>
</ul>
</column>
<column>
<p><strong>Standard Library</strong></p>
<ul>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#one-liners">One-Liners</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#thread-safety">Thread Safety</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#iterators">Iterators</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#number-conversions">Number Conversions</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#string-conversions">String Conversions</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#string-output">String Output</a></li>
</ul>
<p><strong>Tooling</strong></p>
<ul>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#project-anatomy">Project Anatomy</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#cargo">Cargo</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#cross-compilation">Cross Compilation</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#tooling-directives">Tooling Directives</a></li>
</ul>
<p><strong>Working with Types</strong></p>
<ul>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#types-traits-generics">Types, Traits, Generics</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#foreign-types-and-traits">Foreign Types and Traits</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#type-conversions">Type Conversions</a></li>
</ul>
<p><strong>Coding Guides</strong></p>
<ul>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#idiomatic-rust">Idiomatic Rust</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#performance-tips">Performance Tips</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#async-await-101">Async-Await 101</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#closures-in-apis">Closures in APIs</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#unsafe-unsound-undefined">Unsafe, Unsound, Undefined</a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#adversarial-code">Adversarial Code</a><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></li>
<li><a href="https://techlivewang.gitee.io/cheats.rs/#api-stability">API Stability</a></li>
</ul>
</column>
</toc>
</noprint>
<noprint>
<h2 id="hello-rust">Hello, Rust!<sup id="target-hello-rust" class="target"><a href="#hello-rust">url</a></sup></h2>
<p>If you are new to Rust, or if you want to try the things below:</p>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-hello-1" name="tab-hello" checked/>
<label for="tab-hello-1"><b>Hello World</b></label>
<panel><div>
<div id="hellostatic">
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre>
</div>
<div id="helloplay"></div>
<div id="helloinfo">Service provided by <a href="https://play.rust-lang.org/" target="_blank" rel="noopener">play.rust-lang.org <sup>🔗</sup></a></div>
<div id="helloctrl"><a href="javascript:show_playground(true);">▶️ Edit & Run</a></div>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-hello-3" name="tab-hello">
<label for="tab-hello-3"><b>Strengths</b></label>
<panel><div>
<p><strong>Things Rust does measurably really well</strong></p>
<ul>
<li>Compiled code <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/box-plot-summary-charts.html">about same performance</a> as C / C++, and excellent <a href="https://docente.ifsc.edu.br/mello/livros/java/paperSLE.pdf">memory and energy efficiency</a>.</li>
<li>Can <a href="https://www.chromium.org/Home/chromium-security/memory-safety">avoid 70% of all safety issues</a> present in C / C++, and most memory issues.</li>
<li>Strong type system prevents <a href="https://doc.rust-lang.org/nomicon/races.html">data races</a>, brings <a href="https://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html">'fearless concurrency'</a> (amongst others).</li>
<li>Seamless C interop, and <a href="https://doc.rust-lang.org/rustc/platform-support.html">dozens of supported platforms</a> (based on LLVM).</li>
<li><a href="https://survey.stackoverflow.co/2023/#section-admired-and-desired-programming-scripting-and-markup-languages">&quot;Most loved or admired language&quot;</a> for <strike>4</strike> <strike>5</strike> <strike>6</strike> <strike>7</strike> 8 years in a row. 🤷‍♀️</li>
<li>Modern tooling: <code>cargo</code> (builds <em>just work</em>), <code>clippy</code> (600+ code quality lints), <code>rustup</code> (easy toolchain mgmt).</li>
</ul>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-hello-4" name="tab-hello">
<label for="tab-hello-4"><b>Weaknesses</b></label>
<panel><div>
<p><strong>Points you might run into</strong></p>
<ul>
<li>Steep learning curve;<sup>1</sup> compiler enforcing (esp. memory) rules that would be &quot;best practices&quot; elsewhere.</li>
<li>Missing Rust-native libs in some domains, target platforms (esp. embedded), IDE features.<sup>1</sup></li>
<li>Longer compile times than &quot;similar&quot; code in other languages.<sup>1</sup></li>
<li>Careless (use of <code>unsafe</code> in) libraries can secretly break safety guarantees.</li>
<li><del>No formal language specification</del>, <a href="https:&#x2F;&#x2F;spec.ferrocene.dev&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> <del>can prevent legal use in some domains (aviation, medical, …)</del>. <a href="https:&#x2F;&#x2F;ferrous-systems.com&#x2F;ferrocene&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></li>
<li>Rust Foundation may offensively use their IP to affect <em>'Rust'</em> projects (e.g, forbid names, impose policies). <a href="https:&#x2F;&#x2F;devclass.com&#x2F;2023&#x2F;04&#x2F;11&#x2F;dont-call-it-rust-community-complains-about-draft-trademark-policy-restricting-use-of-word-marks&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a><a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20230413161930&#x2F;https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;rust&#x2F;comments&#x2F;12e7tdb&#x2F;rust_trademark_policy_feedback_form&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a><sup>2</sup></li>
</ul>
<p><sup>1</sup> Compare <a href="https://blog.rust-lang.org/2020/04/17/Rust-survey-2019.html#why-not-use-rust">Rust Survey</a>. <br>
<sup>2</sup> Avoiding their marks (e.g, in your name, URL, logo, dress) is probably sufficient.</p>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-hello-5" name="tab-hello">
<label for="tab-hello-5"><b>Installation</b></label>
<panel><div>
<p><strong>Download</strong></p>
<ul>
<li>Get installer from <a href="https://rustup.rs/"><strong>rustup.rs</strong></a> (highly recommended)<a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></li>
</ul>
<p><strong>IDEs</strong></p>
<ul>
<li><a href="https://www.jetbrains.com/rust/"><strong>Rust Rover</strong></a> (paid)</li>
<li><a href="https://code.visualstudio.com/">Visual Studio Code</a> with <a href="https://rust-analyzer.github.io/"><strong>rust-analyzer</strong></a> (free)</li>
</ul>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-hello-6" name="tab-hello">
<label for="tab-hello-6"><b>First Steps</b></label>
<panel><div>
<!-- Note - Please ONLY submit PRs linking to high-quality, "permanent" sites
            dedicated to learning Rust that work in a browser, are moderately
            condensed, and have a public Git repo and issue tracker.
            Also, this section should be very short <=3 entries, so it should only list
            "the best of their kind".
             -->
<p><strong>Modular Beginner Resources</strong></p>
<ul>
<li><a href="https://tourofrust.com/TOC_en.html"><strong>Tour of Rust</strong></a> - Live code and explanations, side by side.</li>
<li><a href="https://dhghomon.github.io/easy_rust/Chapter_3.html"><strong>Rust in Easy English</strong></a> - 60+ concepts, simple English, example-driven.</li>
</ul>
<p>In addition, have a look at the usual suspects. <a href="https://doc.rust-lang.org/book/" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/std"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></p>
<blockquote>
<p><strong>Opinion</strong> <a class="tooltip" title="Author's opinion."><sup>💬</sup></a> — If you have never seen or used any Rust it might be good to visit one of the links above before continuing; the next chapter might feel a bit terse otherwise.</p>
</blockquote>
</div></panel></tab>
</tabs>
</noprint>
<h3 id="data-structures">Data Structures<sup id="target-data-structures" class="target"><a href="#data-structures">url</a></sup></h3>
<p>Data types and memory locations defined via keywords.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>struct S {}</code></td><td>Define a <strong>struct</strong> <a href="https://doc.rust-lang.org/book/ch05-00-structs.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/custom_types&#x2F;structs.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;keyword.struct.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;struct-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> with named fields.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>struct S { x: T }</code></td><td>Define struct with named field <code>x</code> of type <code>T</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>struct S</code> ​<code>(T);</code></td><td>Define &quot;tupled&quot; struct with numbered field <code>.0</code> of type <code>T</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>struct S;</code></td><td>Define <strong>zero sized</strong> <a href="https://doc.rust-lang.org/nightly/nomicon/exotic-sizes.html#zero-sized-types-zsts" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> unit struct. Occupies no space, optimized away.</td></tr>
<tr><td><code>enum E {}</code></td><td>Define an <strong>enum</strong>, <a href="https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/custom_types&#x2F;enum.html#enums" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;enumerations.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <em>c</em>. <a href="https://en.wikipedia.org/wiki/Algebraic_data_type">algebraic data types</a>, <a href="https://en.wikipedia.org/wiki/Tagged_union">tagged unions</a>.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>enum E { A, B</code>​<code>(), C {} }</code></td><td>Define variants of enum; can be unit- <code>A</code>, tuple- <code>B</code> ​<code>()</code> and struct-like <code>C{}</code>.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>enum E { A = 1 }</code></td><td>If variants are only unit-like, allow <strong>discriminant values</strong>, <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;enumerations.html#custom-discriminant-values-for-fieldless-enumerations" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> e.g., for FFI.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>enum E {}</code></td><td>Enum w/o variants is <strong>uninhabited</strong>, <a href="https://doc.rust-lang.org/stable/reference/glossary.html#uninhabited" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> can't be created, <em>c.</em> 'never' <a href="#miscellaneous" title="On this site, below."><sup>↓</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>union U {}</code></td><td>Unsafe C-like <strong>union</strong>  <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;unions.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> for FFI compatibility. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>static X: T = T();</code></td><td><strong>Global variable</strong> <a href="https://doc.rust-lang.org/book/ch19-01-unsafe-rust.html#accessing-or-modifying-a-mutable-static-variable" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/custom_types&#x2F;constants.html#constants" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;static-items.html#static-items" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>  with <code>'static</code> lifetime, single memory location.</td></tr>
<tr><td><code>const X: T = T();</code></td><td>Defines <strong>constant</strong>, <a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#constants" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/custom_types&#x2F;constants.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;constant-items.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> copied into a temporary when used.</td></tr>
<tr><td><code>let x: T;</code></td><td>Allocate <code>T</code> bytes on stack<sup>1</sup> bound as <code>x</code>. Assignable once, not mutable.</td></tr>
<tr><td><code>let mut x: T;</code></td><td>Like <code>let</code>, but allow for <strong>mutability</strong> <a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/variable_bindings&#x2F;mut.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> and mutable borrow.<sup>2</sup></td></tr>
<tr><td><span class="hidemobile">    </span> <code>x = y;</code></td><td>Moves <code>y</code> to <code>x</code>, inval. <code>y</code> if <code>T</code> is not <strong><code>Copy</code></strong>, <a href="https://doc.rust-lang.org/std&#x2F;marker&#x2F;trait.Copy.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> and copying <code>y</code> otherwise.</td></tr>
</tbody></table>
</fixed-2-column>
<footnotes>
<p><sup>1</sup> <strong>Bound variables</strong> <a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/variable_bindings.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/variables.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> live on stack for synchronous code. In <code>async {}</code> they become part of async's state machine, may reside on heap.<br>
<sup>2</sup> Technically <em>mutable</em> and <em>immutable</em> are misnomer. Immutable binding or shared reference may still contain Cell <a href="https://doc.rust-lang.org/std&#x2F;cell&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a>, giving <em>interior mutability</em>.</p>
</footnotes>
<div>&nbsp;</div>
<p>Creating and accessing data structures; and some more <em>sigilic</em> types.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>S { x: y }</code></td><td>Create <code>struct S {}</code> or <code>use</code>'ed <code>enum E::S {}</code> with field <code>x</code> set to <code>y</code>.</td></tr>
<tr><td><code>S { x }</code></td><td>Same, but use local variable <code>x</code> for field <code>x</code>.</td></tr>
<tr><td><code>S { ..s }</code></td><td>Fill remaining fields from <code>s</code>, esp. useful with <code>Default::default()</code>. <a href="https://doc.rust-lang.org/default&#x2F;trait.Default.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><code>S { 0: x }</code></td><td>Like <code>S</code> ​<code>(x)</code> below, but set field <code>.0</code> with struct syntax.</td></tr>
<tr><td><code>S</code>​ <code>(x)</code></td><td>Create <code>struct S</code> ​<code>(T)</code> or <code>use</code>'ed <code>enum E::S</code>​ <code>()</code> with field <code>.0</code> set to <code>x</code>.</td></tr>
<tr><td><code>S</code></td><td>If <code>S</code> is unit <code>struct S;</code> or <code>use</code>'ed <code>enum E::S</code> create value of <code>S</code>.</td></tr>
<tr><td><code>E::C { x: y }</code></td><td>Create enum variant <code>C</code>. Other methods above also work.</td></tr>
<tr><td><code>()</code></td><td>Empty tuple, both literal and type, aka <strong>unit</strong>. <a href="https://doc.rust-lang.org/std&#x2F;primitive.unit.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><code>(x)</code></td><td>Parenthesized expression.</td></tr>
<tr><td><code>(x,)</code></td><td>Single-element <strong>tuple</strong> expression. <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives&#x2F;tuples.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;primitive.tuple.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;tuple-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>(S,)</code></td><td>Single-element tuple type.</td></tr>
<tr><td><code>[S]</code></td><td>Array type of unspec. length, i.e., <strong>slice</strong>. <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives&#x2F;array.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;primitive.slice.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/types&#x2F;slice.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> Can't live on stack. <sup>*</sup></td></tr>
<tr><td><code>[S; n]</code></td><td><strong>Array type</strong> <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives&#x2F;array.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a>  <a href="https://doc.rust-lang.org/std&#x2F;primitive.array.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/types&#x2F;array.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>  of fixed length <code>n</code> holding elements of type <code>S</code>.</td></tr>
<tr><td><code>[x; n]</code></td><td><strong>Array instance</strong>  <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;array-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> (expression) with <code>n</code> copies of <code>x</code>.</td></tr>
<tr><td><code>[x, y]</code></td><td>Array instance with given elements <code>x</code> and <code>y</code>.</td></tr>
<tr><td><code>x[0]</code></td><td>Collection indexing, here w. <code>usize</code>. Impl. via <a href="https://doc.rust-lang.org/std/ops/trait.Index.html"><strong>Index</strong></a>, <a href="https://doc.rust-lang.org/std/ops/trait.IndexMut.html"><strong>IndexMut</strong></a>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>x[..]</code></td><td>Same, via range (here <em>full range</em>), also <code>x[a..b]</code>, <code>x[a..=b]</code>, … <em>c</em>. below.</td></tr>
<tr><td><code>a..b</code></td><td><strong>Right-exclusive range</strong> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;struct.Range.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;range-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> creation, e.g., <code>1..3</code> means <code>1, 2</code>.</td></tr>
<tr><td><code>..b</code></td><td>Right-exclusive <strong>range to</strong> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;struct.RangeTo.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> without starting point.</td></tr>
<tr><td><code>..=b</code></td><td><strong>Inclusive range to</strong> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;struct.RangeToInclusive.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> without starting point.</td></tr>
<tr><td><code>a..=b</code></td><td><strong>Inclusive range</strong>, <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;struct.RangeInclusive.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <code>1..=3</code> means <code>1, 2, 3</code>.</td></tr>
<tr><td><code>a..</code></td><td><strong>Range from</strong> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;struct.RangeFrom.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> without ending point.</td></tr>
<tr><td><code>..</code></td><td><strong>Full range</strong>, <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;struct.RangeFull.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> usually means <em>the whole collection</em>.</td></tr>
<tr><td><code>s.x</code></td><td>Named <strong>field access</strong>, <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;field-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> might try to <a href="https://doc.rust-lang.org/std/ops/trait.Deref.html">Deref</a> if <code>x</code> not part of type <code>S</code>.</td></tr>
<tr><td><code>s.0</code></td><td>Numbered field access, used for tuple types <code>S</code> ​<code>(T)</code>.</td></tr>
</tbody></table>
</fixed-2-column>
<footnotes>
<p><sup>*</sup> For now,<a href="https://rust-lang.github.io/rfcs/1909-unsized-rvalues.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a> pending completion of <a href="https://github.com/rust-lang/rust/issues/48055">tracking issue</a>.</p>
</footnotes>
<h3 id="references-pointers">References &amp; Pointers<sup id="target-references-pointers" class="target"><a href="#references-pointers">url</a></sup></h3>
<p>Granting access to un-owned memory. Also see section on Generics &amp; Constraints.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>&amp;S</code></td><td>Shared <strong>reference</strong> <a href="https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;primitive.reference.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/nightly/nomicon/references.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> <a href="https://doc.rust-lang.org/stable/reference/types.html#pointer-types" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> (type; space for holding <em>any</em> <code>&amp;s</code>).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&amp;[S]</code></td><td>Special slice reference that contains (<code>address</code>, <code>count</code>).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&amp;str</code></td><td>Special string slice reference that contains (<code>address</code>, <code>byte_length</code>).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&amp;mut S</code></td><td>Exclusive reference to allow mutability (also <code>&amp;mut [S]</code>, <code>&amp;mut dyn S</code>, …).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&amp;dyn T</code></td><td>Special <strong>trait object</strong> <a href="https://doc.rust-lang.org/book/ch17-02-trait-objects.html#using-trait-objects-that-allow-for-values-of-different-types" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> reference that contains (<code>address</code>, <code>vtable</code>).</td></tr>
<tr><td><code>&amp;s</code></td><td>Shared <strong>borrow</strong> <a href="https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/scope&#x2F;borrow.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;borrow&#x2F;trait.Borrow.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> (e.g., addr., len, vtable, … of <em>this</em> <code>s</code>, like <code>0x1234</code>).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&amp;mut s</code></td><td>Exclusive borrow that allows <strong>mutability</strong>. <a href="https://doc.rust-lang.org/stable/rust-by-example/scope&#x2F;borrow&#x2F;mut.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a></td></tr>
<tr><td><code>*const S</code></td><td>Immutable <strong>raw pointer type</strong> <a href="https://doc.rust-lang.org/book/ch19-01-unsafe-rust.html#dereferencing-a-raw-pointer" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;primitive.pointer.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/types.html#raw-pointers-const-and-mut" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> w/o memory safety.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>*mut S</code></td><td>Mutable raw pointer type w/o memory safety.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&amp;raw const s</code></td><td>Create raw pointer w/o going through ref.; <em>c</em>. <code>ptr:addr_of!()</code> <a href="https://doc.rust-lang.org/std&#x2F;ptr&#x2F;macro.addr_of.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>&amp;raw mut s</code></td><td>Same, but mutable. <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a> Needed for unaligned, packed fields. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>ref s</code></td><td><strong>Bind by reference</strong>, <a href="https://doc.rust-lang.org/stable/rust-by-example/scope&#x2F;borrow&#x2F;ref.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> makes binding reference type. <a class="tooltip" title="Largely deprecated or outdated; prefer modern alternative."><sup>🗑️</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>let ref r = s;</code></td><td>Equivalent to <code>let r = &amp;s</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>let S { ref mut x } = s;</code></td><td>Mut. ref binding (<code>let x = &amp;mut s.x</code>), shorthand destructuring <a href="#pattern-matching" title="On this site, below."><sup>↓</sup></a> version.</td></tr>
<tr><td><code>*r</code></td><td><strong>Dereference</strong> <a href="https://doc.rust-lang.org/book/ch15-02-deref.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;trait.Deref.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/nightly/nomicon/vec-deref.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> a reference <code>r</code> to access what it points to.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>*r = s;</code></td><td>If <code>r</code> is a mutable reference, move or copy <code>s</code> to target memory.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>s = *r;</code></td><td>Make <code>s</code> a copy of whatever <code>r</code> references, if that is <code>Copy</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>s = *r;</code></td><td>Won't work <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> if <code>*r</code> is not <code>Copy</code>, as that would move and leave empty.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>s = *my_box;</code></td><td>Special case<a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20230130111147&#x2F;https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;rust&#x2F;comments&#x2F;b4so6i&#x2F;what_is_exactly&#x2F;ej8xwg8&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> for <strong><code>Box</code></strong><a href="https://doc.rust-lang.org/std&#x2F;boxed&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> that can move out b'ed content not <code>Copy</code>.</td></tr>
<tr><td><code>'a</code></td><td>A <strong>lifetime parameter</strong>, <a href="https://doc.rust-lang.org/book/ch10-00-generics.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/scope&#x2F;lifetime.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/nightly/nomicon/lifetimes.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;generics.html#type-and-lifetime-parameters" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> duration of a flow in static analysis.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>&amp;'a S</code></td><td>Only accepts address of some <code>s</code>; address existing <code>'a</code> or longer.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>&amp;'a mut S</code></td><td>Same, but allow address content to be changed.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>struct S&lt;'a&gt; {}</code></td><td>Signals this <code>S</code> will contain address with lt. <code>'a</code>. Creator of <code>S</code> decides <code>'a</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>trait T&lt;'a&gt; {}</code></td><td>Signals any <code>S</code>, which <code>impl T for S</code>, might contain address.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>fn f&lt;'a&gt;(t: &amp;'a T)</code></td><td>Signals this function handles some address. Caller decides <code>'a</code>.</td></tr>
<tr><td><code>'static</code></td><td>Special lifetime lasting the entire program execution.</td></tr>
</tbody></table>
</fixed-2-column>
<h3 id="functions-behavior">Functions &amp; Behavior<sup id="target-functions-behavior" class="target"><a href="#functions-behavior">url</a></sup></h3>
<p>Define units of code and their abstractions.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>trait T {}</code></td><td>Define a <strong>trait</strong>; <a href="https://doc.rust-lang.org/book/ch10-02-traits.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/trait.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;traits.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> common behavior types can adhere to.</td></tr>
<tr><td><code>trait T : R {}</code></td><td><code>T</code> is subtrait of <strong>supertrait</strong> <a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html#using-supertraits-to-require-one-traits-functionality-within-another-trait" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/trait&#x2F;supertraits.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;traits.html#supertraits" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <code>R</code>. Any <code>S</code> must <code>impl R</code> before it can <code>impl T</code>.</td></tr>
<tr><td><code>impl S {}</code></td><td><strong>Implementation</strong> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;implementations.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> of functionality for a type <code>S</code>, e.g., methods.</td></tr>
<tr><td><code>impl T for S {}</code></td><td>Implement trait <code>T</code> for type <code>S</code>; specifies <em>how exactly</em> <code>S</code> acts like <code>T</code>.</td></tr>
<tr><td><code>impl !T for S {}</code></td><td>Disable an automatically derived <strong>auto trait</strong>. <a href="https://doc.rust-lang.org/nightly/nomicon/send-and-sync.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> <a href="https://doc.rust-lang.org/stable/reference/special-types-and-traits.html#auto-traits" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>fn f() {}</code></td><td>Definition of a <strong>function</strong>; <a href="https://doc.rust-lang.org/book/ch03-03-how-functions-work.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a>  <a href="https://doc.rust-lang.org/stable/rust-by-example/fn.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;functions.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> or associated function if inside <code>impl</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn f() -&gt; S {}</code></td><td>Same, returning a value of type S.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn f(&amp;self) {}</code></td><td>Define a <strong>method</strong>, <a href="https://doc.rust-lang.org/book/ch05-03-method-syntax.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a>  <a href="https://doc.rust-lang.org/stable/rust-by-example/fn&#x2F;methods.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a>  <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;associated-items.html#methods" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>  e.g., within an <code>impl S {}</code>.</td></tr>
<tr><td><code>struct S</code> ​<code>(T);</code></td><td>More arcanely, <em>also</em><a href="#data-structures" title="On this site, above."><sup>↑</sup></a> defines <code>fn S(x: T) -&gt; S</code> <strong>constructor fn</strong>.  <a href="https://rust-lang.github.io/rfcs/1506-adt-kinds.html#tuple-structs"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>const fn f() {}</code></td><td>Constant <code>fn</code> usable at compile time, e.g., <code>const X: u32 = f(Y)</code>. <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'18</sup></a></td></tr>
<tr><td><code>async fn f() {}</code></td><td><strong>Async</strong>  <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;functions.html#async-functions" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'18</sup></a> function transform, <a href="#async-await-101" title="On this site, below."><sup>↓</sup></a> makes <code>f</code> return an <code>impl</code> <strong><code>Future</code></strong>. <a href="https://doc.rust-lang.org/std&#x2F;future&#x2F;trait.Future.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>async fn f() -&gt; S {}</code></td><td>Same, but make <code>f</code> return an <code>impl Future&lt;Output=S&gt;</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>async { x }</code></td><td>Used within a function, make <code>{ x }</code> an <code>impl Future&lt;Output=X&gt;</code>.</td></tr>
<tr><td><code>fn() -&gt; S</code></td><td><strong>Function references</strong>, <sup>1</sup> <a href="https://doc.rust-lang.org/book/ch19-05-advanced-functions-and-closures.html#function-pointers" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;primitive.fn.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/types.html#function-pointer-types" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> memory holding address of a callable.</td></tr>
<tr><td><code>Fn() -&gt; S</code></td><td><strong>Callable Trait</strong> <a href="https://doc.rust-lang.org/book/ch19-05-advanced-functions-and-closures.html#returning-closures" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;trait.Fn.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> (also <code>FnMut</code>, <code>FnOnce</code>), impl. by closures, fn's …</td></tr>
<tr><td><code>|| {} </code></td><td>A <strong>closure</strong> <a href="https://doc.rust-lang.org/book/ch13-01-closures.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/fn&#x2F;closures.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;closure-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> that borrows its <strong>captures</strong>, <a href="#closures-data" title="On this site, below."><sup>↓</sup></a> <a href="https://doc.rust-lang.org/stable/reference/types&#x2F;closure.html#capture-modes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>  (e.g., a local variable).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>|x| {}</code></td><td>Closure accepting one argument named <code>x</code>, body is block expression.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>|x| x + x</code></td><td>Same, without block expression; may only consist of single expression.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>move |x| x + y </code></td><td><strong>Move closure</strong> <a href="https://doc.rust-lang.org/stable/reference/types&#x2F;closure.html#capture-modes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> taking ownership; i.e., <code>y</code> transferred into closure.</td></tr>
<tr><td><span class="hidemobile">    </span> <code> return || true </code></td><td>Closures sometimes look like logical ORs (here: return a closure).</td></tr>
<tr><td><code>unsafe</code></td><td>If you enjoy debugging segfaults; <strong>unsafe code</strong>. <a href="#unsafe-unsound-undefined" title="On this site, below."><sup>↓</sup></a> <a href="https://doc.rust-lang.org/book/ch19-01-unsafe-rust.html#unsafe-superpowers" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/unsafe.html#unsafe-operations" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/nightly/nomicon/meet-safe-and-unsafe.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> <a href="https://doc.rust-lang.org/stable/reference/unsafe-blocks.html#unsafe-blocks" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>unsafe fn f() {}</code></td><td>Means &quot;<em>calling can cause UB, <a href="#unsafe-unsound-undefined" title="On this site, below."><sup>↓</sup></a> <strong>YOU must check</strong> requirements</em>&quot;.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>unsafe trait T {}</code></td><td>Means &quot;<em>careless impl. of <code>T</code> can cause UB</em>; <strong>implementor must check</strong>&quot;.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>unsafe { f(); }</code></td><td>Guarantees to compiler &quot;<em><strong>I have checked</strong> requirements, trust me</em>&quot;.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>unsafe impl T for S {}</code></td><td>Guarantees <em><code>S</code> is well-behaved w.r.t <code>T</code></em>; people may use <code>T</code> on <code>S</code> safely.</td></tr>
</tbody></table>
</fixed-2-column>
<footnotes>
<p><sup>1</sup> Most documentation calls them function <strong>pointers</strong>, but function <strong>references</strong> might be more appropriate<a href="https:&#x2F;&#x2F;users.rust-lang.org&#x2F;t&#x2F;why-are-function-pointers-special-no-null&#x2F;87990&#x2F;16" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> as they can't be <code>null</code> and must point to valid target.</p>
</footnotes>
<h3 id="control-flow">Control Flow<sup id="target-control-flow" class="target"><a href="#control-flow">url</a></sup></h3>
<p>Control execution within a function.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>while x {}</code></td><td><strong>Loop</strong>, <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;loop-expr.html#predicate-loops" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> run while expression <code>x</code> is true.</td></tr>
<tr><td><code>loop {}</code></td><td><strong>Loop indefinitely</strong> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;loop-expr.html#infinite-loops" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> until <code>break</code>. Can yield value with <code>break x</code>.</td></tr>
<tr><td><code>for x in collection {}</code></td><td>Syntactic sugar to loop over <strong>iterators</strong>. <a href="https://doc.rust-lang.org/book/ch13-02-iterators.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;loop-expr.html#iterator-loops" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><less-important> <span class="hidemobile">    </span> <a class="tooltip" style="font-size: 70%; position:relative; left: 3px; color: gray;" title="The parent item expands to ...">↪ </a>  <code>collection.into_iter()</code> </less-important></td><td><less-important>Effectively converts any  <strong><code>IntoIterator</code></strong> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;trait.IntoIterator.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> type into proper iterator first. </less-important></td></tr>
<tr><td><less-important> <span class="hidemobile">    </span> <a class="tooltip" style="font-size: 70%; position:relative; left: 3px; color: gray;" title="The parent item expands to ...">↪ </a>  <code>iterator.next()</code> </less-important></td><td><less-important>On proper <strong><code>Iterator</code></strong> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;trait.Iterator.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> then <code>x = next()</code> until exhausted (first <code>None</code>). </less-important></td></tr>
<tr><td><code>if x {} else {}</code></td><td><strong>Conditional branch</strong> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;if-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> if expression is true.</td></tr>
<tr><td><code>'label: {}</code></td><td><strong>Block label</strong>, <a href="https://rust-lang.github.io/rfcs/2046-label-break-value.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a>  can be used with <code>break</code> to exit out of this block. <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>1.65+</sup></a></td></tr>
<tr><td><code>'label: loop {}</code></td><td>Similar <strong>loop label</strong>, <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control&#x2F;loop&#x2F;nested.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;loop-expr.html#loop-labels" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> useful for flow control in nested loops.</td></tr>
<tr><td><code>break</code></td><td><strong>Break expression</strong> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;loop-expr.html#break-expressions" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> to exit a labelled block or loop.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>break 'label x</code></td><td>Break out of block or loop named <code>'label</code> and make <code>x</code> its value.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>break 'label</code></td><td>Same, but don't produce any value.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>break x</code></td><td>Make <code>x</code> value of the innermost loop (only in actual <code>loop</code>).</td></tr>
<tr><td><code>continue </code></td><td><strong>Continue expression</strong> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;loop-expr.html#continue-expressions" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> to the next loop iteration of this loop.</td></tr>
<tr><td><code>continue 'label</code></td><td>Same but instead of this loop, enclosing loop marked with 'label.</td></tr>
<tr><td><code>x?</code></td><td>If <code>x</code> is <a href="https://doc.rust-lang.org/std/result/enum.Result.html#variant.Err">Err</a> or <a href="https://doc.rust-lang.org/std/option/enum.Option.html#variant.None">None</a>, <strong>return and propagate</strong>. <a href="https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html#propagating-errors" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/error&#x2F;result&#x2F;enter_question_mark.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;result&#x2F;index.html#the-question-mark-operator-"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;operator-expr.html#the-question-mark-operator" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>x.await</code></td><td>Syntactic sugar to <strong>get future, poll, yield</strong>.  <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;await-expr.html#await-expressions" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>  <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'18</sup></a> Only inside <code>async</code>.</td></tr>
<tr><td><less-important> <span class="hidemobile">    </span> <a class="tooltip" style="font-size: 70%; position:relative; left: 3px; color: gray;" title="The parent item expands to ...">↪ </a> <code>x.into_future()</code> </less-important></td><td><less-important> Effectively converts any  <strong><code>IntoFuture</code></strong> <a href="https://doc.rust-lang.org/std&#x2F;future&#x2F;trait.IntoFuture.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> type into proper future first. </less-important></td></tr>
<tr><td><less-important> <span class="hidemobile">    </span> <a class="tooltip" style="font-size: 70%; position:relative; left: 3px; color: gray;" title="The parent item expands to ...">↪ </a> <code>future.poll()</code> </less-important></td><td><less-important> On proper <strong><code>Future</code></strong> <a href="https://doc.rust-lang.org/std&#x2F;future&#x2F;trait.Future.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> then <code>poll()</code> and yield flow if <strong><code>Poll::Pending</code></strong>. <a href="https://doc.rust-lang.org/std&#x2F;task&#x2F;enum.Poll.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> </less-important></td></tr>
<tr><td><code>return x</code></td><td><strong>Early return</strong> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;return-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> from fn. More idiomatic is to end with expression.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>{ return }</code></td><td>Inside normal <code>{}</code>-blocks <code>return</code> exits surrounding function.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>|| { return }</code></td><td>Within closures <code>return</code> exits that <em>c.</em> only, i.e., closure is <em>s. fn.</em></td></tr>
<tr><td><span class="hidemobile">    </span> <code>async { return }</code></td><td>Inside <code>async</code> a <code>return</code> <strong>only</strong> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;block-expr.html#control-flow-operators" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> exits that <code>{}</code>, i.e., <code>async {}</code> is <em>s. fn.</em></td></tr>
<tr><td><code>f()</code></td><td>Invoke callable <code>f</code> (e.g., a function, closure, function pointer, <code>Fn</code>, …).</td></tr>
<tr><td><code>x.f()</code></td><td>Call member fn, requires <code>f</code> takes <code>self</code>, <code>&amp;self</code>, … as first argument.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>X::f(x)</code></td><td>Same as <code>x.f()</code>. Unless <code>impl Copy for X {}</code>, <code>f</code> can only be called once.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>X::f(&amp;x)</code></td><td>Same as <code>x.f()</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>X::f(&amp;mut x)</code></td><td>Same as <code>x.f()</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>S::f(&amp;x)</code></td><td>Same as <code>x.f()</code> if <code>X</code> <a href="https://doc.rust-lang.org/std/ops/trait.Deref.html">derefs</a> to <code>S</code>, i.e., <code>x.f()</code> finds methods of <code>S</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>T::f(&amp;x)</code></td><td>Same as <code>x.f()</code> if <code>X impl T</code>, i.e., <code>x.f()</code> finds methods of <code>T</code> if in scope.</td></tr>
<tr><td><code>X::f()</code></td><td>Call associated function, e.g., <code>X::new()</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&lt;X as T&gt;::f()</code></td><td>Call trait method <code>T::f()</code> implemented for <code>X</code>.</td></tr>
</tbody></table>
</fixed-2-column>
<h3 id="organizing-code">Organizing Code<sup id="target-organizing-code" class="target"><a href="#organizing-code">url</a></sup></h3>
<p>Segment projects into smaller units and minimize dependencies.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>mod m {}</code></td><td>Define a <strong>module</strong>, <a href="https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/mod.html#modules" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;modules.html#modules" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> get definition from inside <code>{}</code>. <a href="#project-anatomy" title="On this site, below."><sup>↓</sup></a></td></tr>
<tr><td><code>mod m;</code></td><td>Define a module, get definition from <code>m.rs</code> or <code>m/mod.rs</code>. <a href="#project-anatomy" title="On this site, below."><sup>↓</sup></a></td></tr>
<tr><td><code>a::b</code></td><td>Namespace <strong>path</strong> <a href="https://doc.rust-lang.org/stable/rust-by-example/mod&#x2F;use.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/paths.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> to element <code>b</code> within <code>a</code> (<code>mod</code>, <code>enum</code>, …).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>::b</code></td><td>Search <code>b</code> in <strong>crate root</strong> <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'15</sup></a> <a href="https://doc.rust-lang.org/stable/reference/glossary.html#crate" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> or <strong>ext. prelude</strong>; <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'18</sup></a> <a href="https://doc.rust-lang.org/stable/reference/names&#x2F;preludes.html#extern-prelude" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <strong>global path</strong>. <a href="https://doc.rust-lang.org/stable/reference/paths.html#path-qualifiers" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Largely deprecated or outdated; prefer modern alternative."><sup>🗑️</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>crate::b</code></td><td>Search <code>b</code> in crate root. <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'18</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>self::b</code></td><td>Search <code>b</code> in current module.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>super::b</code></td><td>Search <code>b</code> in parent module.</td></tr>
<tr><td><code>use a::b;</code></td><td><strong>Use</strong> <a href="https://doc.rust-lang.org/stable/rust-by-example/mod&#x2F;use.html#the-use-declaration" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;use-declarations.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <code>b</code> directly in this scope without requiring <code>a</code> anymore.</td></tr>
<tr><td><code>use a::{b, c};</code></td><td>Same, but bring <code>b</code> and <code>c</code> into scope.</td></tr>
<tr><td><code>use a::b as x;</code></td><td>Bring <code>b</code> into scope but name <code>x</code>, like <code>use std::error::Error as E</code>.</td></tr>
<tr><td><code>use a::b as _;</code></td><td>Bring <code>b</code> anon. into scope, useful for traits with conflicting names.</td></tr>
<tr><td><code>use a::*;</code></td><td>Bring everything from <code>a</code> in, only recomm. if <code>a</code> is some <strong>prelude</strong>. <a href="https://doc.rust-lang.org/std&#x2F;prelude&#x2F;index.html#other-preludes"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a>  <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;36384840&#x2F;what-is-the-prelude" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>pub use a::b;</code></td><td>Bring <code>a::b</code> into scope and reexport from here.</td></tr>
<tr><td><code>pub T</code></td><td>&quot;Public if parent path is public&quot; <strong>visibility</strong> <a href="https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/reference/visibility-and-privacy.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> for <code>T</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>pub(crate) T</code></td><td>Visible at most<sup>1</sup> in current crate.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>pub(super) T</code></td><td>Visible at most<sup>1</sup> in parent.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>pub(self) T</code></td><td>Visible at most<sup>1</sup> in current module (default, same as no <code>pub</code>).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>pub(in a::b) T</code></td><td>Visible at most<sup>1</sup> in ancestor <code>a::b</code>.</td></tr>
<tr><td><code>extern crate a;</code></td><td>Declare dependency on external <strong>crate</strong>; <a href="https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html#using-a-crate-to-get-more-functionality" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;extern-crates.html#extern-crate-declarations" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Largely deprecated or outdated; prefer modern alternative."><sup>🗑️</sup></a> just <code>use a::b</code> in <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'18</sup></a>.</td></tr>
<tr><td><code>extern &quot;C&quot; {}</code></td><td><em>Declare</em> external dependencies and ABI (e.g., <code>&quot;C&quot;</code>) from <strong>FFI</strong>. <a href="https://doc.rust-lang.org/book/ch19-01-unsafe-rust.html#using-extern-functions-to-call-external-code" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/std_misc&#x2F;ffi.html#foreign-function-interface" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/nightly/nomicon/ffi.html#calling-foreign-functions" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;external-blocks.html#external-blocks" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>extern &quot;C&quot; fn f() {}</code></td><td><em>Define</em> function to be exported with ABI (e.g., <code>&quot;C&quot;</code>) to FFI.</td></tr>
</tbody></table>
</fixed-2-column>
<footnotes>
<p><sup>1</sup> Items in child modules always have access to any item, regardless if <code>pub</code> or not.</p>
</footnotes>
<h3 id="type-aliases-and-casts">Type Aliases and Casts<sup id="target-type-aliases-and-casts" class="target"><a href="#type-aliases-and-casts">url</a></sup></h3>
<p>Short-hand names of types, and methods to convert one type to another.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>type T = S;</code></td><td>Create a <strong>type alias</strong>, <a href="https://doc.rust-lang.org/book/ch19-04-advanced-types.html#creating-type-synonyms-with-type-aliases" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;type-aliases.html#type-aliases" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> i.e., another name for <code>S</code>.</td></tr>
<tr><td><code>Self</code></td><td>Type alias for <strong>implementing type</strong>, <a href="https://doc.rust-lang.org/stable/reference/types.html#self-types" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> e.g., <code>fn new() -&gt; Self</code>.</td></tr>
<tr><td><code>self</code></td><td>Method subject in <code>fn f(self) {}</code>, e.g., akin to <code>fn f(self: Self) {}</code>.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>&amp;self</code></td><td>Same, but refers to self as borrowed, would equal <code>f(self: &amp;Self)</code></td></tr>
<tr><td><span class="hidemobile">    </span>  <code>&amp;mut self</code></td><td>Same, but mutably borrowed, would equal <code>f(self: &amp;mut Self)</code></td></tr>
<tr><td><span class="hidemobile">    </span>  <code>self: Box&lt;Self&gt;</code></td><td><a href="https://github.com/withoutboats/rfcs/blob/arbitray-receivers/text/0000-century-of-the-self-type.md"><strong>Arbitrary self type</strong></a>, add methods to smart ptrs (<code>my_box.f_of_self()</code>).</td></tr>
<tr><td><code>&lt;S as T&gt;</code></td><td><strong>Disambiguate</strong> <a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html#fully-qualified-syntax-for-disambiguation-calling-methods-with-the-same-name" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;call-expr.html#disambiguating-function-calls" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> type <code>S</code> as trait <code>T</code>, e.g., <code>&lt;S as T&gt;::f()</code>.</td></tr>
<tr><td><code>a::b as c</code></td><td>In <code>use</code> of symbol, import <code>S</code> as <code>R</code>, e.g., <code>use a::S as R</code>.</td></tr>
<tr><td><code>x as u32</code></td><td>Primitive <strong>cast</strong>, <a href="https://doc.rust-lang.org/stable/rust-by-example/types&#x2F;cast.html#casting" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;operator-expr.html#type-cast-expressions" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> may truncate and be a bit surprising. <sup>1</sup> <a href="https://doc.rust-lang.org/nightly/nomicon/casts.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a></td></tr>
</tbody></table>
</fixed-2-column>
<footnotes>
<p><sup>1</sup> See <a href="https://techlivewang.gitee.io/cheats.rs/#type-conversions"><strong>Type Conversions</strong></a> below for all the ways to convert between types.</p>
</footnotes>
<h3 id="macros-attributes">Macros &amp; Attributes<sup id="target-macros-attributes" class="target"><a href="#macros-attributes">url</a></sup></h3>
<p>Code generation constructs expanded before the actual compilation happens.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>m!()</code></td><td><strong>Macro</strong> <a href="https://doc.rust-lang.org/book/ch19-06-macros.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;index.html#macros"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/macros.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> invocation, also <code>m!{}</code>, <code>m![]</code> (depending on macro).</td></tr>
<tr><td><code>#[attr]</code></td><td>Outer <strong>attribute</strong>, <a href="https://doc.rust-lang.org/stable/rust-by-example/attribute.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/attributes.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> annotating the following item.</td></tr>
<tr><td><code>#![attr]</code></td><td>Inner attribute, annotating the <em>upper</em>, surrounding item.</td></tr>
</tbody></table>
</fixed-2-column>
<div>&nbsp;</div>
<fixed-2-column class="color-header special_example">
<table><thead><tr><th>Inside Macros <sup>1</sup></th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>$x:ty</code></td><td>Macro capture, the <code>:…</code> <strong>fragment</strong> <a href="https://doc.rust-lang.org/stable/reference/macros-by-example.html#metavariables" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> declares what is allowed for <code>$x</code>. <sup>2</sup></td></tr>
<tr><td><code>$x</code></td><td>Macro substitution, e.g., use the captured <code>$x:ty</code> from above.</td></tr>
<tr><td><code>$(x),*</code></td><td>Macro <strong>repetition</strong> <a href="https://doc.rust-lang.org/stable/reference/macros-by-example.html#repetitions" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <em>zero or more times</em>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$(x),+</code></td><td>Same, but <em>one or more times</em>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$(x)?</code></td><td>Same, but <em>zero or one time</em> (separator doesn't apply).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$(x)&lt;&lt;+</code></td><td>In fact separators other than <code>,</code> are also accepted. Here: <code>&lt;&lt;</code>.</td></tr>
</tbody></table>
</fixed-2-column>
<footnotes>
<p><sup>1</sup> Applies to <strong>'macros by example'</strong>. <a href="https://doc.rust-lang.org/stable/reference/macros-by-example.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <br>
<sup>2</sup> See <a href="https://techlivewang.gitee.io/cheats.rs/#tooling-directives"><strong>Tooling Directives</strong></a> below for all captures.</p>
</footnotes>
<h3 id="pattern-matching">Pattern Matching<sup id="target-pattern-matching" class="target"><a href="#pattern-matching">url</a></sup></h3>
<p>Constructs found in <code>match</code> or <code>let</code> expressions, or function parameters.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>match m {}</code></td><td>Initiate <strong>pattern matching</strong>, <a href="https://doc.rust-lang.org/book/ch06-02-match.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control&#x2F;match.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;match-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> then use match arms, <em>c</em>. next table.</td></tr>
<tr><td><code>let S(x) = get();</code></td><td>Notably, <code>let</code> also <strong>destructures</strong> <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control&#x2F;match&#x2F;destructuring.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> similar to the table below.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>let S { x } = s;</code></td><td>Only <code>x</code> will be bound to value <code>s.x</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>let (_, b, _) = abc;</code></td><td>Only <code>b</code> will be bound to value <code>abc.1</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>let (a, ..) = abc;</code></td><td>Ignoring 'the rest' also works.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>let (.., a, b) = (1, 2);</code></td><td>Specific bindings take precedence over 'the rest', here <code>a</code> is <code>1</code>, <code>b</code> is <code>2</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>let s @ S { x } = get();</code></td><td>Bind <code>s</code> to <code>S</code> while <code>x</code> is bnd. to <code>s.x</code>, <strong>pattern binding</strong>, <a href="https://doc.rust-lang.org/book/ch18-03-pattern-syntax.html#-bindings" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control&#x2F;match&#x2F;binding.html#binding" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/patterns.html#identifier-patterns" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <em>c</em>. below <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>let w @ t @ f = get();</code></td><td>Stores 3 copies of <code>get()</code> result in each <code>w</code>, <code>t</code>, <code>f</code>. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>let (|x| x) = get();</code></td><td>Pathological or-pattern,<a href="#pattern-matching" title="On this site, below."><sup>↓</sup></a> <strong>not</strong> closure.<a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Same as <code>let x = get();</code> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>let Some(x) = get();</code></td><td><strong>Won't</strong> work <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> if p. can be <strong>refuted</strong>, <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;if-expr.html#if-let-expressions" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> use <code>let else</code> or <code>if let</code> instead.</td></tr>
<tr><td><code>let Some(x) = get() else {};</code></td><td>Try to assign <a href="https://rust-lang.github.io/rfcs/3137-let-else.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a> if not <code>else {}</code> w. must <code>break</code>, <code>return</code>, <code>panic!</code>, … <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>1.65+</sup></a> <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></td></tr>
<tr><td><code>if let Some(x) = get() {}</code></td><td>Branch if pattern can be assigned (e.g., <code>enum</code> variant), syntactic sugar. <sup>*</sup></td></tr>
<tr><td><code>while let Some(x) = get() {}</code></td><td>Equiv.; here keep calling <code>get()</code>, run <code>{}</code> as long as <em>p.</em> can be assigned.</td></tr>
<tr><td><code>fn f(S { x }: S)</code></td><td>Function param. also work like <code>let</code>, here <code>x</code> bound to <code>s.x</code> of <code>f(s)</code>. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
</tbody></table>
</fixed-2-column>
<footnotes>
<p><sup>*</sup> Desugars to <code>match get() { Some(x) =&gt; {}, _ =&gt; () }</code>.</p>
</footnotes>
<div>&nbsp;</div>
<p>Pattern matching arms in <code>match</code> expressions. Left side of these arms can also be found in <code>let</code> expressions.</p>
<fixed-2-column class="color-header special_example">
<table><thead><tr><th>Within Match Arm</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>E::A =&gt; {}</code></td><td>Match enum variant <code>A</code>, <em>c</em>. <strong>pattern matching</strong>. <a href="https://doc.rust-lang.org/book/ch06-02-match.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control&#x2F;match.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;match-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>E::B ( .. ) =&gt; {}</code></td><td>Match enum tuple variant <code>B</code>, ignoring any index.</td></tr>
<tr><td><code>E::C { .. } =&gt; {}</code></td><td>Match enum struct variant <code>C</code>, ignoring any field.</td></tr>
<tr><td><code>S { x: 0, y: 1 } =&gt; {}</code></td><td>Match <em>s.</em> with specific values (only <code>s</code> with <code>s.x</code> of <code>0</code> and <code>s.y</code> of <code>1</code>).</td></tr>
<tr><td><code>S { x: a, y: b } =&gt; {}</code></td><td>Match <em>s.</em> with <em>any</em> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> values and bind <code>s.x</code> to <code>a</code> and <code>s.y</code> to <code>b</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>S { x, y } =&gt; {}</code></td><td>Same, but shorthand with <code>s.x</code> and <code>s.y</code> bound as <code>x</code> and <code>y</code> respectively.</td></tr>
<tr><td><code>S { .. } =&gt; {}</code></td><td>Match struct with any values.</td></tr>
<tr><td><code>D =&gt; {}</code></td><td>Match enum variant <code>E::D</code> if <code>D</code> in <code>use</code>.</td></tr>
<tr><td><code>D =&gt; {}</code></td><td>Match anything, bind <code>D</code>; possibly false friend <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> of <code>E::D</code> if <code>D</code> not in <code>use</code>.</td></tr>
<tr><td><code>_ =&gt; {}</code></td><td>Proper wildcard that matches anything / &quot;all the rest&quot;.</td></tr>
<tr><td><code>0 | 1 =&gt; {}</code></td><td>Pattern alternatives, <strong>or-patterns</strong>. <a href="https://rust-lang.github.io/rfcs/2535-or-patterns.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span>  <code>E::A | E::Z =&gt; {}</code></td><td>Same, but on enum variants.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>E::C {x} | E::D {x} =&gt; {}</code></td><td>Same, but bind <code>x</code> if all variants have it.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>Some(A | B) =&gt; {}</code></td><td>Same, can also match alternatives deeply nested.</td></tr>
<tr><td><span class="hidemobile">    </span>  <code>|x| x =&gt; {}</code></td><td><strong>Pathological or-pattern</strong>,<a href="#pattern-matching" title="On this site, above."><sup>↑</sup></a><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> leading <code>|</code> ignored, is just <code>x | x</code>, thus <code>x</code>. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>(a, 0) =&gt; {}</code></td><td>Match tuple with any value for <code>a</code> and <code>0</code> for second.</td></tr>
<tr><td><code>[a, 0] =&gt; {}</code></td><td><strong>Slice pattern</strong>, <a href="https://doc.rust-lang.org/stable/reference/patterns.html#slice-patterns" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;edition-guide&#x2F;rust-2018&#x2F;slice-patterns.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> match array with any value for <code>a</code> and <code>0</code> for second.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>[1, ..] =&gt; {}</code></td><td>Match array starting with <code>1</code>, any value for rest; <strong>subslice pattern</strong>.  <a href="https://doc.rust-lang.org/stable/reference/patterns.html#rest-patterns" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a href="https://rust-lang.github.io/rfcs/2359-subslice-pattern-syntax.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>[1, .., 5] =&gt; {}</code></td><td>Match array starting with <code>1</code>, ending with <code>5</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>[1, x @ .., 5] =&gt; {}</code></td><td>Same, but also bind <code>x</code> to slice representing middle (<em>c.</em> pattern binding).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>[a, x @ .., b] =&gt; {}</code></td><td>Same, but match any first, last, bound as <code>a</code>, <code>b</code> respectively.</td></tr>
<tr><td><code>1 .. 3 =&gt; {}</code></td><td><strong>Range pattern</strong>, <a href="https://doc.rust-lang.org/book/ch18-03-pattern-syntax.html#matching-ranges-of-values-with-" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/reference/patterns.html#range-patterns" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> here matches <code>1</code> and <code>2</code>; partially unstable. <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>1 ..= 3 =&gt; {}</code></td><td>Inclusive range pattern, matches <code>1</code>, <code>2</code> and <code>3</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>1 .. =&gt; {}</code></td><td>Open range pattern, matches <code>1</code> and any larger number.</td></tr>
<tr><td><code>x @ 1..=5 =&gt; {}</code></td><td>Bind matched to <code>x</code>; <strong>pattern binding</strong>, <a href="https://doc.rust-lang.org/book/ch18-03-pattern-syntax.html#-bindings" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control&#x2F;match&#x2F;binding.html#binding" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/patterns.html#identifier-patterns" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> here <code>x</code> would be <code>1</code> … <code>5</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>Err(x @ Error {..}) =&gt; {}</code></td><td>Also works nested, here <code>x</code> binds to <code>Error</code>, esp. useful with <code>if</code> below.</td></tr>
<tr><td><code>S { x } if x &gt; 10 =&gt; {}</code></td><td>Pattern <strong>match guards</strong>, <a href="https://doc.rust-lang.org/book/ch18-03-pattern-syntax.html#extra-conditionals-with-match-guards" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control&#x2F;match&#x2F;guard.html#guards" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;match-expr.html#match-guards" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> condition must be true as well to match.</td></tr>
</tbody></table>
</fixed-2-column>
<h3 id="generics-constraints">Generics &amp; Constraints<sup id="target-generics-constraints" class="target"><a href="#generics-constraints">url</a></sup></h3>
<p>Generics combine with type constructors, traits and functions to give your users more flexibility.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>struct S&lt;T&gt; …</code></td><td>A <strong>generic</strong> <a href="https://doc.rust-lang.org/book/ch10-01-syntax.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/generics.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> type with a type parameter (<code>T</code> is placeholder here).</td></tr>
<tr><td><code>S&lt;T&gt; where T: R</code></td><td><strong>Trait bound</strong>, <a href="https://doc.rust-lang.org/book/ch10-02-traits.html#using-trait-bounds-to-conditionally-implement-methods" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/generics&#x2F;bounds.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/trait-bounds.html#trait-and-lifetime-bounds" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> limits allowed <code>T</code>, guarantees <code>T</code> has trait <code>R</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>where T: R, P: S</code></td><td><strong>Independent trait bounds</strong>, here one for <code>T</code> and one for (not shown) <code>P</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>where T: R, S</code></td><td>Compile error, <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> you probably want compound bound <code>R + S</code> below.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>where T: R + S</code></td><td><strong>Compound trait bound</strong>, <a href="https://doc.rust-lang.org/book/ch10-02-traits.html#specifying-multiple-trait-bounds-with-the--syntax" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/generics&#x2F;multi_bounds.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <code>T</code> must fulfill <code>R</code> and <code>S</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>where T: R + 'a</code></td><td>Same, but w. lifetime. <code>T</code> must fulfill <code>R</code>, if <code>T</code> has <em>lt.</em>, must outlive <code>'a</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>where T: ?Sized</code></td><td>Opt out of a pre-defined trait bound, here <code>Sized</code>. <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>where T: 'a</code></td><td>Type <strong>lifetime bound</strong>; <a href="https://doc.rust-lang.org/stable/rust-by-example/scope&#x2F;lifetime&#x2F;lifetime_bounds.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> if T has references, they must outlive <code>'a</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>where T: 'static</code></td><td>Same; does <em>not</em> mean value <code>t</code> <em>will</em> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> live <code>'static</code>, only that it could.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>where 'b: 'a</code></td><td>Lifetime <code>'b</code> must live at least as long as (i.e., <em>outlive</em>) <code>'a</code> bound.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>where u8: R&lt;T&gt;</code></td><td>Can also make conditional statements involving <em>other</em> types. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>S&lt;T: R&gt;</code></td><td>Short hand bound, almost same as above, shorter to write.</td></tr>
<tr><td><code>S&lt;const N: usize&gt;</code></td><td><strong>Generic const bound</strong>; <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;generics.html#const-generics" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> user of type <code>S</code> can provide constant value <code>N</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>S&lt;10&gt;</code></td><td>Where used, const bounds can be provided as primitive values.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>S&lt;{5+5}&gt;</code></td><td>Expressions must be put in curly brackets.</td></tr>
<tr><td><code>S&lt;T = R&gt;</code></td><td><strong>Default parameters</strong>; <a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html#default-generic-type-parameters-and-operator-overloading" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> makes <code>S</code> a bit easier to use, but keeps flexible.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>S&lt;const N: u8 = 0&gt;</code></td><td>Default parameter for constants; e.g., in <code>f(x: S) {}</code> param <code>N</code> is <code>0</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>S&lt;T = u8&gt;</code></td><td>Default parameter for types, e.g., in <code>f(x: S) {}</code> param <code>T</code> is <code>u8</code>.</td></tr>
<tr><td><code>S&lt;'_&gt;</code></td><td>Inferred <strong>anonymous lt.</strong>; asks compiler to <em>'figure it out'</em> if obvious.</td></tr>
<tr><td><code>S&lt;_&gt;</code></td><td>Inferred <strong>anonymous type</strong>, e.g., as <code>let x: Vec&lt;_&gt; = iter.collect()</code></td></tr>
<tr><td><code>S::&lt;T&gt;</code></td><td><strong>Turbofish</strong> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;trait.Iterator.html#method.collect"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> call site type disambiguation, e.g., <code>f::&lt;u32&gt;()</code>.</td></tr>
<tr><td><code>trait T&lt;X&gt; {}</code></td><td>A trait generic over <code>X</code>. Can have multiple <code>impl T for S</code> (one per <code>X</code>).</td></tr>
<tr><td><code>trait T { type X; }</code></td><td>Defines <strong>associated type</strong> <a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html#specifying-placeholder-types-in-trait-definitions-with-associated-types" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;associated-items.html#associated-types" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a href="https://rust-lang.github.io/rfcs/0195-associated-items.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a> <code>X</code>. Only one <code>impl T for S</code> possible.</td></tr>
<tr><td><code>trait T { type X&lt;G&gt;; }</code></td><td>Defines <strong>generic associated type</strong> (GAT), <a href="https://rust-lang.github.io/rfcs/1598-generic_associated_types.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a> <code>X</code> can be generic <code>Vec&lt;&gt;</code>.</td></tr>
<tr><td><code>trait T { type X&lt;'a&gt;; }</code></td><td>Defines a GAT generic over a lifetime.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>type X = R;</code></td><td>Set associated type within <code>impl T for S { type X = R; }</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>type X&lt;G&gt; = R&lt;G&gt;;</code></td><td>Same for GAT, e.g., <code>impl T for S { type X&lt;G&gt; = Vec&lt;G&gt;; }</code>.</td></tr>
<tr><td><code>impl&lt;T&gt; S&lt;T&gt; {}</code></td><td>Impl. <code>fn</code>'s for any <code>T</code> in <code>S&lt;T&gt;</code> <strong><em>generically</em></strong>, <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;implementations.html#generic-implementations" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> here <code>T</code> ty. parameter.</td></tr>
<tr><td><code>impl S&lt;T&gt; {}</code></td><td>Impl. <code>fn</code>'s for exactly <code>S&lt;T&gt;</code> <strong><em>inherently</em></strong>, <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;implementations.html#inherent-implementations" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> here <code>T</code> specific type, e.g., <code>u8</code>.</td></tr>
<tr><td><code>fn f() -&gt; impl T</code></td><td><strong>Existential types</strong>, <a href="https://doc.rust-lang.org/book/ch10-02-traits.html#returning-types-that-implement-traits" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> returns an unknown-to-caller <code>S</code> that <code>impl T</code>.</td></tr>
<tr><td><code>fn f(x: &amp;impl T)</code></td><td>Trait bound via &quot;<strong>impl traits</strong>&quot;, <a href="https://doc.rust-lang.org/book/ch10-02-traits.html#trait-bound-syntax" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> similar to <code>fn f&lt;S: T&gt;(x: &amp;S)</code> below.</td></tr>
<tr><td><code>fn f(x: &amp;dyn T)</code></td><td>Invoke <code>f</code> via <strong>dynamic dispatch</strong>, <a href="https://doc.rust-lang.org/book/ch17-02-trait-objects.html#using-trait-objects-that-allow-for-values-of-different-types" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/reference/types.html#trait-objects" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <code>f</code> will not be instantiated for <code>x</code>.</td></tr>
<tr><td><code>fn f&lt;X: T&gt;(x: X)</code></td><td>Fn. generic over <code>X</code>, <code>f</code> will be instantiated ('<a href="https://en.wikipedia.org/wiki/Monomorphization">monomorphized</a>') per <code>X</code>.</td></tr>
<tr><td><code>fn f() where Self: R;</code></td><td>In <code>trait T {}</code>, make <code>f</code> accessible only on types known to also <code>impl R</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn f() where Self: Sized;</code></td><td>Using <code>Sized</code> can opt <code>f</code> out of trait object vtable, enabling <code>dyn T</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn f() where Self: R {}</code></td><td>Other <code>R</code> useful w. dflt. fn. (non dflt. would need be impl'ed anyway).</td></tr>
<tr><td></fixed-2-column></td><td></td></tr>
</tbody></table>
<h3 id="higher-ranked-items">Higher-Ranked Items <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a><sup id="target-higher-ranked-items" class="target"><a href="#higher-ranked-items">url</a></sup></h3>
<p><em>Actual</em> types and traits, abstract over something, usually lifetimes.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>for&lt;'a&gt;</code></td><td>Marker for <strong>higher-ranked bounds.</strong> <a href="https://doc.rust-lang.org/nightly/nomicon/hrtb.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> <a href="https://doc.rust-lang.org/stable/reference/trait-bounds.html#higher-ranked-trait-bounds" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>trait T: for&lt;'a&gt; R&lt;'a&gt; {}</code></td><td>Any <code>S</code> that <code>impl T</code> would also have to fulfill <code>R</code> for any lifetime.</td></tr>
<tr><td><code>fn(&amp;'a u8)</code></td><td>Function pointer type holding fn callable with <strong>specific</strong> lifetime <code>'a</code>.</td></tr>
<tr><td><code>for&lt;'a&gt; fn(&amp;'a u8)</code></td><td><strong>Higher-ranked type</strong><sup>1</sup> <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;56105" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> holding fn call. with <strong>any</strong> <em>lt.</em>; subtype<a href="#type-conversions" title="On this site, below."><sup>↓</sup></a> of above.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn(&amp;'_ u8)</code></td><td>Same; automatically expanded to type <code>for&lt;'a&gt; fn(&amp;'a u8)</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn(&amp;u8)</code></td><td>Same; automatically expanded to type <code>for&lt;'a&gt; fn(&amp;'a u8)</code>.</td></tr>
<tr><td><code>dyn for&lt;'a&gt; Fn(&amp;'a u8)</code></td><td>Higher-ranked (trait-object) type, works like <code>fn</code> above.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>dyn Fn(&amp;'_ u8)</code></td><td>Same; automatically expanded to type <code>dyn for&lt;'a&gt; Fn(&amp;'a u8)</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>dyn Fn(&amp;u8)</code></td><td>Same; automatically expanded to type <code>dyn for&lt;'a&gt; Fn(&amp;'a u8)</code>.</td></tr>
</tbody></table>
<footnotes>
<p><sup>1</sup> Yes, the <code>for&lt;&gt;</code> is part of the type, which is why you write <code>impl T for for&lt;'a&gt; fn(&amp;'a u8)</code> below.</p>
</footnotes>
</fixed-2-column>
<div class="color-header special_example">
<div>&nbsp;</div>
<table><thead><tr><th>Implementing Traits</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>impl&lt;'a&gt; T for fn(&amp;'a u8) {}</code></td><td>For fn. pointer, where call accepts <strong>specific</strong> <em>lt.</em> <code>'a</code>, impl trait <code>T</code>.</td></tr>
<tr><td><code>impl T for for&lt;'a&gt; fn(&amp;'a u8) {}</code></td><td>For fn. pointer, where call accepts <strong>any</strong> <em>lt.</em>, impl trait <code>T</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>impl T for fn(&amp;u8) {}</code></td><td>Same, short version.</td></tr>
</tbody></table>
</div>
<h3 id="strings-chars">Strings &amp; Chars<sup id="target-strings-chars" class="target"><a href="#strings-chars">url</a></sup></h3>
<p>Rust has several ways to create textual values.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>&quot;...&quot;</code></td><td><strong>String literal</strong>, <a href="https://doc.rust-lang.org/stable/reference/tokens.html#string-literals" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a><sup>, 1</sup> a UTF-8 <code>&amp;'static str</code>, <a href="https://doc.rust-lang.org/std&#x2F;primitive.str.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> supporting these escapes:</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&quot;\n\r\t\0\\&quot;</code></td><td><strong>Common escapes</strong> <a href="https://doc.rust-lang.org/stable/reference/tokens.html#ascii-escapes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>, e.g., <code>&quot;\n&quot;</code> becomes <em>new line</em>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&quot;\x36&quot;</code></td><td><strong>ASCII <em>e.</em></strong> <a href="https://doc.rust-lang.org/stable/reference/tokens.html#ascii-escapes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> up to <code>7f</code>, e.g., <code>&quot;\x36&quot;</code> would become <code>6</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>&quot;\u{7fff}&quot;</code></td><td><strong>Unicode <em>e.</em></strong> <a href="https://doc.rust-lang.org/stable/reference/tokens.html#unicode-escapes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> up to 6 digits, e.g., <code>&quot;\u{7fff}&quot;</code> becomes <code>翿</code>.</td></tr>
<tr><td><code>r&quot;...&quot;</code></td><td><strong>Raw string literal</strong>. <a href="https://doc.rust-lang.org/stable/reference/tokens.html#raw-string-literals" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a><sup>, 1</sup>UTF-8, but won't interpret any escape above.</td></tr>
<tr><td><code>r#&quot;...&quot;#</code></td><td>Raw string literal, UTF-8, but can also contain <code>&quot;</code>. Number of <code>#</code> can vary.</td></tr>
<tr><td><code>b&quot;...&quot;</code></td><td><strong>Byte string literal</strong>; <a href="https://doc.rust-lang.org/stable/reference/tokens.html#byte-and-byte-string-literals" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a><sup>, 1</sup> constructs ASCII-only <code>&amp;'static [u8; N]</code>.</td></tr>
<tr><td><code>br&quot;...&quot;</code>, <code>br#&quot;...&quot;#</code></td><td>Raw byte string literal, combination analog to above.</td></tr>
<tr><td><code>'🦀'</code></td><td><strong>Character literal</strong>, <a href="https://doc.rust-lang.org/stable/reference/tokens.html#character-and-string-literals" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> fixed 4 byte unicode '<strong>char</strong>'. <a href="https://doc.rust-lang.org/std&#x2F;primitive.char.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><code>b'x'</code></td><td>ASCII <strong>byte literal</strong>, <a href="https://doc.rust-lang.org/stable/reference/tokens.html#byte-literals" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> a single <code>u8</code> byte.</td></tr>
<tr><td><code>c&quot;...&quot;</code></td><td><strong>C string literal</strong>, <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a> constructs NUL-terminated <code>&amp;CStr</code>, <a href="https://doc.rust-lang.org/std&#x2F;ffi&#x2F;struct.CStr.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> for FFI interop. <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>1.77+</sup></a></td></tr>
</tbody></table>
<footnotes>
<p><sup>1</sup> Supports multiple lines out of the box. Just keep in mind <code>Debug</code><a href="#string-output" title="On this site, below."><sup>↓</sup></a> (e.g., <code>dbg!(x)</code> and <code>println!(&quot;{x:?}&quot;)</code>) might render them as <code>\n</code>, while <code>Display</code><a href="#string-output" title="On this site, below."><sup>↓</sup></a> (e.g., <code>println!(&quot;{x}&quot;)</code>) renders them <em>proper</em>.</p>
</footnotes>
</fixed-2-column>
<h3 id="documentation">Documentation<sup id="target-documentation" class="target"><a href="#documentation">url</a></sup></h3>
<p>Debuggers hate him. Avoid bugs with this one weird trick.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>///</code></td><td>Outer line <strong>doc comment</strong>,<sup>1</sup> <a href="https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html#making-useful-documentation-comments" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/meta&#x2F;doc.html#documentation" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/comments.html#doc-comments" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> use these on ty., traits, fn's, …</td></tr>
<tr><td><code>//!</code></td><td>Inner line doc comment, mostly used at top of file.</td></tr>
<tr><td><code>//</code></td><td>Line comment, use these to document code flow or <em>internals</em>.</td></tr>
<tr><td><code>/* … */</code></td><td>Block comment. <sup>2</sup> <a class="tooltip" title="Largely deprecated or outdated; prefer modern alternative."><sup>🗑️</sup></a></td></tr>
<tr><td><code>/** … */</code></td><td>Outer block doc comment. <sup>2</sup> <a class="tooltip" title="Largely deprecated or outdated; prefer modern alternative."><sup>🗑️</sup></a></td></tr>
<tr><td><code>/*! … */</code></td><td>Inner block doc comment. <sup>2</sup> <a class="tooltip" title="Largely deprecated or outdated; prefer modern alternative."><sup>🗑️</sup></a></td></tr>
</tbody></table>
</fixed-2-column>
<footnotes>
<p><sup>1</sup> <a href="https://techlivewang.gitee.io/cheats.rs/#tooling-directives">Tooling Directives</a> outline what you can do inside doc comments. <br>
<sup>2</sup> Generally discouraged due to bad UX. If possible use equivalent line comment instead with IDE support.</p>
</footnotes>
<h3 id="miscellaneous">Miscellaneous<sup id="target-miscellaneous" class="target"><a href="#miscellaneous">url</a></sup></h3>
<p>These sigils did not fit any other category but are good to know nonetheless.</p>
<fixed-2-column>
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>!</code></td><td>Always empty <strong>never type</strong>. <a href="https://doc.rust-lang.org/book/ch19-04-advanced-types.html#the-never-type-that-never-returns" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/fn&#x2F;diverging.html#diverging-functions" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;primitive.never.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https://doc.rust-lang.org/stable/reference/types.html#never-type" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn f() -&gt; ! {}</code></td><td>Function that never ret.; compat. with any <em>ty.</em> e.g., <code>let x: u8 = f();</code></td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn f() -&gt; Result&lt;(), !&gt; {}</code></td><td>Function that must return <code>Result</code> but signals it can never <code>Err</code>. <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>fn f(x: !) {}</code></td><td>Function that exists, but can never be called. Not very useful. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td></tr>
<tr><td><code>_</code></td><td>Unnamed <strong>wildcard</strong> <a href="https://doc.rust-lang.org/stable/reference/patterns.html#wildcard-pattern" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> variable binding, e.g., <code>|x, _| {}</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>let _ = x;</code></td><td>Unnamed assign. is no-op, does <strong>not</strong> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> move out <code>x</code> or preserve scope!</td></tr>
<tr><td><span class="hidemobile">    </span> <code>_ = x;</code></td><td>You can assign <em>anything</em> to <code>_</code> without <code>let</code>, i.e.,  <code>_ = ignore_rval();</code> <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></td></tr>
<tr><td><code>_x</code></td><td>Variable binding that won't emit <em>unused variable</em> warnings.</td></tr>
<tr><td><code>1_234_567</code></td><td>Numeric separator for visual clarity.</td></tr>
<tr><td><code>1_u8</code></td><td>Type specifier for <strong>numeric literals</strong> <a href="https://doc.rust-lang.org/stable/rust-by-example/types&#x2F;literals.html#literals" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/tokens.html#number-literals" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>  (also <code>i8</code>, <code>u16</code>, …).</td></tr>
<tr><td><code>0xBEEF</code>, <code>0o777</code>, <code>0b1001</code></td><td>Hexadecimal (<code>0x</code>), octal (<code>0o</code>) and binary (<code>0b</code>) integer literals.</td></tr>
<tr><td><code>r#foo</code></td><td>A <strong>raw identifier</strong> <a href="https://doc.rust-lang.org/book/appendix-01-keywords.html#raw-identifiers" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/compatibility&#x2F;raw_identifiers.html#raw-identifiers" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> for edition compatibility. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>x;</code></td><td><strong>Statement</strong> <a href="https://doc.rust-lang.org/stable/reference/statements.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> terminator, <em>c</em>. <strong>expressions</strong> <a href="https://doc.rust-lang.org/stable/rust-by-example/expression.html" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/expressions.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
</fixed-2-column>
<h3 id="common-operators">Common Operators<sup id="target-common-operators" class="target"><a href="#common-operators">url</a></sup></h3>
<p>Rust supports most operators you would expect (<code>+</code>, <code>*</code>, <code>%</code>, <code>=</code>, <code>==</code>, …), including <strong>overloading</strong>. <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> Since they behave no differently in Rust we do not list them here.</p>
<hr />
<magic>
<h1 id="behind-the-scenes">Behind the Scenes<sup id="target-behind-the-scenes" class="target"><a href="#behind-the-scenes">url</a></sup></h1>
<p>Arcane knowledge that may do terrible things to your mind, highly recommended.</p>
<h2 id="the-abstract-machine">The Abstract Machine<sup id="target-the-abstract-machine" class="target"><a href="#the-abstract-machine">url</a></sup></h2>
<p>Like <code>C</code> and <code>C++</code>, Rust is based on an <em>abstract machine</em>.</p>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-abstract-machine-1" name="tab-group-abstract-machine" checked>
<label for="tab-abstract-machine-1"><b>Overview</b></label>
<panel><div>
<div style="text-align: center;">
<mini-zoo class="zoo" style="text-align: center;">
    <entry>
        <machine class="bad">Rust</machine>
    </entry>
    <code style="text-align:center;">→</code>
    <entry>
        <machine class="bad">CPU</machine>
    </entry>
    <br/>
    <note><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Misleading.</note>
</mini-zoo>
<mini-zoo class="zoo" style="text-align: center; margin-left: 80px;">
    <entry>
        <machine class="good">Rust</machine>
    </entry>
    <code style="text-align:center">→</code>
    <entry style="width: 120px;">
        <machine class="good">Abstract Machine</machine>
    </entry>
    <code style="text-align:center">→</code>
    <entry>
        <machine class="good">CPU</machine>
    </entry>
    <br/>
    <note>Correct.</note>
</mini-zoo>
</div>
<div>&nbsp;</div>
<p>With rare exceptions you are never 'allowed to reason' about the actual CPU. You write code for an <em>abstracted</em> CPU. Rust then (sort of) understands what you want, and translates that into actual RISC-V / x86 / … machine code.</p>
<div>&nbsp;</div>
<p>This <em>abstract machine</em></p>
<ul>
<li>is not a runtime, and does not have any runtime overhead, but is a <em>computing model abstraction</em>,</li>
<li>contains concepts such as memory regions (<em>stack</em>, …), execution semantics, …</li>
<li><em>knows</em> and <em>sees</em> things your CPU might not care about,</li>
<li>is de-facto a contract between you and the compiler,</li>
<li>and <strong>exploits all of the above for optimizations</strong>.</li>
</ul>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-abstract-machine-2" name="tab-group-abstract-machine">
<label for="tab-abstract-machine-2"><b>Misconceptions</b></label>
<panel><div>
<div class="color-header abstract-machine">
<p>On the left things people may incorrectly assume they <em>should get away with</em> if Rust targeted CPU directly. On the right things you'd interfere with if in reality if you violate the AM contract.</p>
<div>&nbsp;</div>
<table><thead><tr><th>Without AM</th><th>With AM</th></tr></thead><tbody>
<tr><td><code>0xffff_ffff</code> would make a valid <code>char</code>. <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></td><td>AM may exploit <em>'invalid'</em> bit patterns to pack unrelated data.</td></tr>
<tr><td><code>0xff</code> and <code>0xff</code> are same pointer. <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></td><td>AM pointers can have <em>'domain'</em> attached for optimization.</td></tr>
<tr><td>Any r/w on pointer <code>0xff</code> always fine. <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></td><td>AM may issue cache-friendly ops since <em>'no read possible'</em>.</td></tr>
<tr><td>Reading un-init just gives random value. <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></td><td>AM <em>'knows'</em> read impossible, may remove all related code.</td></tr>
<tr><td>Data race just gives random value. <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></td><td>AM may split R/W, produce <em>impossible</em> value, see above.</td></tr>
<tr><td>Null ref. is just <code>0x0</code> in some register. <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></td><td>Holding <code>0x0</code> in reference summons Cthulhu.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<blockquote>
<p>This table is only to outline what the AM does. Unlike C or C++, Rust never lets you do the wrong thing unless you force it with <code>unsafe</code>. <a href="#unsafe-unsound-undefined" title="On this site, below."><sup>↓</sup></a></p>
</blockquote>
</div>
</div></panel></tab>
</tabs>
<!--  -->
<!-- > Practically this means: -->
<!-- > - before assuming your **CPU** will do `A` when writing `B` you need positive proof **via documentation**(!), -->
<!-- > - if you don't have that any physical behavior is _coincidental_, -->
<!-- > - violate the abtract machine's contract and the optimizer makes your CPU do something **entirely else** &mdash; **undefined behavior**.<a href="#unsafe-unsound-undefined" title="On this site, below."><sup>↓</sup></a> -->
<!--  -->
<h2 id="language-sugar">Language Sugar<sup id="target-language-sugar" class="target"><a href="#language-sugar">url</a></sup></h2>
<p>If something works that &quot;shouldn't work now that you think about it&quot;, it might be due to one of these.</p>
<div class="color-header language-sugar">
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>Coercions</strong> <a href="https://doc.rust-lang.org/nightly/nomicon/coercions.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a></td><td><em>Weakens</em> types to match signature, e.g., <code>&amp;mut T</code> to <code>&amp;T</code>; <em>c</em>. <em>type conv.</em> <a href="#type-conversions" title="On this site, below."><sup>↓</sup></a></td></tr>
<tr><td><strong>Deref</strong> <a href="https://doc.rust-lang.org/nightly/nomicon/vec-deref.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;28519997&#x2F;what-are-rusts-exact-auto-dereferencing-rules" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td><a href="https://doc.rust-lang.org/std/ops/trait.Deref.html">Derefs</a> <code>x: T</code> until <code>*x</code>, <code>**x</code>, … compatible with some target <code>S</code>.</td></tr>
<tr><td><strong>Prelude</strong> <a href="https://doc.rust-lang.org/std&#x2F;prelude&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td>Automatic import of basic items, e.g., <code>Option</code>, <code>drop()</code>, …</td></tr>
<tr><td><strong>Reborrow</strong> <a href="https:&#x2F;&#x2F;quinedot.github.io&#x2F;rust-learning&#x2F;st-reborrow.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Since <code>x: &amp;mut T</code> can't be copied; moves new <code>&amp;mut *x</code> instead.</td></tr>
<tr><td><strong>Lifetime Elision</strong> <a href="https://doc.rust-lang.org/book/ch10-03-lifetime-syntax.html#lifetime-elision" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/nightly/nomicon/lifetime-elision.html#lifetime-elision" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> <a href="https://doc.rust-lang.org/stable/reference/lifetime-elision.html#lifetime-elision" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td><td>Allows you to write <code>f(x: &amp;T)</code>, instead of <code>f&lt;'a&gt;(x: &amp;'a T)</code>, for brevity.</td></tr>
<tr><td><strong>Lifetime Extensions</strong> <a href="https:&#x2F;&#x2F;blog.m-ou.se&#x2F;super-let&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a>  <a href="https://doc.rust-lang.org/stable/reference/destructors.html#temporary-lifetime-extension" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td><td>In <code>let x = &amp;tmp().f</code> and similar hold on to temporary past line.</td></tr>
<tr><td><strong>Method Resolution</strong> <a href="https://doc.rust-lang.org/stable/reference/expressions&#x2F;method-call-expr.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td><td>Derefs or borrow <code>x</code> until <code>x.f()</code> works.</td></tr>
<tr><td><strong>Match Ergonomics</strong> <a href="https://rust-lang.github.io/rfcs/2005-match-ergonomics.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a></td><td>Repeatedly deref. <a href="https://doc.rust-lang.org/stable/reference/glossary.html#scrutinee">scrutinee</a> and adds <code>ref</code> and <code>ref mut</code> to bindings.</td></tr>
<tr><td><strong>Rvalue Static Promotion</strong> <a href="https://rust-lang.github.io/rfcs/1414-rvalue_static_promotion.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a>  <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td><td>Makes refs. to constants <code>'static</code>, e.g., <code>&amp;42</code>, <code>&amp;None</code>, <code>&amp;mut []</code>.</td></tr>
<tr><td><strong>Dual Definitions</strong> <a href="https://rust-lang.github.io/rfcs/1506-adt-kinds.html#tuple-structs"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td><td>Defining one (e.g., <code>struct S(u8)</code>) implicitly def. another (e.g., <code>fn S</code>).</td></tr>
<tr><td><strong>Drop Hidden Flow</strong> <a href="https://doc.rust-lang.org/stable/reference/destructors.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td><td>At end of blocks <code>{ ... }</code> or <code>_</code> assignment, may call <code>T::drop()</code>. <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;trait.Drop.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><strong>Drop Not Callable</strong> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;trait.Drop.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td><td>Compiler forbids explicit <code>T::drop()</code> call, must use <code>mem::drop()</code>. <a href="https://doc.rust-lang.org/std&#x2F;mem&#x2F;fn.drop.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<blockquote>
<p><strong>Opinion</strong> <a class="tooltip" title="Author's opinion."><sup>💬</sup></a> — These features make your life easier <em>using</em> Rust, but stand in the way of <em>learning</em> it. If you want to develop a <em>genuine understanding</em>, spend some extra time exploring them.</p>
</blockquote>
<h2 id="memory-lifetimes">Memory &amp; Lifetimes<sup id="target-memory-lifetimes" class="target"><a href="#memory-lifetimes">url</a></sup></h2>
<p>An illustrated guide to moves, references and lifetimes.</p>
<tabs class="lifetimes">
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-lt-1" name="tab-lt" checked>
<label for="tab-lt-1"><b>Types & Moves</b></label>
<panel>
<div>
<lifetime-section>
<lifetime-example>
    <section-header>Application Memory</section-header>
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 57px;">S(1)</value>
        </values>
        <labels>
            <label class="" style="right: 10px;">&nbsp;</label>
        </labels>
        <subtext>Application Memory</subtext>
    </memory-row>
</lifetime-example>
<explanation>
<ul>
<li>Application memory is just array of bytes on low level.</li>
<li>Operating environment usually segments that, amongst others, into:
<ul>
<li><strong>stack</strong> (small, low-overhead memory,<sup>1</sup> most <em>variables</em> go here),</li>
<li><strong>heap</strong> (large, flexible memory, but always handled via stack proxy like <code>Box&lt;T&gt;</code>),</li>
<li><strong>static</strong> (most commonly used as resting place for <code>str</code> part of <code>&amp;str</code>),</li>
<li><strong>code</strong> (where bitcode of your functions reside).</li>
</ul>
</li>
<li>Most tricky part is tied to <strong>how stack evolves</strong>, which is <strong>our focus</strong>.</li>
</ul>
<footnotes>
<p><sup>1</sup> For fixed-size values stack is trivially manageable: <em>take a few bytes more while you need them, discarded once you leave</em>. However, giving out pointers to these <em>transient</em> locations form the very essence of why <em>lifetimes</em> exist; and are the subject of the rest of this chapter.</p>
</footnotes>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <section-header>Variables</section-header>
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 57px;">S(1)</value>
            <value class="t byte2" style="left: 97.5px;">S(1)</value>
        </values>
        <labels>
            <label class="byte2 hide" style="left: 57px;"><code>a</code></label>
            <label class="byte2" style="left: 97.5px;"><code>t</code></label>
        </labels>
        <subtext>Variables</subtext>
        <!-- <subtext><code>let t = S(1);</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let t = S(1);
</code></pre>
<ul>
<li>Reserves memory location with name <code>t</code> of type <code>S</code> and the value <code>S(1)</code> stored inside.</li>
<li>If declared with <code>let</code> that location lives on stack. <sup>1</sup></li>
<li>Note the <strong>linguistic ambiguity</strong>, in the term <strong><em>variable</em></strong>, it can mean the:
<ol>
<li><strong>name</strong> of the location in the source file (&quot;rename that variable&quot;),</li>
<li><strong>location</strong> in a compiled app, <code>0x7</code> (&quot;tell me the address of that variable&quot;),</li>
<li><strong>value</strong> contained within, <code>S(1)</code> (&quot;increment that variable&quot;).</li>
</ol>
</li>
<li>Specifically towards the compiler <code>t</code> can mean <strong>location of</strong> <code>t</code>, here <code>0x7</code>, and <strong>value within</strong> <code>t</code>, here <code>S(1)</code>.</li>
</ul>
<footnotes>
<p><sup>1</sup> Compare above,<a href="#data-structures" title="On this site, above."><sup>↑</sup></a> true for fully synchronous code, but <code>async</code> stack frame might placed it on heap via runtime.</p>
</footnotes>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <section-header>Move Semantics</section-header>
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 57px;">S(1)</value>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code>a</code></label>
            <label class="byte2" style="left: 97.5px;"><code>t</code></label>
        </labels>
        <subtext>Moves</subtext>
        <!-- <subtext><code>let a = t;</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let a = t;
</code></pre>
<ul>
<li>This will <strong>move</strong> value within <code>t</code> to location of <code>a</code>, or copy it, if <code>S</code> is <code>Copy</code>.</li>
<li>After move location <code>t</code> is <strong>invalid</strong> and cannot be read anymore.
<ul>
<li>Technically the bits at that location are not really <em>empty</em>, but <em>undefined</em>.</li>
<li>If you still had access to <code>t</code> (via <code>unsafe</code>) they might still <em>look</em> like valid <code>S</code>, but
any attempt to use them as valid <code>S</code> is undefined behavior. <a href="#unsafe-unsound-undefined" title="On this site, below."><sup>↓</sup></a></li>
</ul>
</li>
<li>We do not cover <code>Copy</code> types explicitly here. They change the rules a bit, but not much:
<ul>
<li>They won't be dropped.</li>
<li>They never leave behind an 'empty' variable location.</li>
</ul>
</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <section-header>Type Safety</section-header>
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <failed style="left: 231.5px;"><value class="atomic byte4">M { … }</value></failed>
            <denied style="left: 141px;">⛔</denied>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code></code></label>
            <label class="byte2" style="left: 170px;"><code>c</code></label>
        </labels>
        <subtext>Type Safety</subtext>
        <!-- <subtext><code>let c: S = M::new();</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let c: S = M::new();
</code></pre>
<ul>
<li>The <strong>type of a variable</strong> serves multiple important purposes, it:
<ol>
<li>dictates how the underlying bits are to be interpreted,</li>
<li>allows only well-defined operations on these bits</li>
<li>prevents random other values or bits from being written to that location.</li>
</ol>
</li>
<li>Here assignment fails to compile since the bytes of <code>M::new()</code> cannot be converted to form of type <code>S</code>.</li>
<li><strong>Conversions between types will <em>always</em> fail</strong> in general, <strong>unless explicit rule allows it</strong> (coercion, cast, …).</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <section-header>Scope & Drop</section-header>
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <drop><value class="t byte2" style="left: 57px;">S(1)</value><droparrow style="left:37px;">▼</droparrow></drop>
            <value class="t byte2 hide" style="left: 87.5px;">C(2)</value>
            <drop><value class="t byte2" style="left: 128px;">S(2)</value><droparrow style="left:107px;">▼</droparrow></drop>
            <failed style="left: -27.5px;"><value class="t byte2" style="left: 128px;">S(3)</value></failed>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code></code></label>
            <label class="byte2" style="left: 97.5px;"><code>t</code></label>
            <!-- <label class="byte2" style="left: 136.5px;"><code>c</code></label> -->
        </labels>
        <subtext>Scope & Drop</subtext>
        <!-- <subtext><code>{ let a = ...; }</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>{
    let mut c = S(2);
    c = S(3);  &#x2F;&#x2F; &lt;- Drop called on `c` before assignment.
    let t = S(1);
    let a = t;
}   &#x2F;&#x2F; &lt;- Scope of `a`, `t`, `c` ends here, drop called on `a`, `c`.
</code></pre>
<ul>
<li>Once the 'name' of a non-vacated variable goes out of (drop-)<strong>scope</strong>, the contained value is <strong>dropped</strong>.
<ul>
<li>Rule of thumb: execution reaches point where name of variable leaves <code>{}</code>-block it was defined in</li>
<li>In detail more tricky, esp. temporaries, …</li>
</ul>
</li>
<li>Drop also invoked when new value assigned to existing variable location.</li>
<li>In that case <strong><code>Drop::drop()</code></strong> is called on the location of that value.
<ul>
<li>In the example above <code>drop()</code> is called on <code>a</code>, twice on <code>c</code>, but not on <code>t</code>.</li>
</ul>
</li>
<li>Most non-<code>Copy</code> values get dropped most of the time; exceptions include <code>mem::forget()</code>, <code>Rc</code> cycles, <code>abort()</code>.</li>
</ul>
</explanation>
</lifetime-section>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-lt-2" name="tab-lt">
<label for="tab-lt-2"><b>Call Stack</b></label>
<panel><div>
<lifetime-section>
<lifetime-example>
    <section-header>Stack Frame</section-header>
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 57px;">S(1)</value>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code>a</code></label>
            <label class="byte2" style="left: 97.5px;"><code>x</code></label>
        </labels>
        <subtext>Function Boundaries</subtext>
        <!-- <subtext><code>fn f(x: S) {}</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>fn f(x: S) { … }

let a = S(1); &#x2F;&#x2F; &lt;- We are here
f(a);
</code></pre>
<ul>
<li>When a <strong>function is called</strong>, memory for parameters (and return values) are reserved on stack.<sup>1</sup></li>
<li>Here before <code>f</code> is invoked value in <code>a</code> is moved to 'agreed upon' location on stack, and during <code>f</code> works like 'local variable' <code>x</code>.</li>
</ul>
<footnotes>
<p><sup>1</sup> Actual location depends on calling convention, might practically not end up on stack at all, but that doesn't change mental model.</p>
</footnotes>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 131px;">S(1)</value>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code>a</code></label>
            <label class="byte2" style="left: 97.5px;"><code>x</code></label>
            <label class="byte2" style="left: 136px;"><code>x</code></label>
        </labels>
        <subtext>Nested Functions</subtext>
        <!-- <subtext><code>fn f(x: S) { ... f(x) ... }</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>fn f(x: S) {
    if once() { f(x) } &#x2F;&#x2F; &lt;- We are here (before recursion)
}

let a = S(1);
f(a);
</code></pre>
<ul>
<li><strong>Recursively calling</strong> functions, or calling other functions, likewise extends the stack frame.</li>
<li>Nesting too many invocations (esp. via unbounded recursion) will cause stack to grow, and eventually to overflow, terminating the app.</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <section-header>Validity of Variables</section-header>
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t" style="opacity: 0.4;"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 131px;">S(1)</value>
            <value class="atomic byte4" style="left: 190px;">M { }</value>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code>a</code></label>
            <label class="byte2" style="left: 97.5px;"><code>x</code></label>
            <label class="byte2" style="left: 174px;"><code>m</code></label>
        </labels>
        <subtext>Repurposing Memory</subtext>
        <!-- <subtext><code>f(x); let m = M::new();</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>fn f(x: S) {
    if once() { f(x) }
    let m = M::new() &#x2F;&#x2F; &lt;- We are here (after recursion)
}

let a = S(1);
f(a);
</code></pre>
<ul>
<li>Stack that previously held a certain type will be repurposed across (even within) functions.</li>
<li>Here, recursing on <code>f</code> produced second <code>x</code>, which after recursion was partially reused for <code>m</code>.</li>
</ul>
<blockquote>
<p>Key take away so far, there are multiple ways how memory locations that previously held a valid value of a certain type stopped doing so in the meantime.
As we will see shortly, this has implications for pointers.</p>
</blockquote>
</explanation>
</lifetime-section>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-lt-3" name="tab-lt">
<label for="tab-lt-3"><b>References & Pointers</b></label>
<panel><div>
<lifetime-section>
<lifetime-example>
    <section-header class="arrowed">Reference Types</section-header>
    <memory-row>
        <arrows>
            <arrow style="left: 62px; width: 176px;">&nbsp;<tip>▼</tip></arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 57px;">S(1)</value>
            <value class="ptr byte4" style="left: 171px;">0x3</value>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code>a</code></label>
            <label class="byte4" style="left: 171px;"><code>r</code></label>
        </labels>
        <subtext>References as Pointers</subtext>
        <!-- <subtext><code>let r = &mut a;</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let a = S(1);
let r: &amp;S = &amp;a;
</code></pre>
<ul>
<li>A <strong>reference type</strong> such as <code>&amp;S</code> or <code>&amp;mut S</code> can hold the <strong>location of</strong> some <code>s</code>.</li>
<li>Here type <code>&amp;S</code>, bound as name <code>r</code>, holds <em>location of</em> variable <code>a</code> (<code>0x3</code>), that must be type <code>S</code>, obtained via <code>&amp;a</code>.</li>
<li>If you think of variable <code>c</code> as <em>specific location</em>, reference <strong><code>r</code> is a <em>switchboard for locations</em></strong>.</li>
<li>The type of the reference, like all other types, can often be inferred, so we might omit it from now on:<pre><code>let r: &amp;S = &amp;a;
let r = &amp;a;
</code></pre>
</li>
</ul>
<!-- - References on their own are **never** concerned with the _value within_ the location they point to. -->
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <section-header class="arrowed">(Mutable) References</section-header>
    <memory-row>
        <arrows>
            <arrow style="left: 62px; width: 176px;">&nbsp;<tip>▼</tip></arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 57px;">S(2)</value>
            <value class="ptr byte4" style="left: 171px;">0x3</value>
            <value class="t byte2" style="left: 213px;">S(1)</value>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code>a</code></label>
            <label class="byte4" style="left: 171px;"><code>r</code></label>
            <label class="byte4" style="left: 193px;"><code>d</code></label>
        </labels>
        <subtext>Access to Non-Owned Memory</subtext>
        <!-- <subtext><code>let d = r.clone(); *r = S(2);</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let mut a = S(1);
let r = &amp;mut a;
let d = r.clone();  &#x2F;&#x2F; Valid to clone (or copy) from r-target.
*r = S(2);          &#x2F;&#x2F; Valid to set new S value to r-target.
</code></pre>
<ul>
<li>References can <strong>read from</strong>  (<code>&amp;S</code>) and also <strong>write to</strong> (<code>&amp;mut S</code>) location they point to.</li>
<li>The <em>dereference</em> <code>*r</code> means to neither use the <em>location of</em> or <em>value within</em> <code>r</code>, but the <strong>location <code>r</code> points to</strong>.</li>
<li>In example above, clone <code>d</code> is created from <code>*r</code>, and <code>S(2)</code> written to <code>*r</code>.
<ul>
<li>Method <code>Clone::clone(&amp;T)</code> expects a reference itself, which is why we can use <code>r</code>, not <code>*r</code>.</li>
<li>On assignment <code>*r = …</code> old value in location also dropped (not shown above).</li>
</ul>
</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <arrows>
            <arrow style="left: 62px; width: 176px;">&nbsp;<tip>▼</tip></arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 57px;">S(2)</value>
            <value class="ptr byte4" style="left: 171px;">0x3</value>
            <value class="atomic byte4" style="top:-36px; left: 20px;">M { x }</value>
            <denied style="left: -71px; top:-36px;">⛔</denied>
            <denied style="left: -131px;">⛔</denied>
        </values>
        <labels>
            <label class="byte2" style="left: 57px;"><code>a</code></label>
            <label class="byte4" style="left: 171px;"><code>r</code></label>
            <label class="byte4" style="left: 193px;"><code>d</code></label>
        </labels>
        <subtext>References Guard Referents</subtext>
        <!-- <subtext><code>let d = *r; *r = M::new();</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let mut a = …;
let r = &amp;mut a;
let d = *r;       &#x2F;&#x2F; Invalid to move out value, `a` would be empty.
*r = M::new();    &#x2F;&#x2F; invalid to store non S value, doesn&#x27;t make sense.
</code></pre>
<ul>
<li>While bindings guarantee to always <em>hold</em> valid data, references guarantee to always <em>point to</em> valid data.</li>
<li>Esp. <code>&amp;mut T</code> must provide same guarantees as variables, and some more as they can't dissolve the target:
<ul>
<li>They do <strong>not allow writing invalid</strong> data.</li>
<li>They do <strong>not allow moving out</strong> data (would leave target empty w/o owner knowing).</li>
</ul>
</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <arrows>
            <arrow style="left: 62px; width: 176px; border-color: red;">&nbsp;<tip style="color: red">▼</tip></arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 57px;">C(2)</value>
            <value class="ptr byte4 unsafe" style="left: 171px;">0x3</value>
        </values>
        <labels>
            <label class="byte2 hide" style="left: 57px;"><code>c</code></label>
            <label class="byte4" style="left: 171px;"><code>p</code></label>
        </labels>
        <subtext>Raw Pointers</subtext>
        <!-- <subtext><code>let p: *const S = ...;</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let p: *const S = questionable_origin();
</code></pre>
<ul>
<li>In contrast to references, pointers come with almost no guarantees.</li>
<li>They may point to invalid or non-existent data.</li>
<li>Dereferencing them is <code>unsafe</code>, and treating an invalid <code>*p</code> as if it were valid is undefined behavior. <a href="#unsafe-unsound-undefined" title="On this site, below."><sup>↓</sup></a></li>
</ul>
</explanation>
</lifetime-section>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-lt-10" name="tab-lt">
<label for="tab-lt-10"><b>Lifetime Basics</b></label>
<panel><div>
<lifetime-section>
<lifetime-example>
    <memory-row>
        <memory-backdrop class="past" style="padding-left: 7px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop class="past" style="padding-left: 3px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 57px;">C(2)</value>
            <value class="ptr byte4 hide" style="left: 171px;">0x3</value>
        </values>
        <labels>
            <!-- <label class="byte2" style="left: 37px;"><code>'a</code></label>
            <label class="byte4" style="left: 59px;"><code>'b: 'c</code></label>
            <label class="byte2" style="left: 81px;"><code>'c</code></label>
            <label class="byte4" style="left: 139px;"><code>'d</code></label> -->
        </labels>
        <subtext>"Lifetime" of Things</subtext>
        <!-- <subtext><code>f(); g(); h();</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<ul>
<li>Every entity in a program has some (temporal / spatial) extent where it is relevant, i.e., <em>alive</em>.</li>
<li>Loosely speaking, this <em>alive time</em> can be<sup>1</sup>
<ol>
<li>the <strong>LOC</strong> (lines of code) where an <strong>item is available</strong> (e.g., a module name).</li>
<li>the <strong>LOC</strong> between when a <em>location</em> is <strong>initialized</strong> with a value, and when the location is <strong>abandoned</strong>.</li>
<li>the <strong>LOC</strong> between when a location is first <strong>used in a certain way</strong>, and when that <strong>usage stops</strong>.</li>
<li>the <strong>LOC (or actual time)</strong> between when a <em>value</em> is created, and when that value is dropped.</li>
</ol>
</li>
<li>Within the rest of this section, we will refer to the items above as the:
<ol>
<li><strong>scope</strong> of that item, irrelevant here.</li>
<li><strong>scope</strong> of that variable or location.</li>
<li><strong>lifetime</strong><sup>2</sup> of that usage.</li>
<li><strong>lifetime</strong> of that value, might be useful when discussing open file descriptors, but also irrelevant here.</li>
</ol>
</li>
<li>Likewise, lifetime parameters in code, e.g., <code>r: &amp;'a S</code>, are
<ul>
<li>concerned with LOC any <strong>location r <em>points to</em></strong> needs to be accessible or locked;</li>
<li>unrelated to the 'existence time' (as LOC) of <code>r</code> itself (well, it needs to exist shorter, that's it).</li>
</ul>
</li>
<li><code>&amp;'static S</code> means address must be <em>valid during all lines of code</em>.</li>
</ul>
<blockquote>
<p><sup>1</sup> There is sometimes ambiguity in the docs differentiating the various <em>scopes</em> and <em>lifetimes</em>.
We try to be pragmatic here, but suggestions are welcome.</p>
<p><sup>2</sup> <em>Live lines</em> might have been a more appropriate term …</p>
</blockquote>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <memory-backdrop class="past" style="padding-left: 7px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop class="past" style="padding-left: 3px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <arrows>
            <arrow style="left: 192px; width: 120px;">&nbsp;<tip>▼</tip></arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 38px;">S(0)</value>
            <value class="t byte2 hide" style="left: 79px;">S(1)</value>
            <value class="t byte2" style="left: 119px;">S(2)</value>
            <value class="ptr byte4" style="left: 177px;">0xa</value>
        </values>
        <labels>
            <label class="byte2 hide" style="left: 37px;"><code>a</code></label>
            <label class="byte2 hide" style="left: 78px;"><code>b</code></label>
            <label class="byte2" style="left: 118px;"><code>c</code></label>
            <label class="byte4" style="left: 177px;"><code>r</code></label>
        </labels>
        <subtext>Meaning of <code>r: &'c S</code></subtext>
        <!-- <subtext><code>r: &mut 'c S</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<ul>
<li>Assume you got a <code>r: &amp;'c S</code> from somewhere it means:
<ul>
<li><code>r</code> holds an address of some <code>S</code>,</li>
<li>any address <code>r</code> points to must and will exist for at least <code>'c</code>,</li>
<li>the variable <code>r</code> itself cannot live longer than <code>'c</code>.</li>
</ul>
</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <memory-backdrop class="past" style="padding-left: 7px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop class="past" style="padding-left: 3px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <arrows>
            <arrow style="left: 118px; width: 193px;">&nbsp;<tip>▼</tip></arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 38px;">S(0)</value>
            <value class="t byte2" style="left: 79px;">S(3)</value>
            <value class="t byte2" style="left: 119px;">S(2)</value>
            <value class="ptr byte4" style="left: 177px;">0x6</value>
            <denied style="left: -125px; top:-25px;">⛔</denied>
        </values>
        <labels>
            <label class="byte2" style="left: 37px;"><code>a</code></label>
            <label class="byte2" style="left: 78px;"><code>b</code></label>
            <label class="byte2" style="left: 118px;"><code>c</code></label>
            <label class="byte4" style="left: 177px;"><code>r</code></label>
        </labels>
        <subtext>Typelikeness of Lifetimes</subtext>
        <!-- <subtext><code>r = &mut b;</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>{
    let b = S(3);
    {
        let c = S(2);
        let r: &amp;&#x27;c S = &amp;c;      &#x2F;&#x2F; Does not quite work since we can&#x27;t name lifetimes of local
        {                       &#x2F;&#x2F; variables in a function body, but very same principle applies
            let a = S(0);       &#x2F;&#x2F; to functions next page.

            r = &amp;a;             &#x2F;&#x2F; Location of `a` does not live sufficient many lines -&gt; not ok.
            r = &amp;b;             &#x2F;&#x2F; Location of `b` lives all lines of `c` and more -&gt; ok.
        }
    }
}
</code></pre>
<ul>
<li>Assume you got a <code>mut r: &amp;mut 'c S</code> from somewhere.
<ul>
<li>That is, a mutable location that can hold a mutable reference.</li>
</ul>
</li>
<li>As mentioned, that reference must guard the targeted memory.</li>
<li>However, the <strong><code>'c</code> part</strong>, like a type, also <strong>guards what is allowed into <code>r</code></strong>.</li>
<li>Here assiging <code>&amp;b</code> (<code>0x6</code>) to <code>r</code> is valid, but <code>&amp;a</code> (<code>0x3</code>) would not, as only <code>&amp;b</code> lives equal or longer than <code>&amp;c</code>.</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <memory-backdrop class="past" style="padding-left: 7px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop class="past" style="padding-left: 3px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <arrows>
            <arrow style="left: 118px; width: 193px;">&nbsp;<tip>▼</tip></arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t borrowed"></byte>
            <byte class="t borrowed"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 38px;">S(0)</value>
            <value class="t byte2" style="left: 79px;">&nbsp;</value>
            <value class="t byte2 hide" style="left: 119px;">S(2)</value>
            <value class="ptr byte4" style="left: 177px;">0x6</value>
            <failed style="left: -40px;"><value class="t bytes">S(4)</value></failed>
            <denied style="left: -83px;">⛔</denied>
        </values>
        <labels>
            <label class="byte2 hide" style="left: 37px;"><code>a</code></label>
            <label class="byte2" style="left: 78px;"><code>b</code></label>
            <label class="byte2 hide" style="left: 118px;"><code>c</code></label>
            <label class="byte4 hide" style="left: 177px;"><code></code></label>
        </labels>
        <subtext>Borrowed State</subtext>
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let mut b = S(0);
let r = &amp;mut b;

b = S(4);   &#x2F;&#x2F; Will fail since `b` in borrowed state.

print_byte(r);
</code></pre>
<ul>
<li>Once the address of a variable is taken via <code>&amp;b</code> or <code>&amp;mut b</code> the variable is marked as <strong>borrowed</strong>.</li>
<li>While borrowed, the content of the address cannot be modified anymore via original binding <code>b</code>.</li>
<li>Once address taken via <code>&amp;b</code> or <code>&amp;mut b</code> stops being used (in terms of LOC) original binding <code>b</code> works again.</li>
</ul>
</explanation>
</lifetime-section>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-lt-11" name="tab-lt">
<label for="tab-lt-11"><b>Lifetimes in Functions</b></label>
<panel>
<div>
<lifetime-section>
<lifetime-example>
    <memory-row>
        <memory-backdrop class="past" style="padding-left: 7px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop class="past" style="padding-left: 3px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t borrowed"></byte>
            <byte class="t borrowed"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t borrowed"></byte>
            <byte class="t borrowed"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 38px;">S(0)</value>
            <value class="t byte2" style="left: 79px;">S(1)</value>
            <value class="t byte2" style="left: 119px;">S(2)</value>
            <value class="ptr byte4" style="left: 177px;">?</value>
            <value class="ptr byte4" style="left: 201px;">0x6</value>
            <value class="ptr byte4" style="left: 224px;">0xa</value>
        </values>
        <labels>
            <label class="byte2 hide" style="left: 37px;"><code>a</code></label>
            <label class="byte4" style="left: 59px;"><code>b</code></label>
            <label class="byte2" style="left: 81px;"><code>c</code></label>
            <label class="byte4" style="left: 139px;"><code>r</code></label>
            <label class="byte4" style="left: 165px;"><code>x</code></label>
            <label class="byte4" style="left: 188px;"><code>y</code></label>
        </labels>
        <subtext>Function Parameters</subtext>
        <!-- <subtext><code>let r = f(&b, &c);</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>fn f(x: &amp;S, y:&amp;S) -&gt; &amp;u8 { … }

let b = S(1);
let c = S(2);

let r = f(&amp;b, &amp;c);
</code></pre>
<ul>
<li>When calling functions that take and return references two interesting things happen:
<ul>
<li>The used local variables are placed in a borrowed state,</li>
<li>But it is during compilation unknown which address will be returned.</li>
</ul>
</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <memory-backdrop class="past" style="padding-left: 7px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop class="past" style="padding-left: 3px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t maybe-borrowed"></byte>
            <byte class="t maybe-borrowed"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t maybe-borrowed"></byte>
            <byte class="t maybe-borrowed"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2 hide" style="left: 38px;">S(0)</value>
            <value class="t byte2" style="left: 79px;">S(1)</value>
            <value class="t byte2" style="left: 119px;">S(2)</value>
            <value class="ptr byte4" style="left: 177px;">?</value>
            <value class="ptr byte4 hide" style="left: 201px;">0x6</value>
            <value class="ptr byte4 hide" style="left: 224px;">0xa</value>
        </values>
        <labels>
            <label class="byte2" style="left: 37px;"><code>a</code></label>
            <label class="byte4" style="left: 59px;"><code>b</code></label>
            <label class="byte2" style="left: 81px;"><code>c</code></label>
            <label class="byte4" style="left: 139px;"><code>r</code></label>
            <label class="byte4 hide" style="left: 165px;"><code>x</code></label>
            <label class="byte4 hide" style="left: 188px;"><code>y</code></label>
        </labels>
        <subtext>Problem of 'Borrowed' Propagation</subtext>
        <!-- <subtext><code>let a = b;</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let b = S(1);
let c = S(2);

let r = f(&amp;b, &amp;c);

let a = b;   &#x2F;&#x2F; Are we allowed to do this?
let a = c;   &#x2F;&#x2F; Which one is _really_ borrowed?

print_byte(r);
</code></pre>
<ul>
<li>Since <code>f</code> can return only one address, not in all cases <code>b</code> and <code>c</code> need to stay locked.</li>
<li>In many cases we can get quality-of-life improvements.
<ul>
<li>Notably, when we know one parameter <em>couldn't</em> have been used in return value anymore.</li>
</ul>
</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <memory-backdrop class="past" style="padding-left: 7px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop class="past" style="padding-left: 3px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <arrows>
            <arrow style="left: 210px; width: 102px;">&nbsp;<tip>▼</tip></arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t borrowed"></byte>
            <byte class="t borrowed"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 38px;">S(1)</value>
            <value class="t byte2 hide" style="left: 79px;">S(1)</value>
            <value class="t byte2" style="left: 119px;">S(2)</value>
            <value class="ptr byte4" style="left: 177px;">y + _</value>
            <value class="ptr byte4 hide" style="left: 201px;">0x6</value>
            <value class="ptr byte4 hide" style="left: 224px;">0xa</value>
        </values>
        <labels>
            <label class="byte2" style="left: 37px;"><code>a</code></label>
            <label class="byte4" style="left: 59px;"><code>b</code></label>
            <label class="byte2" style="left: 81px;"><code>c</code></label>
            <label class="byte4" style="left: 139px;"><code>r</code></label>
            <label class="byte4 hide" style="left: 165px;"><code>x</code></label>
            <label class="byte4 hide" style="left: 188px;"><code>y</code></label>
        </labels>
        <subtext>Lifetimes Propagate Borrowed State</subtext>
        <!-- <subtext><code>f(x: &'x S, y: &'y S) -> &'y u8</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>fn f&lt;&#x27;b, &#x27;c&gt;(x: &amp;&#x27;b S, y: &amp;&#x27;c S) -&gt; &amp;&#x27;c u8 { … }

let b = S(1);
let c = S(2);

let r = f(&amp;b, &amp;c); &#x2F;&#x2F; We know returned reference is `c`-based, which must stay locked,
                   &#x2F;&#x2F; while `b` is free to move.

let a = b;

print_byte(r);
</code></pre>
<ul>
<li>Lifetime parameters in signatures, like <code>'c</code> above, solve that problem.</li>
<li>Their primary purpose is:
<ul>
<li><strong>outside the function</strong>, to explain based on which input address an output address could be generated,</li>
<li><strong>within the function</strong>, to guarantee only addresses that live at least <code>'c</code> are assigned.</li>
</ul>
</li>
<li>The actual lifetimes <code>'b</code>, <code>'c</code> are transparently picked by the compiler at <strong>call site</strong>, based on the borrowed variables the developer gave.</li>
<li>They are <strong>not</strong> equal to the <em>scope</em> (which would be LOC from initialization to destruction) of <code>b</code> or <code>c</code>, but only a minimal subset of their scope called <em>lifetime</em>, that is, a minmal set of LOC based on how long <code>b</code> and <code>c</code> need to be borrowed to perform this call and use the obtained result.</li>
<li>In some cases, like if <code>f</code> had <code>'c: 'b</code> instead, we still couldn't distinguish and both needed to stay locked.</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <memory-backdrop class="past" style="padding-left: 7px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte class="atomic"></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop class="past" style="padding-left: 3px;">
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 38px;">S(2)</value>
            <value class="t byte2 hide" style="left: 79px;">S(1)</value>
            <value class="t byte2 hide" style="left: 119px;">S(2)</value>
            <value class="ptr byte4 hide" style="left: 177px;">y + 1</value>
            <value class="ptr byte4 hide" style="left: 201px;">0x6</value>
            <value class="ptr byte4 hide" style="left: 224px;">0xa</value>
        </values>
        <labels>
            <label class="byte2" style="left: 37px;"><code>a</code></label>
            <label class="byte4 hide" style="left: 59px;"><code>b</code></label>
            <label class="byte2" style="left: 81px;"><code>c</code></label>
            <label class="byte4 hide" style="left: 139px;"><code>r</code></label>
            <label class="byte4 hide" style="left: 165px;"><code>x</code></label>
            <label class="byte4 hide" style="left: 188px;"><code>y</code></label>
        </labels>
        <!-- <subtext><code>{ let r = ... }</code></subtext> -->
        <subtext>Unlocking</subtext>
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>let mut c = S(2);

let r = f(&amp;c);
let s = r;
                    &#x2F;&#x2F; &lt;- Not here, `s` prolongs locking of `c`.

print_byte(s);

let a = c;          &#x2F;&#x2F; &lt;- But here, no more use of `r` or `s`.


</code></pre>
<ul>
<li>A variable location is <em>unlocked</em> again once the last use of any reference that may point to it ends.</li>
</ul>
</explanation>
</lifetime-section>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-lt-12" name="tab-lt">
<label for="tab-lt-12"><b>Advanced <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></b></label>
<panel>
<div>
<lifetime-section>
<lifetime-example>
    <memory-row>
        <arrows>
            <arrow style="left: 53px; width: 92px;">&nbsp;<tip>▼</tip></arrow>
            <arrow style="left: 57px; width: 104px;">&nbsp;<tip>▼</tip></arrow>
            <arrow style="left: -155px; width: 320px; top: -5px; border-style: dashed;">&nbsp;</arrow>
        </arrows>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte class="ptr"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <value class="t byte2" style="left: 38px;">S(1)</value>
            <value class="ptr byte4" style="left: 80px;">0x2</value>
            <value class="ptr byte4" style="left: 120px;">0x6</value>
            <value class="ptr byte4" style="left: 162px;">0x2</value>
        </values>
        <labels>
            <label class="byte2" style="left: 37px;"><code>a</code></label>
            <label class="byte4" style="left: 79px;"><code>ra</code></label>
            <label class="byte2" style="left: 139px;"><code>rb</code></label>
            <label class="byte2" style="left: 216px;"><code>rval</code></label>
        </labels>
        <subtext>References to References</subtext>
        <!-- <subtext><code>f(x: &'x S, y: &'y S) -> &'y u8</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>&#x2F;&#x2F; Return short (&#x27;b) reference
fn f1sr&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b     &amp;&#x27;a     S) -&gt; &amp;&#x27;b     S { *rb }
fn f2sr&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b     &amp;&#x27;a mut S) -&gt; &amp;&#x27;b     S { *rb }
fn f3sr&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b mut &amp;&#x27;a     S) -&gt; &amp;&#x27;b     S { *rb }
fn f4sr&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b mut &amp;&#x27;a mut S) -&gt; &amp;&#x27;b     S { *rb }

&#x2F;&#x2F; Return short (&#x27;b) mutable reference.
&#x2F;&#x2F; f1sm&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b     &amp;&#x27;a     S) -&gt; &amp;&#x27;b mut S { *rb } &#x2F;&#x2F; M
&#x2F;&#x2F; f2sm&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b     &amp;&#x27;a mut S) -&gt; &amp;&#x27;b mut S { *rb } &#x2F;&#x2F; M
&#x2F;&#x2F; f3sm&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b mut &amp;&#x27;a     S) -&gt; &amp;&#x27;b mut S { *rb } &#x2F;&#x2F; M
fn f4sm&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b mut &amp;&#x27;a mut S) -&gt; &amp;&#x27;b mut S { *rb }

&#x2F;&#x2F; Return long (&#x27;a) reference.
fn f1lr&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b     &amp;&#x27;a     S) -&gt; &amp;&#x27;a     S { *rb }
&#x2F;&#x2F; f2lr&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b     &amp;&#x27;a mut S) -&gt; &amp;&#x27;a     S { *rb } &#x2F;&#x2F; L
fn f3lr&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b mut &amp;&#x27;a     S) -&gt; &amp;&#x27;a     S { *rb }
&#x2F;&#x2F; f4lr&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b mut &amp;&#x27;a mut S) -&gt; &amp;&#x27;a     S { *rb } &#x2F;&#x2F; L

&#x2F;&#x2F; Return long (&#x27;a) mutable reference.
&#x2F;&#x2F; f1lm&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b     &amp;&#x27;a     S) -&gt; &amp;&#x27;a mut S { *rb } &#x2F;&#x2F; M
&#x2F;&#x2F; f2lm&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b     &amp;&#x27;a mut S) -&gt; &amp;&#x27;a mut S { *rb } &#x2F;&#x2F; M
&#x2F;&#x2F; f3lm&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b mut &amp;&#x27;a     S) -&gt; &amp;&#x27;a mut S { *rb } &#x2F;&#x2F; M
&#x2F;&#x2F; f4lm&lt;&#x27;b, &#x27;a&gt;(rb: &amp;&#x27;b mut &amp;&#x27;a mut S) -&gt; &amp;&#x27;a mut S { *rb } &#x2F;&#x2F; L

&#x2F;&#x2F; Now assume we have a `ra` somewhere
let mut ra: &amp;&#x27;a mut S = …;

let rval = f1sr(&amp;&amp;*ra);       &#x2F;&#x2F; OK
let rval = f2sr(&amp;&amp;mut *ra);
let rval = f3sr(&amp;mut &amp;*ra);
let rval = f4sr(&amp;mut ra);

&#x2F;&#x2F;  rval = f1sm(&amp;&amp;*ra);       &#x2F;&#x2F; Would be bad, since rval would be mutable
&#x2F;&#x2F;  rval = f2sm(&amp;&amp;mut *ra);   &#x2F;&#x2F; reference obtained from broken mutability
&#x2F;&#x2F;  rval = f3sm(&amp;mut &amp;*ra);   &#x2F;&#x2F; chain.
let rval = f4sm(&amp;mut ra);

let rval = f1lr(&amp;&amp;*ra);
&#x2F;&#x2F;  rval = f2lr(&amp;&amp;mut *ra);   &#x2F;&#x2F; If this worked we&#x27;d have `rval` and `ra` …
let rval = f3lr(&amp;mut &amp;*ra);
&#x2F;&#x2F;  rval = f4lr(&amp;mut ra);     &#x2F;&#x2F; … now (mut) aliasing `S` in compute below.

&#x2F;&#x2F;  rval = f1lm(&amp;&amp;*ra);       &#x2F;&#x2F; Same as above, fails for mut-chain reasons.
&#x2F;&#x2F;  rval = f2lm(&amp;&amp;mut *ra);   &#x2F;&#x2F;                    &quot;
&#x2F;&#x2F;  rval = f3lm(&amp;mut &amp;*ra);   &#x2F;&#x2F;                    &quot;
&#x2F;&#x2F;  rval = f4lm(&amp;mut ra);     &#x2F;&#x2F; Same as above, fails for aliasing reasons.

&#x2F;&#x2F; Some fictitious place where we use `ra` and `rval`, both alive.
compute(ra, rval);
</code></pre>
<footnotes>
<p>Here (<code>M</code>) means compilation fails because mutability error, (<code>L</code>) lifetime error.
Also, dereference <code>*rb</code> not strictly necessary, just added for clarity.</p>
</footnotes>
<ul>
<li><code>f_sr</code> cases always work, short reference (only living <code>'b</code>) can always be produced.</li>
<li><code>f_sm</code> cases usually fail simply because <em>mutable chain</em> to <code>S</code> needed to return <code>&amp;mut S</code>.</li>
<li><code>f_lr</code> cases can fail because returning <code>&amp;'a S</code> from <code>&amp;'a mut S</code> to caller means there would now exist two references (one mutable) to same <code>S</code> which is illegal.</li>
<li><code>f_lm</code> cases always fail for combination of reasons above.</li>
</ul>
</explanation>
</lifetime-section>
<lifetime-section>
<lifetime-example class="not-first">
    <memory-row>
        <memory-backdrop>
            <byte></byte>
            <byte></byte>
            <byte class="t"></byte>
            <byte class="t"></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
            <byte></byte>
        </memory-backdrop>
        <values>
            <drop><value class="t byte2" style="left: 38px;">S(1)</value><droparrow style="left:17px;">▼</droparrow></drop>
        </values>
        <labels>
            <label class="byte2" style="left: 37px;"><code>_</code></label>
            <!-- <label class="byte2" style="left: 136.5px;"><code>c</code></label> -->
        </labels>
        <subtext>Drop and <code>_</code></subtext>
        <!-- <subtext><code>{ let a = ...; }</code></subtext> -->
    </memory-row>
</lifetime-example>
<explanation>
<pre><code>{
    let f = |x, y| (S(x), S(y)); &#x2F;&#x2F; Function returning two &#x27;Droppables&#x27;.

    let (    x1, y) = f(1, 4);  &#x2F;&#x2F; S(1) - Scope   S(4) - Scope
    let (    x2, _) = f(2, 5);  &#x2F;&#x2F; S(2) - Scope   S(5) - Immediately
    let (ref x3, _) = f(3, 6);  &#x2F;&#x2F; S(3) - Scope   S(6) - Scope

    println!(&quot;…&quot;);
}
</code></pre>
<footnotes>
<p>Here <code>Scope</code> means contained value lives until end of scope, i.e., past the <code>println!()</code>.</p>
</footnotes>
<ul>
<li>Functions or expressions producing movable values must be handled by callee.</li>
<li>Values stores in 'normal' bindings are kept until end of scope, then dropped.</li>
<li>Values stored in <code>_</code> bindings are usually dropped right away.</li>
<li>However, sometimes references (e.g., <code>ref x3</code>) can keep value (e.g., the tuple <code>(S(3), S(6))</code>) around for longer, so <code>S(6)</code>, being part of that tuple can only be dropped once reference to its <code>S(3)</code> sibling disappears).</li>
</ul>
</explanation>
</lifetime-section>
</div></panel></tab>
</tabs>
<footnotes>
<p>↕️ Examples expand by clicking.</p>
</footnotes>
<div>&nbsp;</div>
</magic>
<hr />
<h1 id="memory-layout">Memory Layout<sup id="target-memory-layout" class="target"><a href="#memory-layout">url</a></sup></h1>
<p>Byte representations of common types.</p>
<h2 id="basic-types">Basic Types<sup id="target-basic-types" class="target"><a href="#basic-types">url</a></sup></h2>
<p>Essential types built into the core of the language.</p>
<h4 id="boolean-ref-and-numeric-types-ref">Boolean <a href="https://doc.rust-lang.org/stable/reference/types&#x2F;boolean.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> and Numeric Types <a href="https://doc.rust-lang.org/stable/reference/types&#x2F;numeric.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a><sup id="target-boolean-ref-and-numeric-types-ref" class="target"><a href="#boolean-ref-and-numeric-types-ref">url</a></sup></h4>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>bool</code></name>
    <visual class="bool">
        <byte><code></code></byte>
    </visual>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>u8</code>, <code>i8</code></name>
    <visual class="bytes">
        <byte><code></code></byte>
    </visual>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced" >
    <name><code>u16</code>, <code>i16</code></name>
    <visual class="bytes">
        <byte><code></code></byte>
        <byte><code></code></byte>
    </visual>
</datum>
<!-- NEW ENTRY -->
<datum  class="spaced">
    <name><code>u32</code>, <code>i32</code></name>
    <visual class="bytes">
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
    </visual>
</datum>
<!-- NEW ENTRY -->
<datum  class="spaced">
    <name><code>u64</code>, <code>i64</code></name>
    <visual class="bytes">
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
    </visual>
</datum>
<!-- NEW ENTRY -->
<datum  class="spaced">
    <name><code>u128</code>, <code>i128</code></name>
    <visual class="bytes">
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
    </visual>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>f32</code></name>
    <visual class="float">
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
    </visual>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>f64</code></name>
    <visual class="float">
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
    </visual>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>usize</code>, <code>isize</code></name>
    <visual class="sized">
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte style="border-color: #888;"><code></code></byte>
        <byte style="border-color: #888;"><code></code></byte>
        <byte style="border-color: #aaa;"><code></code></byte>
        <byte style="border-color: #aaa;"><code></code></byte>
        <byte style="border-color: #aaa;"><code></code></byte>
        <byte style="border-color: #aaa;"><code></code></byte>
    </visual>
    <zoom>
        Same as <code>ptr</code> on platform.
    </zoom>
</datum>
<br/>
<div>&nbsp;</div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-numeric-1" name="tab-group-numeric" checked>
<label for="tab-numeric-1"><b>Unsigned Types</b></label>
<panel><div>
<table><thead><tr><th>Type</th><th>Max Value</th></tr></thead><tbody>
<tr><td><code>u8</code></td><td><code>255</code></td></tr>
<tr><td><code>u16</code></td><td><code>65_535</code></td></tr>
<tr><td><code>u32</code></td><td><code>4_294_967_295</code></td></tr>
<tr><td><code>u64</code></td><td><code>18_446_744_073_709_551_615</code></td></tr>
<tr><td><code>u128</code></td><td><code>340_282_366_920_938_463_463_374_607_431_768_211_455</code></td></tr>
<tr><td><code>usize</code></td><td>Depending on platform pointer size, same as <code>u16</code>, <code>u32</code>, or <code>u64</code>.</td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-numeric-3" name="tab-group-numeric">
<label for="tab-numeric-3"><b>Signed Types</b></label>
<panel><div>
<table><thead><tr><th>Type</th><th>Max Value</th></tr></thead><tbody>
<tr><td><code>i8</code></td><td><code>127</code></td></tr>
<tr><td><code>i16</code></td><td><code>32_767</code></td></tr>
<tr><td><code>i32</code></td><td><code>2_147_483_647</code></td></tr>
<tr><td><code>i64</code></td><td><code>9_223_372_036_854_775_807</code></td></tr>
<tr><td><code>i128</code></td><td><code>170_141_183_460_469_231_731_687_303_715_884_105_727</code></td></tr>
<tr><td><code>isize</code></td><td>Depending on platform pointer size, same as <code>i16</code>, <code>i32</code>, or <code>i64</code>.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Type</th><th>Min Value</th></tr></thead><tbody>
<tr><td><code>i8</code></td><td><code>-128</code></td></tr>
<tr><td><code>i16</code></td><td><code>-32_768</code></td></tr>
<tr><td><code>i32</code></td><td><code>-2_147_483_648</code></td></tr>
<tr><td><code>i64</code></td><td><code>-9_223_372_036_854_775_808</code></td></tr>
<tr><td><code>i128</code></td><td><code>-170_141_183_460_469_231_731_687_303_715_884_105_728</code></td></tr>
<tr><td><code>isize</code></td><td>Depending on platform pointer size, same as <code>i16</code>, <code>i32</code>, or <code>i64</code>.</td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-numeric-6" name="tab-group-numeric">
<label for="tab-numeric-6"><b>Float Types</b></label>
<panel><div>
<table><thead><tr><th><code>f32</code></th><th><code>f64</code></th><th>Property</th></tr></thead><tbody>
<tr><td>3.40 ⋅ 10 <sup>38</sup></td><td>1.79 ⋅ 10 <sup>308</sup></td><td>Maximum float value.</td></tr>
<tr><td>3.40 ⋅ 10 <sup>-38</sup></td><td>2.23 ⋅ 10 <sup>-308</sup></td><td>Minimum positive float value.</td></tr>
<tr><td><code>16_777_216</code></td><td><code>9_007_199_254_740_992</code></td><td>Maximum integer value losslessly representable.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<blockquote>
<p>Float values approximated for visual clarity. Negative limits are values multipled with -1.</p>
</blockquote>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-numeric-2" name="tab-group-numeric">
<label for="tab-numeric-2"><b>Float Internals</b><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></label>
<panel><div>
<p>Sample bit representation<sup>*</sup> for a <code>f32</code>:</p>
<!-- NEW ENTRY -->
<datum style="opacity:0.7; margin-bottom:10px;">
    <visual class="float">
    <bitgroup>
        <bit><code>S</code></bit>
    </bitgroup>
    <bitgroup>
        <bit><code>E</code></bit>
        <bit><code>E</code></bit>
        <bit><code>E</code></bit>
        <bit><code>E</code></bit>
        <bit><code>E</code></bit>
        <bit><code>E</code></bit>
        <bit><code>E</code></bit>
        <bit><code>E</code></bit>
    </bitgroup>
    <bitgroup>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
        <bit><code>F</code></bit>
    </bitgroup>
    </visual>
</datum>
<div>&nbsp;</div>
<p>Explanation:</p>
<table><thead><tr><th>f32</th><th>S (1)</th><th>E (8)</th><th>F (23)</th><th>Value</th></tr></thead><tbody>
<tr><td>Normalized number</td><td>±</td><td>1 to 254</td><td>any</td><td>±(1.F)<sub>2</sub> * 2<sup>E-127</sup></td></tr>
<tr><td>Denormalized number</td><td>±</td><td>0</td><td>non-zero</td><td>±(0.F)<sub>2</sub> * 2<sup>-126</sup></td></tr>
<tr><td>Zero</td><td>±</td><td>0</td><td>0</td><td>±0</td></tr>
<tr><td>Infinity</td><td>±</td><td>255</td><td>0</td><td>±∞</td></tr>
<tr><td>NaN</td><td>±</td><td>255</td><td>non-zero</td><td>NaN</td></tr>
</tbody></table>
<div>&nbsp;</div>
<p>Similarly, for <code>f64</code> types this would look like:</p>
<table><thead><tr><th>f64</th><th>S (1)</th><th>E (11)</th><th>F (52)</th><th>Value</th></tr></thead><tbody>
<tr><td>Normalized number</td><td>±</td><td>1 to 2046</td><td>any</td><td>±(1.F)<sub>2</sub> * 2<sup>E-1023</sup></td></tr>
<tr><td>Denormalized number</td><td>±</td><td>0</td><td>non-zero</td><td>±(0.F)<sub>2</sub> * 2<sup>-1022</sup></td></tr>
<tr><td>Zero</td><td>±</td><td>0</td><td>0</td><td>±0</td></tr>
<tr><td>Infinity</td><td>±</td><td>2047</td><td>0</td><td>±∞</td></tr>
<tr><td>NaN</td><td>±</td><td>2047</td><td>non-zero</td><td>NaN</td></tr>
</tbody></table>
<footnotes>
    <sup>*</sup> Float types follow <a href="https://en.wikipedia.org/wiki/IEEE_754-2008_revision">IEEE 754-2008</a> and depend on platform endianness.
</footnotes>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-numeric-4" name="tab-group-numeric">
<label for="tab-numeric-4"><b>Casting Pitfalls</b> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></label>
<panel><div class="">
<table><thead><tr><th>Cast<sup>1</sup></th><th>Gives</th><th>Note</th></tr></thead><tbody>
<tr><td><code>3.9_f32 as u8</code></td><td><code>3</code></td><td>Truncates, consider <code>x.round()</code> first.</td></tr>
<tr><td><code>314_f32 as u8</code></td><td><code>255</code></td><td>Takes closest available number.</td></tr>
<tr><td><code>f32::INFINITY as u8</code></td><td><code>255</code></td><td>Same, treats <code>INFINITY</code> as <em>really</em> large number.</td></tr>
<tr><td><code>f32::NAN as u8</code></td><td><code>0</code></td><td>-</td></tr>
<tr><td><code>_314 as u8</code></td><td><code>58</code></td><td>Truncates excess bits.</td></tr>
<tr><td><code>_257 as i8</code></td><td><code>1</code></td><td>Truncates excess bits.</td></tr>
<tr><td><code>_200 as i8</code></td><td><code>-56</code></td><td>Truncates excess bits, MSB might then also signal negative.</td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-numeric-5" name="tab-group-numeric">
<label for="tab-numeric-5"><b>Arithmetic Pitfalls</b> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></label>
<panel><div class="">
<table><thead><tr><th>Operation<sup>1</sup></th><th>Gives</th><th>Note</th></tr></thead><tbody>
<tr><td><code>200_u8 / 0_u8</code></td><td>Compile error.</td><td>-</td></tr>
<tr><td><code>200_u8 / _0</code> <sup>d, r</sup></td><td>Panic.</td><td>Regular math may panic; here: division by zero.</td></tr>
<tr><td><code>200_u8 + 200_u8</code></td><td>Compile error.</td><td>-</td></tr>
<tr><td><code>200_u8 + _200</code> <sup>d</sup></td><td>Panic.</td><td>Consider <code>checked_</code>, <code>wrapping_</code>, … instead. <a href="https://doc.rust-lang.org/std&#x2F;primitive.isize.html#method.checked_add"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><code>200_u8 + _200</code> <sup>r</sup></td><td><code>144</code></td><td>In release mode this will overflow.</td></tr>
<tr><td><code>-128_i8 * -1</code></td><td>Compile error.</td><td>Would overflow (<code>128_i8</code> doesn't exist).</td></tr>
<tr><td><code>-128_i8 * _1neg</code> <sup>d</sup></td><td>Panic.</td><td>-</td></tr>
<tr><td><code>-128_i8 * _1neg</code> <sup>r</sup></td><td><code>-128</code></td><td>Overflows back to <code>-128</code> in release mode.</td></tr>
<tr><td><code>1_u8 / 2_u8</code></td><td><code>0</code></td><td>Other integer division truncates.</td></tr>
<tr><td><code>0.8_f32 + 0.1_f32</code></td><td><code>0.90000004</code></td><td>-</td></tr>
<tr><td><code>1.0_f32 / 0.0_f32</code></td><td><code>f32::INFINITY</code></td><td>-</td></tr>
<tr><td><code>0.0_f32 / 0.0_f32</code></td><td><code>f32::NAN</code></td><td>-</td></tr>
<tr><td><code>x &lt; f32::NAN</code></td><td><code>false</code></td><td><code>NAN</code> comparisons always return false.</td></tr>
<tr><td><code>x &gt; f32::NAN</code></td><td><code>false</code></td><td><code>NAN</code> comparisons always return false.</td></tr>
<tr><td><code>f32::NAN == f32::NAN</code></td><td><code>false</code></td><td>Use <code>f32::is_nan()</code> <a href="https://doc.rust-lang.org/std&#x2F;primitive.f32.html#method.is_nan"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> instead.</td></tr>
</tbody></table>
</div></panel></tab>
<!-- End tabs -->
</tabs>
<!-- End overflow prevention -->
</div></div>
<footnotes>
<p><sup>1</sup> Expression <code>_100</code> means anything that might contain the value <code>100</code>, e.g., <code>100_i32</code>, but is opaque to compiler.<br/>
<sup>d</sup> Debug build.<br/>
<sup>r</sup> Release build.<br/></p>
</footnotes>
<div>&nbsp;</div>
<h4 id="textual-types-ref">Textual Types <a href="https://doc.rust-lang.org/stable/reference/types&#x2F;textual.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a><sup id="target-textual-types-ref" class="target"><a href="#textual-types-ref">url</a></sup></h4>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>char</code></name>
    <visual class="char">
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
        <byte><code></code></byte>
    </visual>
    <description>Any Unicode scalar.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>str</code></name>
    <visual>
        <note>…</note>
        <byte class="bytes"><code>U</code></byte>
        <byte class="bytes"><code>T</code></byte>
        <byte class="bytes"><code>F</code></byte>
        <byte class="bytes"><code>-</code></byte>
        <byte class="bytes"><code>8</code></byte>
        <note>… unspecified times</note>
    </visual>
    <description>Rarely seen alone, but as <code>&str</code> instead.</description>
</datum>
<div>&nbsp;</div>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-textual-3" name="tab-group-textual" checked>
<label for="tab-textual-3"><b>Basics</b></label>
<panel><div>
<table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>char</code></td><td>Always 4 bytes and only holds a single Unicode <strong>scalar value</strong> <a href="https:&#x2F;&#x2F;www.unicode.org&#x2F;glossary&#x2F;#unicode_scalar_value" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a>.</td></tr>
<tr><td><code>str</code></td><td>An <code>u8</code>-array of unknown length guaranteed to hold <strong>UTF-8 encoded code points</strong>.</td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-textual-1" name="tab-group-textual">
<label for="tab-textual-1"><b>Usage</b></label>
<panel><div>
<!-- Notice how:

- `char` is always 4 bytes and only holds a single Unicode **scalar value** <a href="https:&#x2F;&#x2F;www.unicode.org&#x2F;glossary&#x2F;#unicode_scalar_value" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a>, thus possibly wasting space.
- `str` is a byte-array of unknown length guaranteed to hold **UTF-8 encoded code points** (but harder to index).
 -->
<table><thead><tr><th>Chars</th><th>Description</th></tr></thead><tbody>
<tr><td><code>let c = 'a';</code></td><td>Often a <code>char</code> (unicode scalar) can coincide with your intuition of <em>character</em>.</td></tr>
<tr><td><code>let c = '❤';</code></td><td>It can also hold many Unicode symbols.</td></tr>
<tr><td><code>let c = '❤️';</code></td><td>But not always. Given emoji is <strong>two</strong> <code>char</code> (see Encoding) and <strong>can't</strong> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> be held by <code>c</code>.<sup>1</sup></td></tr>
<tr><td><code>c = 0xffff_ffff;</code></td><td>Also, chars are <strong>not allowed</strong> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> to hold arbitrary bit patterns.</td></tr>
</tbody></table>
<footnotes>
    <sup>1</sup> Fun fact, due to the <a href="https://en.wikipedia.org/wiki/Zero-width_joiner">Zero-width joiner</a> (⨝) what the user <i>perceives as a character</i> can get even more unpredictable: 👨‍👩‍👧 is in fact 5 chars 👨⨝👩⨝👧, and rendering engines are free to either show them fused as one, or separately as three, depending on their abilities.
</footnotes>
<div>&nbsp;</div>
<table><thead><tr><th>Strings</th><th>Description</th></tr></thead><tbody>
<tr><td><code>let s = &quot;a&quot;;</code></td><td>A <code>str</code> is usually never held directly, but as <code>&amp;str</code>, like <code>s</code> here.</td></tr>
<tr><td><code>let s = &quot;❤❤️&quot;;</code></td><td>It can hold arbitrary text, has variable length per <em>c.</em>, and is hard to index.</td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-textual-2" name="tab-group-textual">
<label for="tab-textual-2"><b>Encoding</b><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></label>
<panel><div>
<p><code>let s = &quot;I ❤ Rust&quot;; </code> <br>
<code>let t = &quot;I ❤️ Rust&quot;;</code></p>
<table><thead><tr><th>Variant</th><th>Memory Representation<sup>2<sup></th></tr></thead><tbody>
<tr><td><code>s.as_bytes()</code></td><td><code>49</code> <code>20</code> <span class="force-code-color same-black"><b><code>e2 9d a4</code></b> </span> <code>20 52 75 73 74</code> <sup>3<sup></td></tr>
<tr><td><code>s.chars()</code><sup>1<sup></td><td><code>49 00 00 00 20 00 00 00</code> <span class="force-code-color same-black"><b><code>64 27 00 00</code> </b></span> <code>20 00 00 00 52 00 00 00 75 00 00 00 73 00</code> …</td></tr>
<tr><td><code>t.as_bytes()</code></td><td><code>49</code> <code>20</code> <span class="force-code-color same-black"><b><code>e2 9d a4</code></b> </span> <span class="force-code-color same-red"><b><code>ef b8 8f</code></b></span> <code>20 52 75 73 74</code> <sup>4<sup></td></tr>
<tr><td><code>t.chars()</code><sup>1<sup></td><td><code>49 00 00 00 20 00 00 00</code> <span class="force-code-color same-black"><b><code>64 27 00 00</code></b></span> <span class="force-code-color same-red"><b><code>0f fe 01 00</code></b></span> <code>20 00 00 00 52 00 00 00 75 00</code> …</td></tr>
</tbody></table>
<div>&nbsp;</div>
<footnotes>
    <sup>1</sup> Result then collected into array and transmuted to bytes.<br>
    <sup>2</sup> Values given in hex, on x86.<br>
    <sup>3</sup> Notice how <code>❤</code>, having <a href="https://codepoints.net/U+2764">Unicode Code Point (U+2764)</a>, is represented as <span class="force-code-color same-black"><b>64 27 00 00</b></span> inside the <code>char</code>, but got <a href="https://en.wikipedia.org/wiki/UTF-8#Description">UTF-8 encoded to</a> <span class="force-code-color same-black"><b>e2 9d a4</b></span> in the <code>str</code>.<br>
    <sup>4</sup> Also observe how the emoji <a href="https://emojipedia.org/red-heart/">Red Heart <code>❤️</code></a>, is a combination of <code>❤</code> and the <a href="https://codepoints.net/U+FE0F">U+FE0F Variation Selector</a>, thus <code>t</code> has a higher char count than <code>s</code>.
</footnotes>
<div>&nbsp;</div>
<footnotes>
<blockquote>
<p><sup>💬</sup> For what seem to be browser bugs Safari and Edge render the hearts in Footnote 3 and 4 wrong, despite being able to differentiate them correctly in <code>s</code> and <code>t</code> above.</p>
</blockquote>
</footnotes>
</div></panel></tab>
<!-- End tabs -->
</tabs>
<div>&nbsp;</div>
<h2 id="custom-types">Custom Types<sup id="target-custom-types" class="target"><a href="#custom-types">url</a></sup></h2>
<p>Basic types definable by users. Actual <b>layout</b> <a href="https://doc.rust-lang.org/stable/reference/type-layout.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> is subject to <b>representation</b>; <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#representations" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> padding can be present.</p>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name class="nogrow"><code>T</code></name>
    <name class="hidden">x</name>
    <visual>
       <framed class="any t"><code>T</code></framed>
    </visual>
    <description>Sized <a href="#sized-types" title="On this site, below."><sup>↓</sup></a> </description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>T: ?Sized</code></name>
    <visual>
       <framed class="any unsized"><code>T</code></framed>
    </visual>
    <description>Maybe DST <a href="#sized-types" title="On this site, below."><sup>↓</sup></a> </description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>[T; n]</code></name>
    <visual>
       <framed class="any t"><code>T</code></framed>
       <framed class="any t"><code>T</code></framed>
       <framed class="any t"><code>T</code></framed>
       <note>… n times</note>
    </visual>
    <description>Fixed array of <code>n</code> elements.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>[T]</code></name>
    <visual>
       <note>…</note>
       <framed class="any t"><code>T</code></framed>
       <framed class="any t"><code>T</code></framed>
       <framed class="any t"><code>T</code></framed>
       <note>… unspecified times</note>
    </visual>
    <description><b>Slice type</b> of unknown-many elements. Neither <br> <code>Sized</code> (nor carries <code>len</code> information), and most<br> often lives behind reference as <code>&[T]</code>. <a href="#references-pointers-ui" title="On this site, below."><sup>↓</sup></a></description>
</datum>
<!-- NEW ENTRY -->
<datum style="margin-right:70px; position: relative; width: 70px;">
    <name class="nogrow"><code>struct S;</code></name>
    <name class="hidden"><code>;</code></name>
    <visual style="width: 15px;" class="zst">
        <code></code>
    </visual>
    <description>Zero-Sized <a href="#sized-types" title="On this site, below."><sup>↓</sup></a> </description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>(A, B, C)</code></name>
    <visual style="width: 182px;">
       <framed class="any"><code>A</code></framed>
       <framed class="any" style="width: 100px;"><code>B</code></framed>
       <framed class="any" style="width: 50px;"><code>C</code></framed>
    </visual>
    <andor>or maybe</andor>
    <visual style="width: 182px;">
       <framed class="any" style="width: 100px;"><code>B</code></framed>
       <framed class="any"><code>A</code></framed>
       <framed class="any" style="width: 50px;"><code>C</code></framed>
    </visual>
    <description>Unless a representation is forced <br>(e.g., via <code>#[repr(C)]</code>), type layout<br> unspecified.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>struct S { b: B, c: C } </code></name>
    <visual style="width: 166px;">
       <framed class="any" style="width: 100px;"><code>B</code></framed>
       <framed class="any" style="width: 50px;"><code>C</code></framed>
    </visual>
    <andor>or maybe</andor>
    <visual>
       <framed class="any" style="width: 50px;"><code>C</code></framed>
       <pad><code style="">↦</code></pad>
       <framed class="any" style="width: 100px;"><code>B</code></framed>
    </visual>
    <description>Compiler may also add padding.</description>
</datum>
<blockquote>
<footnotes>
<p>Also note, two types <code>A(X, Y)</code> and <code>B(X, Y)</code> with exactly the same fields can still have differing layout; never <code>transmute()</code> <a href="https://doc.rust-lang.org/std&#x2F;mem&#x2F;fn.transmute.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> without representation guarantees.</p>
</footnotes>
</blockquote>
<div>&nbsp;</div>
<p>These <strong>sum types</strong> hold a value of one of their sub types:</p>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>enum E { A, B, C }</code></name>
    <visual class="enum" style="text-align: left;">
        <pad><code>Tag</code></pad>
        <framed class="any">
            <code>A</code>
        </framed>
    </visual>
    <andor>exclusive or</andor>
    <visual class="enum" style="text-align: left;">
        <pad><code>Tag</code></pad>
        <framed class="any" style="width: 100px;">
            <code>B</code>
        </framed>
    </visual>
    <andor>exclusive or</andor>
    <visual class="enum" style="text-align: left;">
        <pad><code>Tag</code></pad>
        <framed class="any" style="width: 50px;">
            <code>C</code>
        </framed>
    </visual>
    <description>
        Safely holds A or B or C, also <br> called 'tagged union', though <br> compiler may squeeze tag<br>into 'unused' bits.
    </description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>union { … }</code></name>
    <visual style="text-align: left;">
        <framed class="any">
            <code>A</code>
        </framed>
    </visual>
    <andor>unsafe or</andor>
    <visual style="text-align: left;">
        <framed class="any" style="width: 100px;">
            <code>B</code>
        </framed>
    </visual>
    <andor>unsafe or</andor>
    <visual style="text-align: left;">
        <framed class="any" style="width: 50px;">
            <code>C</code>
        </framed>
    </visual>
    <description>
        Can unsafely reinterpret <br>memory. Result might <br> be undefined.
    </description>
</datum>
<h2 id="references-pointers-ui">References &amp; Pointers<sup id="target-references-pointers-ui" class="target"><a href="#references-pointers-ui">url</a></sup></h2>
<p>References give safe access to 3<sup>rd</sup> party memory, raw pointers <code>unsafe</code> access.
The corresponding <code>mut</code> types have an identical data layout to their immutable counterparts.</p>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>&'a T</code></name>
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <payload>
            <code>meta</code><sub>2/4/8</sub>
        </payload>
    </visual>
    <memory-entry>
        <memory-link style="left:46%;">|</memory-link>
        <memory class="anymem">
            <framed class="any unsized"><code>T</code></framed>
        </memory>
    </memory-entry>
    <description>Must target some valid <code>t</code> of <code>T</code>, <br> and any such target must exist for <br> at least <code>'a</code>.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>*const T</code></name>
    <visual class="unsafe">
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <payload>
            <code>meta</code><sub>2/4/8</sub>
        </payload>
    </visual>
    <zoom>
        No guarantees.
    </zoom>
</datum>
<br/>
<h3 id="pointer-meta">Pointer Meta<sup id="target-pointer-meta" class="target"><a href="#pointer-meta">url</a></sup></h3>
<p>Many reference and pointer types can carry an extra field, <strong>pointer metadata</strong>. <a href="https://doc.rust-lang.org/nightly&#x2F;std&#x2F;ptr&#x2F;trait.Pointee.html#pointer-metadata"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a>
It can be the element- or byte-length of the target, or a pointer to a <i>vtable</i>. Pointers with meta are called <strong>fat</strong>, otherwise <strong>thin</strong>.</p>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>&'a T</code></name>
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
    </visual>
    <memory-entry>
        <memory-link style="left:46%;">|</memory-link>
        <memory class="anymem">
            <framed class="any t"><code>T</code></framed>
        </memory>
    </memory-entry>
    <description>No meta for <br>sized target.<br>(pointer is thin).</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>&'a T</code></name>
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry>
        <memory-link style="left:46%;">|</memory-link>
        <memory class="anymem">
            <framed class="any unsized"><code>T</code></framed>
        </memory>
    </memory-entry>
    <description>If <code>T</code> is a DST <code>struct</code> such as<br> <code>S { x: [u8] }</code>
    meta field <code>len</code> is <br>count of dyn. sized content.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>&'a [T]</code></name>
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry class="double">
        <memory-link style="left:24%;">|</memory-link>
        <memory class="anymem">
            …
            <framed class="any" style="width: 30px;"><code>T</code></framed>
            <framed class="any" style="width: 30px;"><code>T</code></framed>
            …
        </memory>
    </memory-entry>
    <description>Regular <b>slice reference</b> (i.e., the <br>reference type of a slice type <code>[T]</code>) <a href="#custom-types" title="On this site, above."><sup>↑</sup></a> <br>often seen as <code>&[T]</code> if <code>'a</code> elided.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>&'a str</code></name>
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry class="double">
        <memory-link style="left:24%;">|</memory-link>
        <memory class="anymem">
            …
            <byte class="bytes"><code>U</code></byte>
            <byte class="bytes"><code>T</code></byte>
            <byte class="bytes"><code>F</code></byte>
            <byte class="bytes"><code>-</code></byte>
            <byte class="bytes"><code>8</code></byte>
            …
        </memory>
    </memory-entry>
    <description><b>String slice reference</b> (i.e., the <br>reference type of string type <code>str</code>),<br> with meta <code>len</code> being byte length.</description>
</datum>
<br>
<!-- NEW ENTRY -->
<datum class="spaced" style="padding-bottom: 165px; position: relative;">
    <name><code>&'a dyn Trait</code></name>
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <ptr>
            <code>ptr</code><sub>2/4/8</sub>
        </ptr>
    </visual>
    <memory-entry>
        <memory-link style="left:49%;">|</memory-link>
        <memory class="anymem">
            <framed class="any unsized"><code>T</code></framed>
        </memory>
    </memory-entry>
    <memory-entry style="width:220px; position: absolute;">
        <memory-link style="left:22%;">|</memory-link>
        <memory class="static-vtable" style="width: 210px;">
            <table>
                <tr class="vtable"><td><code>*Drop::drop(&mut T)</code></td></tr>
                <tr class="vtable"><td><code>size</code></td></tr>
                <tr class="vtable"><td><code>align</code></td></tr>
                <tr class="vtable"><td><code>*Trait::f(&T, …)</code></td></tr>
                <tr class="vtable"><td><code>*Trait::g(&T, …)</code></td></tr>
            </table>
        </memory>
        <description>Meta points to vtable, where <code>*Drop::drop()</code>, <code>*Trait::f()</code>, … are pointers to their respective <code>impl</code> for <code>T</code>.</description>
    </memory-entry>
</datum>
<h2 id="closures-data">Closures<sup id="target-closures-data" class="target"><a href="#closures-data">url</a></sup></h2>
<p>Ad-hoc functions with an automatically managed data block <strong>capturing</strong> <a href="https://doc.rust-lang.org/stable/reference/types&#x2F;closure.html#capture-modes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a><sup>, 1</sup>
environment where closure was defined. For example, if you had:</p>
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">let y = ...;
let z = ...;

with_closure(move |x| x + y.f() + z); &#x2F;&#x2F; y and z are moved into closure instance (of type C1)
with_closure(     |x| x + y.f() + z); &#x2F;&#x2F; y and z are pointed at from closure instance (of type C2)
</code></pre>
<p>Then the generated, anonymous closures types <code>C1</code> and <code>C2</code> passed to <code>with_closure()</code> would look like:</p>
<!-- NEW ENTRY -->
<datum class="doublespaced">
    <name><code>move |x| x + y.f() + z</code></name>
    <visual>
       <framed class="any" style="width: 100px;"><code>Y</code></framed>
       <framed class="any" style="width: 50px;"><code>Z</code></framed>
    </visual>
    <zoom>Anonymous closure type C1</zoom>
    <!-- <description>Also produces anonymous <br><code>f<sub>c1</sub> (c: C1, x: T)</code>. Details depend<br> which <code>FnOnce</code>, <code>FnMut</code>, <code>Fn</code> is allowed.</description> -->
</datum>
<!-- NEW ENTRY -->
<datum class="">
    <name><code>|x| x + y.f() + z</code></name>
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
    </visual>
    <zoom>Anonymous closure type C2</zoom>
    <memory-entry>
        <memory-link style="left:44%;">|</memory-link>
        <memory class="anymem">
            <framed class="any" style="width: 30px;"><code>Y</code></framed>
        </memory>
    </memory-entry>
    <memory-entry>
        <memory-link style="left:44%;">|</memory-link>
        <memory class="anymem">
            <framed class="any" style="width: 30px;"><code>Z</code></framed>
        </memory>
    </memory-entry>
    <!-- <description>Similar, but captured context by<br> reference. Details might differ <br> depending on types involved.</description> -->
</datum>
<!-- Little hack as description below was too cluttered. -->
<!-- <datum>
    <name>&nbsp;</name>
    <description>
    Also produces anonymous <code>fn</code> such as <code>f_c1 (C1, X)</code> or <br>
    <code>f_c2 (&C2, X)</code>. Details depend which <code>FnOnce</code>, <code>FnMut</code>, <code>Fn</code> ...<br>
    is supported, based on properties of captured types.
    </description>
</datum> -->
<blockquote>
<footnotes>
<p>Also produces anonymous <code>fn</code> such as <code>f<sub>c1</sub>(C1, X)</code> or <code>f<sub>c2</sub>(&amp;C2, X)</code>. Details depend on which <code>FnOnce</code>, <code>FnMut</code>, <code>Fn</code> ... is supported, based on properties of captured types.</p>
</footnotes>
</blockquote>
<footnotes>
<p><sup>1</sup> A bit oversimplified a closure is a convenient-to-write 'mini function' that accepts parameters <em>but also</em> needs some local variables to do its job. It is therefore a type (containing the needed locals) and a function. <em>'Capturing the environment'</em> is a fancy way of saying that and how the closure type holds on to these locals, either <em>by moved value</em>, or <em>by pointer</em>. See <strong>Closures in APIs</strong> <a href="#closures-in-apis" title="On this site, below."><sup>↓</sup></a> for various implications.</p>
</footnotes>
<h2 id="standard-library-types">Standard Library Types<sup id="target-standard-library-types" class="target"><a href="#standard-library-types">url</a></sup></h2>
<p>Rust's standard library combines the above primitive types into useful types with special semantics, e.g.:</p>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>UnsafeCell&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;cell&#x2F;struct.UnsafeCell.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual class="cell">
           <framed class="any unsized"><code>T</code></framed>
    </visual>
    <description>Magic type allowing <br>aliased mutability.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>Cell&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;cell&#x2F;struct.Cell.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual>
           <framed class="any unsized celled"><code>T</code></framed>
    </visual>
    <description>Allows <code>T</code>'s<br> to move in<br> and out.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>RefCell&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;cell&#x2F;struct.RefCell.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual>
        <sized class="celled"><code>borrowed</code></sized>
        <framed class="any unsized celled"><code>T</code></framed>
    </visual>
    <description>Also support dynamic<br>
    borrowing of <code>T</code>. Like <code>Cell</code> this<br>
    is <code>Send</code>, but not <code>Sync</code>.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>ManuallyDrop&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;mem&#x2F;struct.ManuallyDrop.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual>
           <framed class="any unsized"  style="width: 100px;"><code>T</code></framed>
    </visual>
    <description>Prevents <code>T::drop()</code> from<br>being called.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>AtomicUsize</code> <a href="https://doc.rust-lang.org/std&#x2F;sync&#x2F;atomic&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual class="atomic">
        <ptr class="atomic">
            <code>usize</code><sub>2/4/8</sub>
        </ptr>
    </visual>
    <description>Other atomic similarly.</description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>Option&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;option&#x2F;enum.Option.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual class="enum" style="text-align: left;">
        <pad><code>Tag</code></pad>
    </visual>
    <andor>or</andor>
    <visual class="enum">
        <pad><code>Tag</code></pad>
        <framed class="any" style="width: 100px;">
            <code>T</code>
        </framed>
    </visual>
    <description>Tag may be omitted for <br> certain T, e.g., <code>NonNull</code>.<a href="https://doc.rust-lang.org/std&#x2F;ptr&#x2F;struct.NonNull.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></description>
</datum>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>Result&lt;T, E&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;result&#x2F;enum.Result.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual class="enum" style="text-align: left;">
        <pad><code>Tag</code></pad>
        <framed class="any" style="width: 50px;">
            <code>E</code>
        </framed>
    </visual>
    <andor>or</andor>
    <visual class="enum" style="text-align: left;">
        <pad><code>Tag</code></pad>
        <framed class="any" style="width: 100px;">
            <code>T</code>
        </framed>
    </visual>
    <description>Either some error <code>E</code> or value<br>of <code>T</code>.</description>
</datum>
<!-- NEW ENTRY -->
<datum>
    <name><code>MaybeUninit&lt;T&gt;</code><span style="position: absolute;"> <a href="https://doc.rust-lang.org/std&#x2F;mem&#x2F;union.MaybeUninit.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></span></name>
    <visual class="enum">
        <framed class="uninit" style="width: 100px;">
            <code>U̼̟̔͛n̥͕͐͞d̛̲͔̦̳̑̓̐e̱͎͒̌fị̱͕̈̉͋ne̻̅ḓ̓</code>
        </framed>
    </visual>
    <andor>unsafe or</andor>
    <visual class="enum">
        <framed class="any" style="width: 100px;">
            <code>T</code>
        </framed>
    </visual>
    <description>Uninitialized memory or<br>some <code>T</code>. Only legal way<br>to work with uninit data.</description>
</datum>
<blockquote>
<a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> All depictions are for **illustrative** purposes only.
<p>The fields should exist in latest <code>stable</code>, but Rust makes no guarantees about their layouts, and you must not
attempt to <em>unsafely</em> access anything unless the docs allow it.</p>
</blockquote>
<div>&nbsp;</div>
<h4 id="order-preserving-collections">Order-Preserving Collections<sup id="target-order-preserving-collections" class="target"><a href="#order-preserving-collections">url</a></sup></h4>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>Box&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;boxed&#x2F;struct.Box.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <payload>
            <code>meta</code><sub>2/4/8</sub>
        </payload>
    </visual>
    <memory-entry>
        <memory-link style="left:49%;">|</memory-link>
        <memory class="heap">
        <framed class="any unsized"><code>T</code></framed>
        </memory>
    </memory-entry>
    <description>For some <code>T</code> stack proxy may carry <br>meta<a href="#custom-types" title="On this site, above."><sup>↑</sup></a> (e.g., <code>Box<[T]></code>).</description>
</datum>
<spacer>
</spacer>
<!-- NEW ENTRY -->
<datum>
    <name><code>Vec&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;vec&#x2F;struct.Vec.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
        <sized>
            <code>capacity</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry class="double">
        <memory-link style="left:25%;">|</memory-link>
        <memory class="heap capacity">
            <div>
                <framed class="any t"><code>T</code></framed>
                <framed class="any t"><code>T</code></framed>
                <note>… len</note>
            </div>
            <capacity>← <note>capacity</note> →</capacity>
        </memory>
    </memory-entry>
    <description>Regular <i>growable array</i> vector of single type.</description>
</datum>
<spacer>
</spacer>
<!-- NEW ENTRY -->
<datum>
    <name><code>LinkedList&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;collections&#x2F;struct.LinkedList.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a><pre data-shortcode><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></pre> </name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual>
        <ptr>
           <code>head</code><sub>2/4/8</sub>
        </ptr>
        <ptr>
           <code>tail</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry style="width: 265px; left:0%; display: block;">
        <memory-link style="left:25%;">|</memory-link>
        <memory-link style="left:50%;">|</memory-link>
        <memory class="heap capacity">
            <ptr>
            <code>next</code><sub>2/4/8</sub>
            </ptr>
            <ptr>
            <code>prev</code><sub>2/4/8</sub>
            </ptr>
            <framed class="any t"><code>T</code></framed>
        </memory>
    </memory-entry>
    <description>Elements <code>head</code> and <code>tail</code> both <code>null</code> or point to nodes on<br> the heap. Each node can point to its <code>prev</code> and <code>next</code> node.<br>Eats your cache (just look at the thing!); don't use unless<br> you evidently must. <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> </description>
</datum>
<spacer>
</spacer>
<!-- NEW ENTRY -->
<datum>
    <name><code>VecDeque&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;collections&#x2F;struct.VecDeque.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual>
        <sized>
            <code>head</code><sub>2/4/8</sub>
        </sized>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>capacity</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry></memory-entry>
    <memory-entry></memory-entry>
    <memory-entry class="double">
        <memory-link style="left:25%;">|</memory-link>
        <memory class="heap capacity">
            <div>
                <!-- <framed class="any t"><code>T<sub>x</sub></code></framed> -->
                <framed class="any t"><code>T</code></framed>
                <!-- <framed class="any t"><code>T</code></framed> -->
                <note>… empty …</note>
                <framed class="any t"><code>T&#x2063;<sup>H</sup></code></framed>
            </div>
            <capacity>← <note>capacity</note> →</capacity>
        </memory>
    </memory-entry>
    <description>Index <code>head</code> selects in array-as-ringbuffer. This means content may be<br> non-contiguous and empty in the middle, as exemplified above.</description>
</datum>
<div>&nbsp;</div>
<h4 id="other-collections">Other Collections<sup id="target-other-collections" class="target"><a href="#other-collections">url</a></sup></h4>
<!-- NEW ENTRY -->
<datum>
    <name><code>HashMap&lt;K, V&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;collections&#x2F;struct.HashMap.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual>
        <sized>
            <code>bmask</code><sub>2/4/8</sub>
        </sized>
        <ptr>
           <code>ctrl</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>left</code><sub>2/4/8</sub>
        </sized>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry></memory-entry>
    <memory-entry style="width: 265px; left:-5%">
        <memory-link style="left:25%;">|</memory-link>
        <memory class="heap oversimplified">
            <framed class="any t"><code>K:V</code></framed>
            <framed class="any t"><code>K:V</code></framed>
            …
            <framed class="any t"><code>K:V</code></framed>
            …
            <framed class="any t"><code>K:V</code></framed>
            <capacity><note style="font-weight: bolder;">Oversimplified!</note></capacity>
        </memory>
    </memory-entry>
    <description>Stores keys and values on heap according to hash value, <a href="https://www.youtube.com/watch?v=ncHmEUmJZf4">SwissTable</a> <br> implementation via <a href="https://github.com/rust-lang/hashbrown">hashbrown</a>. <code>HashSet</code> <a href="https://doc.rust-lang.org/std&#x2F;collections&#x2F;struct.HashSet.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> identical to <code>HashMap</code>, <br>just type <code>V</code> disappears. Heap view grossly oversimplified. <pre data-shortcode><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></pre> </description>
</datum>
<spacer>
</spacer>
<!-- NEW ENTRY -->
<datum>
    <name><code>BinaryHeap&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;collections&#x2F;struct.BinaryHeap.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>capacity</code><sub>2/4/8</sub>
        </sized>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry style="width: 265px">
        <memory-link style="left:20%;">|</memory-link>
        <memory class="heap capacity">
            <div>
                <framed class="any t"><code>T&#x2063;<sup style="color:black; font-weight: bolder;">0</sup></code></framed>
                <framed class="any t" style="background-color: #f9b172;"><code>T&#x2063;<sup style="color:black; font-weight: bolder;">1</sup></code></framed>
                <framed class="any t" style="background-color: #f9b172;"><code>T&#x2063;<sup style="color:black; font-weight: bolder;">1</sup></code></framed>
                <framed class="any t" style="background-color: #f9d372;"><code>T&#x2063;<sup style="color:black; font-weight: bolder;">2</sup></code></framed>
                <framed class="any t" style="background-color: #f9d372;"><code>T&#x2063;<sup style="color:black; font-weight: bolder;">2</sup></code></framed>
                <note>… len</note>
            </div>
            <capacity>← <note>capacity</note> →</capacity>
        </memory>
    </memory-entry>
    <description>Heap stored as array with <code>2<sup>N</sup></code> elements per layer. Each <code>T</code> <br>
    can have 2 children in layer below. Each <code>T</code> larger than its<br>
    children.</description>
</datum>
<h4 id="owned-strings">Owned Strings<sup id="target-owned-strings" class="target"><a href="#owned-strings">url</a></sup></h4>
<!-- NEW ENTRY -->
<datum>
    <name><code>String</code> <a href="https://doc.rust-lang.org/std&#x2F;string&#x2F;struct.String.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>capacity</code><sub>2/4/8</sub>
        </sized>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry class="double">
        <memory-link style="left:25%;">|</memory-link>
        <memory class="heap">
            <div>
                <byte class="bytes"><code>U</code></byte>
                <byte class="bytes"><code>T</code></byte>
                <byte class="bytes"><code>F</code></byte>
                <byte class="bytes"><code>-</code></byte>
                <byte class="bytes"><code>8</code></byte>
                <note>… len</note>
            </div>
            <capacity>← <note>capacity</note> →</capacity>
        </memory>
    </memory-entry>
    <description>Observe how <code>String</code> differs from <code>&str</code> and <code>&[char]</code>.</description>
</datum>
<spacer>
</spacer>
<!-- NEW ENTRY -->
<datum>
    <name><code>CString</code> <a href="https://doc.rust-lang.org/std&#x2F;ffi&#x2F;struct.CString.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual>
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <sized>
            <code>len</code><sub>2/4/8</sub>
        </sized>
    </visual>
    <memory-entry class="double">
        <memory-link style="left:25%;">|</memory-link>
        <memory class="heap">
            <div>
                <byte class="bytes"><code>A</code></byte>
                <byte class="bytes"><code>B</code></byte>
                <byte class="bytes"><code>C</code></byte>
                <note>… len …</note>
                <byte class="bytes"><code>∅</code></byte>
            </div>
        </memory>
    </memory-entry>
    <description>NUL-terminated but w/o NUL in middle.</description>
</datum>
<spacer>
</spacer>
<!-- NEW ENTRY -->
<datum>
    <name><code>OsString</code> <a href="https://doc.rust-lang.org/std&#x2F;ffi&#x2F;struct.OsString.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual class="platformdefined">
        Platform Defined
    </visual>
    <memory-entry class="double">
        <memory-link style="left:25%;">|</memory-link>
        <memory class="heap">
            <div>
                <byte class="bytes"><code> </code></byte>
                <byte class="bytes"><code> </code></byte>
                /
                <word class="bytes"><code> </code></word>
                <word class="bytes"><code> </code></word>
            </div>
        </memory>
    </memory-entry>
    <description>Encapsulates how operating system<br> represents strings (e.g., <a href="https://simonsapin.github.io/wtf-8/">WTF-8</a> on <br>Windows).</description>
</datum>
<spacer>
</spacer>
<!-- NEW ENTRY -->
<datum>
    <name><code>PathBuf</code> <a href="https://doc.rust-lang.org/std&#x2F;path&#x2F;struct.PathBuf.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <!-- For some reason we need the width for mobile not to line break -->
    <visual class="platformdefined">
        <payload>
            <code>OsString</code>
        </payload>
    </visual>
    <memory-entry class="double">
        <memory-link style="left:40%;">|</memory-link>
        <memory class="heap">
            <div>
                <byte class="bytes"><code> </code></byte>
                <byte class="bytes"><code> </code></byte>
                /
                <word class="bytes"><code> </code></word>
                <word class="bytes"><code> </code></word>
            </div>
        </memory>
    </memory-entry>
    <description>Encapsulates how operating system<br> represents paths.</description>
</datum>
<div>&nbsp;</div>
<h4 id="shared-ownership">Shared Ownership<sup id="target-shared-ownership" class="target"><a href="#shared-ownership">url</a></sup></h4>
<p>If the type does not contain a <code>Cell</code> for <code>T</code>, these are often combined with one of the <code>Cell</code> types above to allow shared de-facto mutability.</p>
<!-- NEW ENTRY -->
<datum>
    <name><code>Rc&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;rc&#x2F;struct.Rc.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual style="width: 180px;">
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <payload>
            <code>meta</code><sub>2/4/8</sub>
        </payload>
    </visual>
    <div>
        <memory-entry class="quad">
            <memory-link style="left:15%;">|</memory-link>
            <memory class="heap">
                <sized class="celled"><code>strng</code><sub>2/4/8</sub></sized>
                <sized class="celled"><code>weak</code><sub>2/4/8</sub></sized>
                <framed class="any unsized"><code>T</code></framed>
            </memory>
        </memory-entry>
    </div>
    <description>Share ownership of <code>T</code> in same thread. Needs nested <code>Cell</code>
    <br>or <code>RefCell</code>to allow mutation. Is neither <code>Send</code> nor <code>Sync</code>.</description>
</datum>
<!-- NEW ENTRY -->
<datum>
    <name><code>Arc&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;sync&#x2F;struct.Arc.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual style="width: 180px;">
        <ptr>
           <code>ptr</code><sub>2/4/8</sub>
        </ptr>
        <payload>
            <code>meta</code><sub>2/4/8</sub>
        </payload>
    </visual>
    <div style="width: 0px;">
        <memory-entry class="quad">
            <memory-link style="left:15%;">|</memory-link>
            <memory class="heap">
                <sized class="atomicx"><code>strng</code><sub>2/4/8</sub></sized>
                <sized class="atomicx"><code>weak</code><sub>2/4/8</sub></sized>
                <framed class="any unsized"><code>T</code></framed>
            </memory>
        </memory-entry>
    </div>
    <description>Same, but allow sharing between threads IF contained<br>
    <code>T</code> itself is <code>Send</code> and <code>Sync</code>.</description>
</datum>
<br>
<!-- NEW ENTRY -->
<datum>
    <name><code>Mutex&lt;T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;sync&#x2F;struct.Mutex.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> / <code>RwLock&lt;T&gt;</code> <pre data-shortcode><a href="https://doc.rust-lang.org/std&#x2F;sync&#x2F;struct.RwLock.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></pre></name>
    <visual style="width: 230px;">
        <payload><code>inner</code></payload>
        <sized class="atomicx"><code>poison</code><sub>2/4/8</sub></sized>
        <framed class="any unsized celled"><code>T</code></framed>
    </visual>
    <description>Inner fields depend on platform. Needs to be <br>held in <code>Arc</code> to be shared between decoupled<br>threads, or
    via <code>scope()</code> <a href="https://doc.rust-lang.org/std&#x2F;thread&#x2F;fn.scope.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> for scoped threads.
    </description>
</datum>
<spacer>
</spacer>
<spacer>
</spacer>
<!-- NEW ENTRY -->
<datum class="spaced">
    <name><code>Cow&lt;'a, T&gt;</code> <a href="https://doc.rust-lang.org/std&#x2F;borrow&#x2F;enum.Cow.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></name>
    <visual class="enum" style="text-align: left;">
        <pad><code>Tag</code></pad>
        <framed class="any unsized" style="width: 100px; text-align: center;">
            <code>T::Owned</code>
        </framed>
    </visual>
    <andor>or</andor>
    <visual class="enum" style="text-align: left;">
        <pad><code>Tag</code></pad>
        <framed class="ptr" style="width: 50px;">
           <code>ptr</code><sub>2/4/8</sub>
        </framed>
    </visual>
    <div>
        <memory-entry style="width: 40px;"></memory-entry>
        <memory-entry>
            <memory-link style="left:15%;">|</memory-link>
            <memory class="anymem">
                <framed class="any unsized"><code>T</code></framed>
            </memory>
        </memory-entry>
    </div>
    <description>Holds read-only reference to<br>some <code>T</code>, or owns it's <code>ToOwned</code> <a href="https://doc.rust-lang.org/std&#x2F;borrow&#x2F;trait.ToOwned.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <br>analog.</description>
</datum>
<hr />
<h1 id="standard-library">Standard Library<sup id="target-standard-library" class="target"><a href="#standard-library">url</a></sup></h1>
<h2 id="one-liners">One-Liners<sup id="target-one-liners" class="target"><a href="#one-liners">url</a></sup></h2>
<p>Snippets that are common, but still easy to forget. See <strong>Rust Cookbook</strong> <a href="https:&#x2F;&#x2F;rust-lang-nursery.github.io&#x2F;rust-cookbook&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> for more.</p>
<!--
PRs for this section are very welcome. Idea is:
- Should be `std` only for now, no 3rd party libs (maybe exception for `rand`?)
- "Most people" should have encountered the problem
- Is not just a trival method on an 'obvious' struct (e.g., Sort a slice by `x.sort()` is probably too obvious.)
-->
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-api-2" name="tab-api-sized" checked>
<label for="tab-api-2"><b>Strings</b></label>
<panel><div class="color-header one-liners cheats">
<table><thead><tr><th>Intent</th><th>Snippet</th></tr></thead><tbody>
<tr><td>Concatenate strings (any <code>Display</code><a href="#string-output" title="On this site, below."><sup>↓</sup></a> that is).  <a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <sup>1</sup>  <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'21</sup></a></td><td><code>format!(&quot;{x}{y}&quot;)</code></td></tr>
<tr><td>Append string (any <code>Display</code> to any <code>Write</code>).  <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'21</sup></a> <a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;index.html#write"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td><code>write!(x, &quot;{y}&quot;)</code></td></tr>
<tr><td>Split by separator pattern. <a href="https://doc.rust-lang.org/std&#x2F;str&#x2F;pattern&#x2F;trait.Pattern.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;38138985" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td><code>s.split(pattern)</code></td></tr>
<tr><td><span class="hidemobile">    </span> … with <code>&amp;str</code></td><td><code>s.split(&quot;abc&quot;)</code></td></tr>
<tr><td><span class="hidemobile">    </span> … with <code>char</code></td><td><code>s.split('/')</code></td></tr>
<tr><td><span class="hidemobile">    </span> … with closure</td><td><code>s.split(char::is_numeric)</code></td></tr>
<tr><td>Split by whitespace.  <a href="https://doc.rust-lang.org/std&#x2F;primitive.str.html#method.split_whitespace"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td><code>s.split_whitespace()</code></td></tr>
<tr><td>Split by newlines.  <a href="https://doc.rust-lang.org/std&#x2F;primitive.str.html#method.lines"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td><code>s.lines()</code></td></tr>
<tr><td>Split by regular expression. <a href="https:&#x2F;&#x2F;docs.rs&#x2F;regex&#x2F;latest&#x2F;regex&#x2F;struct.Regex.html#method.split" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> <sup>2</sup></td><td><code> Regex::new(r&quot;\s&quot;)?.split(&quot;one two three&quot;)</code></td></tr>
</tbody></table>
<footnotes>
<p><sup>1</sup> Allocates; if <code>x</code> or <code>y</code> are not going to be used afterwards consider using <code>write!</code> or <code>std::ops::Add</code>.<br>
<sup>2</sup> Requires <a href="https://crates.io/crates/regex">regex</a> crate.</p>
</footnotes>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-api-1" name="tab-api-sized">
<label for="tab-api-1"><b>I/O</b></label>
<panel><div class="color-header one-liners cheats">
<table><thead><tr><th>Intent</th><th>Snippet</th></tr></thead><tbody>
<tr><td>Create a new file <a href="https://doc.rust-lang.org/std&#x2F;fs&#x2F;struct.File.html#method.open"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td><code>File::create(PATH)?</code></td></tr>
<tr><td><span class="hidemobile">    </span>  Same, via OpenOptions</td><td><code>OpenOptions::new().create(true).write(true).truncate(true).open(PATH)?</code></td></tr>
<tr><td>Read file as <code>String</code> <a href="https://doc.rust-lang.org/std&#x2F;fs&#x2F;fn.read_to_string.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td><code>read_to_string(path)?</code></td></tr>
</tbody></table>
<!-- <footnotes>

<sup>*</sup> We're a bit short on space here, <code>t</code> means true.

</footnotes> -->
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-api-4" name="tab-api-sized">
<label for="tab-api-4"><b>Macros</b></label>
<panel><div class="color-header one-liners cheats">
<table><thead><tr><th>Intent</th><th>Snippet</th></tr></thead><tbody>
<tr><td>Macro w. variable arguments</td><td><code>macro_rules! var_args { ($($args:expr),*) =&gt; {{ }} }</code></td></tr>
<tr><td><span class="hidemobile">    </span> Using <code>args</code>, e.g., calling <code>f</code> multiple times.</td><td><span class="hidemobile">    </span> <code> $( f($args); )*</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-api-5" name="tab-api-sized">
<label for="tab-api-5"><b>Transforms <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></b></label>
<panel><div class="color-header one-liners cheats">
<table><thead><tr><th>Starting Type</th><th>Resource</th></tr></thead><tbody>
<tr><td><code>Option&lt;T&gt; -&gt; …</code></td><td>See the <a href="https://upsuper.github.io/rust-cheatsheet/">Type-Based Cheat Sheet</a></td></tr>
<tr><td><code>Result&lt;T, R&gt; -&gt; …</code></td><td>See the <a href="https://upsuper.github.io/rust-cheatsheet/">Type-Based Cheat Sheet</a></td></tr>
<tr><td><code>Iterator&lt;Item=T&gt; -&gt; …</code></td><td>See the <a href="https://upsuper.github.io/rust-cheatsheet/">Type-Based Cheat Sheet</a></td></tr>
<tr><td><code>&amp;[T] -&gt; …</code></td><td>See the <a href="https://upsuper.github.io/rust-cheatsheet/">Type-Based Cheat Sheet</a></td></tr>
<tr><td><code>Future&lt;T&gt; -&gt; …</code></td><td>See the <a href="https://rufflewind.com/img/rust-futures-cheatsheet.html">Futures Cheat Sheet</a></td></tr>
</tbody></table>
<!-- <footnotes>

<sup>*</sup> We're a bit short on space here, <code>t</code> means true.

</footnotes> -->
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-api-3" name="tab-api-sized">
<label for="tab-api-3"><b>Esoterics</b><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></label>
<panel><div class="color-header one-liners cheats">
<table><thead><tr><th>Intent</th><th>Snippet</th></tr></thead><tbody>
<tr><td>Cleaner closure captures</td><td><code>wants_closure({ let c = outer.clone(); move || use_clone(c) })</code></td></tr>
<tr><td>Fix inference in '<code>try</code>' closures</td><td><code>iter.try_for_each(|x| { Ok::&lt;(), Error&gt;(()) })?;</code></td></tr>
<tr><td>Iterate <em>and</em> edit <code>&amp;mut [T]</code> if <code>T</code> Copy.</td><td><code>Cell::from_mut(mut_slice).as_slice_of_cells()</code></td></tr>
<tr><td>Get subslice with length.</td><td><code>&amp;original_slice[offset..][..length]</code></td></tr>
<tr><td>Canary so trait <code>T</code> is object safe.</td><td><code>const _: Option&lt;&amp;dyn T&gt; = None;</code></td></tr>
</tbody></table>
</div></panel></tab>
</tabs>
</div></div>
<h2 id="thread-safety">Thread Safety<sup id="target-thread-safety" class="target"><a href="#thread-safety">url</a></sup></h2>
<p>Assume you hold some variables in Thread 1, and want to either <strong>move</strong> them to Thread 2, or pass their <strong>references</strong> to Thread 3.
Whether this is allowed is governed by <strong><code>Send</code></strong><a href="https://doc.rust-lang.org/std&#x2F;marker&#x2F;trait.Send.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> and <strong><code>Sync</code></strong><a href="https://doc.rust-lang.org/std&#x2F;marker&#x2F;trait.Sync.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> respectively:</p>
<div>&nbsp;</div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto; padding-top: 10px;">
<div style="min-width: 100%; width: 650px; ">
<div class="color-header number">
<threading-section>
    <thread-row>
        <thread-backdrop><hr></thread-backdrop>
        <values>
            <value class="both" style="left: 57px;"><thread-link>|<br>|<br>|</thread-link>&nbsp;Mutex&lt;u32&gt;</value>
            <value class="one" style="left: 97.5px;"><thread-link>|<br>|<br>|</thread-link>&nbsp;Cell&lt;u32&gt;</value>
            <value class="one" style="left: 137.5px;"><thread-link>|<br>|<br>|</thread-link>&nbsp;MutexGuard&lt;u32&gt;</value>
            <value class="none" style="left: 177.5px;"><thread-link>|<br>|<br>|</thread-link>&nbsp;Rc&lt;u32&gt;</value>
        </values>
        <subtext><blank-background>Thread 1</blank-background></subtext>
    </thread-row>
    <thread-row>
        <thread-backdrop><hr></thread-backdrop>
        <values>
            <value class="both" style="left: 77px;">&nbsp;Mutex&lt;u32&gt;</value>
            <value class="one" style="left: 117.5px;">&nbsp;Cell&lt;u32&gt;</value>
            <value class="disabled" style="left: 157.5px;">&nbsp;MutexGuard&lt;u32&gt;</value>
            <value class="disabled" style="left: 197.5px;">&nbsp;Rc&lt;u32&gt;</value>
        </values>
        <subtext><blank-background>Thread 2</blank-background></subtext>
    </thread-row>
    <thread-row>
        <thread-backdrop><hr></thread-backdrop>
        <values>
            <value class="both" style="left: 77px;"><b>&</b>Mutex&lt;u32&gt;</value>
            <value class="disabled" style="left: 117.5px;"><b>&</b>Cell&lt;u32&gt;</value>
            <value class="one" style="left: 157.5px;"><b>&</b>MutexGuard&lt;u32&gt;</value>
            <value class="disabled" style="left: 197.5px;"><b>&</b>Rc&lt;u32&gt;</value>
        </values>
        <subtext><blank-background>Thread 3</blank-background></subtext>
    </thread-row>
</threading-section>
</div>
</div>
</div>
<div>&nbsp;</div>
<div class="color-header sendsync">
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><strong><code>Mutex&lt;u32&gt;</code></strong></td><td>Both <code>Send</code> and <code>Sync</code>. You can safely pass or lend it to another thread.</td></tr>
<tr><td><strong><code>Cell&lt;u32&gt;</code></strong></td><td><code>Send</code>, not <code>Sync</code>. Movable, but its reference would allow concurrent non-atomic writes.</td></tr>
<tr><td><strong><code>MutexGuard&lt;u32&gt;</code></strong></td><td><code>Sync</code>, but not <code>Send</code>. Lock tied to thread, but reference use could not allow data race.</td></tr>
<tr><td><strong><code>Rc&lt;u32&gt;</code></strong></td><td>Neither since it is easily clonable heap-proxy with non-atomic counters.</td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<!-- Shamelessly stolen from https://www.reddit.com/r/rust/comments/ctdkyr/understanding_sendsync/exk8grg/ -->
<table class="sendsync">
    <thead>
        <tr><th>Trait</th><th><code>Send</code></th><th><code>!Send</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>Sync</code></td><td><i>Most types</i> … <code>Arc&lt;T&gt;</code><sup>1,2</sup>, <code>Mutex&lt;T&gt;</code><sup>2</sup></td><td><code>MutexGuard&lt;T&gt;</code><sup>1</sup>, <code>RwLockReadGuard&lt;T&gt;</code><sup>1</sup></td></tr>
        <tr><td><code>!Sync</code></td><td><code>Cell&lt;T&gt;</code><sup>2</sup>, <code>RefCell&lt;T&gt;</code><sup>2</sup></td><td><code>Rc&lt;T&gt;</code>, <code>&dyn Trait</code>, <code>*const T</code><sup>3</sup></td></tr>
    </tbody>
</table>
<footnotes>
<p><sup>1</sup> If <code>T</code> is <code>Sync</code>. <br>
<sup>2</sup> If <code>T</code> is <code>Send</code>. <br>
<sup>3</sup> If you need to send a raw pointer, create newtype <code>struct Ptr(*const u8)</code> and <code>unsafe impl Send for Ptr {}</code>. Just ensure you <em>may</em> send it.</p>
</footnotes>
<h2 id="iterators">Iterators<sup id="target-iterators" class="target"><a href="#iterators">url</a></sup></h2>
<p>Processing elements in a collection.</p>
<tabs class="color-header iterators">
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-trait-iter-p0" name="tab-group-trait-iter" checked>
<label for="tab-trait-iter-p0"><b>Basics</b></label>
<panel><div>
<p>There are, broadly speaking, four <em>styles</em> of collection iteration:</p>
<table><thead><tr><th>Style</th><th>Description</th></tr></thead><tbody>
<tr><td><code>for x in c { ... }</code></td><td><em>Imperative</em>, useful w. side effects, interdepend., or need to break flow early.</td></tr>
<tr><td><code>c.iter().map().filter()</code></td><td><em>Functional</em>, often much cleaner when only results of interest.</td></tr>
<tr><td><code>c_iter.next()</code></td><td><em>Low-level</em>, via explicit <code>Iterator::next()</code> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;trait.Iterator.html#tymethod.next"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> invocation. <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>c.get(n)</code></td><td><em>Manual</em>, bypassing official iteration machinery.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<blockquote>
<p><strong>Opinion</strong> <a class="tooltip" title="Author's opinion."><sup>💬</sup></a> — Functional style is often easiest to follow, but don't hesitate to use  <code>for</code> if your <code>.iter()</code> chain turns messy. When implementing containers iterator support would be ideal, but when in a hurry it can sometimes be more practical to just implement <code>.len()</code> and <code>.get()</code> and move on with your life.</p>
</blockquote>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-trait-iter-1" name="tab-group-trait-iter">
<label for="tab-trait-iter-1"><b>Obtaining</b></label>
<panel><div>
<p><strong>Basics</strong></p>
<p>Assume you have a collection <code>c</code> of type <code>C</code> you want to use:</p>
<ul>
<li><strong><code>c.into_iter()</code></strong><sup>1</sup>  — Turns collection <code>c</code> into an <strong><code>Iterator</code></strong> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;trait.Iterator.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <code>i</code> and <strong>consumes</strong><sup>2</sup> <code>c</code>. <em>Std.</em> way to get iterator.</li>
<li><strong><code>c.iter()</code></strong> — Courtesy method <strong>some</strong> collections provide, returns <strong>borrowing</strong> Iterator, doesn't consume <code>c</code>.</li>
<li><strong><code>c.iter_mut()</code></strong> — Same, but <strong>mutably borrowing</strong> Iterator that allow collection to be changed.</li>
</ul>
<p><strong>The Iterator</strong></p>
<p>Once you have an <code>i</code>:</p>
<ul>
<li><strong><code>i.next()</code></strong> — Returns <code>Some(x)</code> next element <code>c</code> provides, or <code>None</code> if we're done.</li>
</ul>
<p><strong>For Loops</strong></p>
<ul>
<li><strong><code>for x in c {}</code></strong> — Syntactic sugar, calls <code>c.into_iter()</code> and loops <code>i</code> until <code>None</code>.</li>
</ul>
<footnotes>
<p><sup>1</sup> Requires <strong><code>IntoIterator</code></strong> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;trait.IntoIterator.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> for <code>C</code> to be implemented. Type of item depends on what <code>C</code> was.</p>
<p><sup>2</sup> If it looks as if it doesn't consume <code>c</code> that's because type was <code>Copy</code>. For example, if you call <code>(&amp;c).into_iter()</code> it will invoke <code>.into_iter()</code> on <code>&amp;c</code> (which will consume a <em>copy</em> of the reference and turn it into an Iterator), but the original <code>c</code> remains untouched.</p>
</footnotes>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-trait-iter-2" name="tab-group-trait-iter">
<label for="tab-trait-iter-2"><b>Creating</b></label>
<panel><div>
<p><strong>Essentials</strong></p>
<p>Let's assume you have a <code>struct Collection&lt;T&gt; {}</code> you authored. You should also implement:</p>
<ul>
<li><strong><code>struct IntoIter&lt;T&gt; {}</code></strong> — Create a struct to hold your iteration status (e.g., an index) for value iteration.</li>
<li><strong><code>impl Iterator for IntoIter&lt;T&gt; {}</code></strong> — Implement <code>Iterator::next()</code> so it can produce elements.</li>
</ul>
<mini-zoo class="zoo" style="">
    <entry class="wide">
        <type class="generic dotted"><code>Collection&lt;T&gt;</code></type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-right: 20px;">
    <entry class="wide">
        <type class="generic dotted"><code>IntoIter&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">Iterator</code></trait-impl>
        <associated-type class="grayed"><code>Item = T;</code></associated-type>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<blockquote>
<p>At this point you have something that can behave as an <strong>Iterator</strong>, <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;trait.Iterator.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> but no way of actually obtaining it. See the next tab for how that usually works.</p>
</blockquote>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-trait-iter-3" name="tab-group-trait-iter">
<label for="tab-trait-iter-3"><b>For Loops</b></label>
<panel><div>
<p><strong>Native Loop Support</strong></p>
<p>Many users would expect your collection to <em>just work</em> in <code>for</code> loops. You need to implement:</p>
<ul>
<li><strong><code>impl IntoIterator for Collection&lt;T&gt; {}</code></strong> — Now <code>for x in c {}</code> works.</li>
<li><strong><code>impl IntoIterator for &amp;Collection&lt;T&gt; {}</code></strong> — Now <code>for x in &amp;c {}</code> works.</li>
<li><strong><code>impl IntoIterator for &amp;mut Collection&lt;T&gt; {}</code></strong> — Now <code>for x in &amp;mut c {}</code> works.</li>
</ul>
<mini-zoo class="zoo" style="">
    <entry class="wide">
        <type class="generic dotted"><code>Collection&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">IntoIterator</code></trait-impl>
        <associated-type class="grayed"><code>Item = T;</code></associated-type>
        <associated-type class="grayed"><code>To = IntoIter&lt;T&gt;</code></associated-type>
        <note>Iterate over <code>T</code>.</note>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="">
    <entry class="wide">
        <type class="generic dotted grayed"><code>&Collection&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">IntoIterator</code></trait-impl>
        <associated-type class="grayed"><code>Item = &T;</code></associated-type>
        <associated-type class="grayed"><code>To = Iter&lt;T&gt;</code></associated-type>
        <note>Iterate over <code>&T</code>.</note>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="">
    <entry class="wide">
        <type class="generic dotted grayed"><code>&mut Collectn&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">IntoIterator</code></trait-impl>
        <associated-type class="grayed"><code>Item = &mut T;</code></associated-type>
        <associated-type class="grayed"><code>To = IterMut&lt;T&gt;</code></associated-type>
        <note>Iterate over <code>&mut T</code>.</note>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<blockquote>
<p>As you can see, the <strong>IntoIterator</strong> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;trait.IntoIterator.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> trait is what actually connects your collection with the <strong>IntoIter</strong> struct you created in the previous tab. The two siblings of <strong>IntoIter</strong> (<strong>Iter</strong> and <strong>IterMut</strong>) are discussed in the next tab.</p>
</blockquote>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-trait-iter-2b" name="tab-group-trait-iter">
<label for="tab-trait-iter-2b"><b>Borrowing</b></label>
<panel><div>
<p><strong>Shared &amp; Mutable Iterators</strong></p>
<p>In addition, if you want your collection to be useful when borrowed you should implement:</p>
<ul>
<li><strong><code>struct Iter&lt;T&gt; {}</code></strong> — Create struct holding <code>&amp;Collection&lt;T&gt;</code> state for shared iteration.</li>
<li><strong><code>struct IterMut&lt;T&gt; {}</code></strong> — Similar, but holding <code>&amp;mut Collection&lt;T&gt;</code> state for mutable iteration.</li>
<li><strong><code>impl Iterator for Iter&lt;T&gt; {}</code></strong> — Implement shared iteration.</li>
<li><strong><code>impl Iterator for IterMut&lt;T&gt; {}</code></strong> — Implement mutable iteration.</li>
</ul>
<p>Also you might want to add convenience methods:</p>
<ul>
<li><code>Collection::iter(&amp;self) -&gt; Iter</code>,</li>
<li><code>Collection::iter_mut(&amp;mut self) -&gt; IterMut</code>.</li>
</ul>
<mini-zoo class="zoo" style="margin-right: 20px;">
    <entry class="wide">
        <type class="generic dotted"><code>Iter&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">Iterator</code></trait-impl>
        <associated-type class="grayed"><code>Item = &T;</code></associated-type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-right: 20px;">
    <entry class="wide">
        <type class="generic dotted"><code>IterMut&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">Iterator</code></trait-impl>
        <associated-type class="grayed"><code>Item = &mut T;</code></associated-type>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<blockquote>
<p>The code for borrowing interator support is basically just a repetition of the previous steps with a slightly different types, e.g., <code>&amp;T</code> vs <code>T</code>.</p>
</blockquote>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-trait-iter-4" name="tab-group-trait-iter">
<label for="tab-trait-iter-4"><b>Interoperability</b></label>
<panel><div>
<p><strong>Iterator Interoperability</strong></p>
<p>To allow <strong>3<sup>rd</sup> party iterators</strong> to 'collect into' your collection implement:</p>
<ul>
<li><strong><code>impl FromIterator for Collection&lt;T&gt; {}</code></strong> — Now <code>some_iter.collect::&lt;Collection&lt;_&gt;&gt;()</code> works.</li>
<li><strong><code>impl Extend for Collection&lt;T&gt; {}</code></strong> — Now <code>c.extend(other)</code> works.</li>
</ul>
<p>In addition, also consider adding the extra traits from <strong><code>std::iter</code></strong> <a href="https://doc.rust-lang.org/std&#x2F;iter&#x2F;index.html#"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> to your previous structs:</p>
<mini-zoo class="zoo" style="margin-right: 20px;">
    <entry class="wide">
        <type class="generic dotted"><code>Collection&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">FromIterator</code></trait-impl>
        <trait-impl class="">⌾ <code style="">Extend</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry class="wide">
        <type class="generic dotted"><code>IntoIter&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">DoubleEndedIt… </code></trait-impl>
        <trait-impl class="">⌾ <code style="">ExactSizeIt… </code></trait-impl>
        <trait-impl class="">⌾ <code style="">FusedIterator </code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry class="wide">
        <type class="generic dotted"><code>Iter&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">DoubleEndedIt… </code></trait-impl>
        <trait-impl class="">⌾ <code style="">ExactSizeIt… </code></trait-impl>
        <trait-impl class="">⌾ <code style="">FusedIterator </code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry class="wide">
        <type class="generic dotted"><code>IterMut&lt;T&gt;</code></type>
        <trait-impl class="">⌾ <code style="">DoubleEndedIt… </code></trait-impl>
        <trait-impl class="">⌾ <code style="">ExactSizeIt… </code></trait-impl>
        <trait-impl class="">⌾ <code style="">FusedIterator </code></trait-impl>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<blockquote>
<p>Writing collections can be work. The good news is, if you followed all
these steps your collections will feel like <em>first class citizens</em>.</p>
</blockquote>
</div></panel></tab>
</tabs>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<div class="color-header number">
<h2 id="number-conversions">Number Conversions<sup id="target-number-conversions" class="target"><a href="#number-conversions">url</a></sup></h2>
<p>As-<b style="">correct</b>-as-it-currently-gets number conversions.</p>
<table><thead><tr><th>↓ Have / Want →</th><th><code>u8</code> … <code>i128</code></th><th><code>f32</code> / <code>f64</code></th><th>String</th></tr></thead><tbody>
<tr><td><code>u8</code> … <code>i128</code></td><td><code>u8::try_from(x)?</code> <sup>1</sup></td><td><code>x as f32</code> <sup>3</sup></td><td><code>x.to_string()</code></td></tr>
<tr><td><code>f32</code> / <code>f64</code></td><td><code>x as u8</code> <sup>2</sup></td><td><code>x as f32</code></td><td><code>x.to_string()</code></td></tr>
<tr><td><code>String</code></td><td><code>x.parse::&lt;u8&gt;()?</code></td><td><code>x.parse::&lt;f32&gt;()?</code></td><td><code>x</code></td></tr>
</tbody></table>
<footnotes>
<p><sup>1</sup> If type true subset <code>from()</code> works directly, e.g., <code>u32::from(my_u8)</code>. <br/>
<sup>2</sup> Truncating (<code>11.9_f32 as u8</code> gives <code>11</code>) and saturating (<code>1024_f32 as u8</code> gives <code>255</code>); <em>c</em>. below. <br/>
<sup>3</sup> Might misrepresent number (<code>u64::MAX as f32</code>) or produce <code>Inf</code> (<code>u128::MAX as f32</code>).</p>
</footnotes>
<div>&nbsp;</div>
<blockquote>
<p>Also see <strong>Casting-</strong> and <strong>Arithmetic Pitfalls</strong> <a href="#numeric-types" title="On this site, above."><sup>↑</sup></a> for more things that can go wrong working with numbers.</p>
</blockquote>
<!-- end overflow -->
</div>
</div>
</div>
<h2 id="string-conversions">String Conversions<sup id="target-string-conversions" class="target"><a href="#string-conversions">url</a></sup></h2>
<p>If you <strong>want</strong> a string of type …</p>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-1" name="tab-group-str" checked>
<label for="tab-str-1"><code>String</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>x</code></td></tr>
<tr><td><code>CString</code></td><td><code>x.into_string()?</code></td></tr>
<tr><td><code>OsString</code></td><td><code>x.to_str()?.to_string()</code></td></tr>
<tr><td><code>PathBuf</code></td><td><code>x.to_str()?.to_string()</code></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>String::from_utf8(x)?</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>x.to_string()</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>x.to_str()?.to_string()</code></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>x.to_str()?.to_string()</code></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>x.to_str()?.to_string()</code></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>String::from_utf8_lossy(x).to_string()</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-2" name="tab-group-str" >
<label for="tab-str-2"><code>CString</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>CString::new(x)?</code></td></tr>
<tr><td><code>CString</code></td><td><code>x</code></td></tr>
<tr><td><code>OsString</code></td><td><code>CString::new(x.to_str()?)?</code></td></tr>
<tr><td><code>PathBuf</code></td><td><code>CString::new(x.to_str()?)?</code></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>CString::new(x)?</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>CString::new(x)?</code></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>x.to_owned()</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>CString::new(x.to_os_string().into_string()?)?</code></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>CString::new(x.to_str()?)?</code></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>CString::new(Vec::from(x))?</code></td></tr>
<tr><td><code>*mut c_char</code> <sup>2</sup></td><td><code>unsafe { CString::from_raw(x) }</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-3" name="tab-group-str" >
<label for="tab-str-3"><code>OsString</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>OsString::from(x)</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>CString</code></td><td><code>OsString::from(x.to_str()?)</code></td></tr>
<tr><td><code>OsString</code></td><td><code>x</code></td></tr>
<tr><td><code>PathBuf</code></td><td><code>x.into_os_string()</code></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>unsafe { OsString::from_encoded_bytes_unchecked(x) }</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>OsString::from(x)</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>OsString::from(x.to_str()?)</code></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>OsString::from(x)</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>x.as_os_str().to_owned()</code></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>unsafe { OsString::from_encoded_bytes_unchecked(x.to_vec()) }</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-35" name="tab-group-str" >
<label for="tab-str-35"><code>PathBuf</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>PathBuf::from(x)</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>CString</code></td><td><code>PathBuf::from(x.to_str()?)</code></td></tr>
<tr><td><code>OsString</code></td><td><code>PathBuf::from(x)</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>PathBuf</code></td><td><code>x</code></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>unsafe { PathBuf::from(OsString::from_encoded_bytes_unchecked(x)) }</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>PathBuf::from(x)</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>PathBuf::from(x.to_str()?)</code></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>PathBuf::from(x)</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>PathBuf::from(x)</code> <sup><code>i</code></sup></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>unsafe { PathBuf::from(OsString::from_encoded_bytes_unchecked(x.to_vec())) }</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-4" name="tab-group-str" >
<label for="tab-str-4"><code>Vec&lt;u8&gt;</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>x.into_bytes()</code></td></tr>
<tr><td><code>CString</code></td><td><code>x.into_bytes()</code></td></tr>
<tr><td><code>OsString</code></td><td><code>x.into_encoded_bytes()</code></td></tr>
<tr><td><code>PathBuf</code></td><td><code>x.into_os_string().into_encoded_bytes()</code></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>x</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>Vec::from(x.as_bytes())</code></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>Vec::from(x.to_bytes_with_nul())</code></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>Vec::from(x.as_encoded_bytes())</code></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>Vec::from(x.as_os_str().as_encoded_bytes())</code></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>x.to_vec()</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-5" name="tab-group-str" >
<label for="tab-str-5"><code>&str</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>x.as_str()</code></td></tr>
<tr><td><code>CString</code></td><td><code>x.to_str()?</code></td></tr>
<tr><td><code>OsString</code></td><td><code>x.to_str()?</code></td></tr>
<tr><td><code>PathBuf</code></td><td><code>x.to_str()?</code></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>std::str::from_utf8(&amp;x)?</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>x</code></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>x.to_str()?</code></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>x.to_str()?</code></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>x.to_str()?</code></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>std::str::from_utf8(x)?</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-6" name="tab-group-str" >
<label for="tab-str-6"><code>&CStr</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>CString::new(x)?.as_c_str()</code></td></tr>
<tr><td><code>CString</code></td><td><code>x.as_c_str()</code></td></tr>
<tr><td><code>OsString</code></td><td><code>x.to_str()?</code></td></tr>
<tr><td><code>PathBuf</code></td><td><a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a><sup>,3</sup></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup><sup>,4</sup></td><td><code>CStr::from_bytes_with_nul(&amp;x)?</code></td></tr>
<tr><td><code>&amp;str</code></td><td><a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a><sup>,3</sup></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>x</code></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></td></tr>
<tr><td><code>&amp;Path</code></td><td><a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup><sup>,4</sup></td><td><code>CStr::from_bytes_with_nul(x)?</code></td></tr>
<tr><td><code>*const c_char</code> <sup>1</sup></td><td><code>unsafe { CStr::from_ptr(x) }</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-8" name="tab-group-str" >
<label for="tab-str-8"><code>&OsStr</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>OsStr::new(&amp;x)</code></td></tr>
<tr><td><code>CString</code></td><td><a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></td></tr>
<tr><td><code>OsString</code></td><td><code>x.as_os_str()</code></td></tr>
<tr><td><code>PathBuf</code></td><td><code>x.as_os_str()</code></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>unsafe { OsStr::from_encoded_bytes_unchecked(&amp;x) }</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>OsStr::new(x)</code></td></tr>
<tr><td><code>&amp;CStr</code></td><td><a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>x</code></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>x.as_os_str()</code></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>unsafe { OsStr::from_encoded_bytes_unchecked(x) }</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-85" name="tab-group-str" >
<label for="tab-str-85"><code>&Path</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>Path::new(x)</code> <sup><code>r</code></sup></td></tr>
<tr><td><code>CString</code></td><td><code>Path::new(x.to_str()?)</code></td></tr>
<tr><td><code>OsString</code></td><td><code>Path::new(x.to_str()?)</code> <sup><code>r</code></sup></td></tr>
<tr><td><code>PathBuf</code></td><td><code>Path::new(x.to_str()?)</code> <sup><code>r</code></sup></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>unsafe { Path::new(OsStr::from_encoded_bytes_unchecked(&amp;x)) }</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>Path::new(x)</code> <sup><code>r</code></sup></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>Path::new(x.to_str()?)</code></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>Path::new(x)</code> <sup><code>r</code></sup></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>x</code></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>unsafe { Path::new(OsStr::from_encoded_bytes_unchecked(x)) }</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-7" name="tab-group-str" >
<label for="tab-str-7"><code>&[u8]</code></label>
<panel><div class="stringconversion">
<table><thead><tr><th>If you <strong>have</strong> <code>x</code> of type …</th><th>Use this …</th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>x.as_bytes()</code></td></tr>
<tr><td><code>CString</code></td><td><code>x.as_bytes()</code></td></tr>
<tr><td><code>OsString</code></td><td><code>x.as_encoded_bytes()</code></td></tr>
<tr><td><code>PathBuf</code></td><td><code>x.as_os_str().as_encoded_bytes()</code></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code> <sup>1</sup></td><td><code>&amp;x</code></td></tr>
<tr><td><code>&amp;str</code></td><td><code>x.as_bytes()</code></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>x.to_bytes_with_nul()</code></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>x.as_encoded_bytes()</code></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>x.as_os_str().as_encoded_bytes()</code></td></tr>
<tr><td><code>&amp;[u8]</code> <sup>1</sup></td><td><code>x</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-str-9" name="tab-group-str" >
<label for="tab-str-9"><b>Other</b></label>
<panel><div class="stringconversion">
<table><thead><tr><th>You <strong>want</strong></th><th>And <strong>have</strong> <code>x</code></th><th>Use this …</th></tr></thead><tbody>
<tr><td><b><code>*const c_char</code></b></td><td><b><code>CString</code></b></td><td><code>x.as_ptr()</code></td></tr>
</tbody></table>
</div></panel></tab>
<!-- End tabs -->
</tabs>
<!-- End overflow protection -->
</div></div>
<footnotes>
<p><sup>i</sup> Short form <code>x.into()</code> possible if type can be inferred. <br>
<sup>r</sup> Short form <code>x.as_ref()</code> possible if type can be inferred.<br>
<sup>1</sup> You must ensure <code>x</code> comes with a valid representation for the string type (e.g., UTF-8 data for a <code>String</code>).<br>
<sup>2</sup> The <code>c_char</code> <strong>must</strong> have come from a previous <code>CString</code>. If it comes from FFI see <code>&amp;CStr</code> instead.<br>
<sup>3</sup> No known shorthand as <code>x</code> will lack terminating <code>0x0</code>. Best way to probably go via <code>CString</code>.<br>
<sup>4</sup> Must ensure <code>x</code> actually ends with <code>0x0</code>.<br></p>
</footnotes>
<h2 id="string-output">String Output<sup id="target-string-output" class="target"><a href="#string-output">url</a></sup></h2>
<p>How to convert types into a <code>String</code>, or output them.</p>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-strop-1" name="tab-group-strop" checked>
<label for="tab-strop-1"><b>APIs</b></label>
<panel><div class="color-header undefined-color-3">
<p>Rust has, among others, these APIs to convert types to stringified output, collectively called <em>format</em> macros:</p>
<table><thead><tr><th>Macro</th><th>Output</th><th>Notes</th></tr></thead><tbody>
<tr><td><code>format!(fmt)</code></td><td><code>String</code></td><td>Bread-and-butter &quot;to <code>String</code>&quot; converter.</td></tr>
<tr><td><code>print!(fmt)</code></td><td>Console</td><td>Writes to standard output.</td></tr>
<tr><td><code>println!(fmt)</code></td><td>Console</td><td>Writes to standard output.</td></tr>
<tr><td><code>eprint!(fmt)</code></td><td>Console</td><td>Writes to standard error.</td></tr>
<tr><td><code>eprintln!(fmt)</code></td><td>Console</td><td>Writes to standard error.</td></tr>
<tr><td><code>write!(dst, fmt)</code></td><td>Buffer</td><td>Don't forget to also <code>use std::io::Write;</code></td></tr>
<tr><td><code>writeln!(dst, fmt)</code></td><td>Buffer</td><td>Don't forget to also <code>use std::io::Write;</code></td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Method</th><th>Notes</th></tr></thead><tbody>
<tr><td><code>x.to_string()</code> <a href="https://doc.rust-lang.org/std&#x2F;string&#x2F;trait.ToString.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td>Produces <code>String</code>, implemented for any <code>Display</code> type.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<p>Here <code>fmt</code> is string literal such as <code>&quot;hello {}&quot;</code>, that specifies output (compare &quot;Formatting&quot; tab) and additional parameters.</p>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-strop-2" name="tab-group-strop">
<label for="tab-strop-2"><b>Printable Types</b></label>
<panel><div class="color-header undefined-color-3">
<p>In <code>format!</code> and friends, types convert via trait <code>Display</code> <code>&quot;{}&quot;</code> <a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Display.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> or <code>Debug</code> <code>&quot;{:?}&quot;</code> <a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Debug.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> , non exhaustive list:</p>
<table><thead><tr><th>Type</th><th>Implements</th><th></th></tr></thead><tbody>
<tr><td><code>String</code></td><td><code>Debug, Display</code></td><td></td></tr>
<tr><td><code>CString</code></td><td><code>Debug</code></td><td></td></tr>
<tr><td><code>OsString</code></td><td><code>Debug</code></td><td></td></tr>
<tr><td><code>PathBuf</code></td><td><code>Debug</code></td><td></td></tr>
<tr><td><code>Vec&lt;u8&gt;</code></td><td><code>Debug</code></td><td></td></tr>
<tr><td><code>&amp;str</code></td><td><code>Debug, Display</code></td><td></td></tr>
<tr><td><code>&amp;CStr</code></td><td><code>Debug</code></td><td></td></tr>
<tr><td><code>&amp;OsStr</code></td><td><code>Debug</code></td><td></td></tr>
<tr><td><code>&amp;Path</code></td><td><code>Debug</code></td><td></td></tr>
<tr><td><code>&amp;[u8]</code></td><td><code>Debug</code></td><td></td></tr>
<tr><td><code>bool</code></td><td><code>Debug, Display</code></td><td></td></tr>
<tr><td><code>char</code></td><td><code>Debug, Display</code></td><td></td></tr>
<tr><td><code>u8</code> … <code>i128</code></td><td><code>Debug, Display</code></td><td></td></tr>
<tr><td><code>f32</code>, <code>f64</code></td><td><code>Debug, Display</code></td><td></td></tr>
<tr><td><code>!</code></td><td><code>Debug, Display</code></td><td></td></tr>
<tr><td><code>()</code></td><td><code>Debug</code></td><td></td></tr>
</tbody></table>
<div>&nbsp;</div>
<p>In short, pretty much everything is <code>Debug</code>; more <em>special</em> types might need special handling or conversion <a href="#string-conversions" title="On this site, above."><sup>↑</sup></a> to <code>Display</code>.</p>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-strop-3" name="tab-group-strop">
<label for="tab-strop-3"><b>Formatting</b></label>
<panel><div>
<p>Each argument designator in format macro is either empty <code>{}</code>, <code>{argument}</code>, or follows a basic <a href="https://doc.rust-lang.org/std/fmt/index.html#syntax"><strong>syntax</strong></a>:</p>
<pre><code>{ [argument] &#x27;:&#x27; [[fill] align] [sign] [&#x27;#&#x27;] [width [$]] [&#x27;.&#x27; precision [$]] [type] }
</code></pre>
<div class="color-header undefined-color-3">
<table><thead><tr><th>Element</th><th>Meaning</th></tr></thead><tbody>
<tr><td><code>argument</code></td><td>Number (<code>0</code>, <code>1</code>, …), variable <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'21</sup></a> or name,<a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'18</sup></a> e.g., <code>print!(&quot;{x}&quot;)</code>.</td></tr>
<tr><td><code>fill</code></td><td>The character to fill empty spaces with (e.g., <code>0</code>), if <code>width</code> is specified.</td></tr>
<tr><td><code>align</code></td><td>Left (<code>&lt;</code>), center (<code>^</code>), or right (<code>&gt;</code>), if width is specified.</td></tr>
<tr><td><code>sign</code></td><td>Can be <code>+</code> for sign to always be printed.</td></tr>
<tr><td><code>#</code></td><td><a href="https://doc.rust-lang.org/std/fmt/index.html#sign0">Alternate formatting</a>, e.g., prettify <code>Debug</code><a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Debug.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> formatter <code>?</code> or prefix hex with <code>0x</code>.</td></tr>
<tr><td><code>width</code></td><td>Minimum width (≥ 0), padding with <code>fill</code> (default to space). If starts with <code>0</code>, zero-padded.</td></tr>
<tr><td><code>precision</code></td><td>Decimal digits (≥ 0) for numerics, or max width for non-numerics.</td></tr>
<tr><td><code>$</code></td><td>Interpret <code>width</code> or <code>precision</code> as argument identifier instead to allow for dynamic formatting.</td></tr>
<tr><td><strong><code>type</code></strong></td><td><code>Debug</code><a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Debug.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> (<code>?</code>) formatting, hex (<code>x</code>), binary (<code>b</code>), octal (<code>o</code>), pointer (<code>p</code>), exp (<code>e</code>) … <a href="https://doc.rust-lang.org/std/fmt/index.html#traits">see more</a>.</td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<div class="color-header undefined-color-3">
<table><thead><tr><th>Format Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>{}</code></td><td>Print the next argument using <code>Display</code>.<a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Display.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><code>{x}</code></td><td>Same, but use variable <code>x</code> from scope. <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'21</sup></a></td></tr>
<tr><td><code>{:?}</code></td><td>Print the next argument using <code>Debug</code>.<a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Debug.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><code>{2:#?}</code></td><td>Pretty-print the 3<sup>rd</sup> argument with <code>Debug</code><a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Debug.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> formatting.</td></tr>
<tr><td><code>{val:^2$}</code></td><td>Center the <code>val</code> named argument, width specified by the 3<sup>rd</sup> argument.</td></tr>
<tr><td><code>{:&lt;10.3}</code></td><td>Left align with width 10 and a precision of 3.</td></tr>
<tr><td><code>{val:#x}</code></td><td>Format <code>val</code> argument as hex, with a leading <code>0x</code> (alternate format for <code>x</code>).</td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<div class="color-header undefined-color-3">
<table><thead><tr><th>Full Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>println!(&quot;{}&quot;, x)</code></td><td>Print <code>x</code> using <code>Display</code><a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Display.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> on std. out and append new line. <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'15</sup></a> <a class="tooltip" title="Largely deprecated or outdated; prefer modern alternative."><sup>🗑️</sup></a></td></tr>
<tr><td><code>println!(&quot;{x}&quot;)</code></td><td>Same, but use variable <code>x</code> from scope. <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'21</sup></a></td></tr>
<tr><td><code>format!(&quot;{a:.3} {b:?}&quot;)</code></td><td>Convert <code>a</code> with 3 digits, add space, <code>b</code> with <code>Debug</code> <a href="https://doc.rust-lang.org/std&#x2F;fmt&#x2F;trait.Debug.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a>, return <code>String</code>.  <a class="tooltip" title="Only valid in, or starting with, indicated Rust edition."><sup>'21</sup></a></td></tr>
</tbody></table>
</div>
</div></panel></tab>
</tabs>
<div>&nbsp;</div>
<hr />
<h1 id="tooling">Tooling<sup id="target-tooling" class="target"><a href="#tooling">url</a></sup></h1>
<h2 id="project-anatomy">Project Anatomy<sup id="target-project-anatomy" class="target"><a href="#project-anatomy">url</a></sup></h2>
<p>Basic project layout, and common files and folders, as used by <code>cargo</code>. <a href="#cargo" title="On this site, below."><sup>↓</sup></a></p>
<div class="color-header red">
<table><thead><tr><th>Entry</th><th>Code</th></tr></thead><tbody>
<tr><td>📁 <code>.cargo/</code></td><td><strong>Project-local cargo configuration</strong>, may contain <strong><code>config.toml</code></strong>. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;cargo&#x2F;reference&#x2F;config.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td>📁 <code>benches/</code></td><td>Benchmarks for your crate, run via <strong><code>cargo bench</code></strong>, requires nightly by default. <sup>*</sup> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td></tr>
<tr><td>📁 <code>examples/</code></td><td>Examples how to use your crate, they see your crate like external user would.</td></tr>
<tr><td><span class="hidemobile">    </span> <span class="hidemobile">    </span> <code>my_example.rs</code></td><td>Individual examples are run like <strong><code>cargo run --example my_example</code></strong>.</td></tr>
<tr><td>📁 <code>src/</code></td><td>Actual source code for your project.</td></tr>
<tr><td><span class="hidemobile">    </span> <span class="hidemobile">    </span> <code>main.rs</code></td><td>Default entry point for applications, this is what <strong><code>cargo run</code></strong> uses.</td></tr>
<tr><td><span class="hidemobile">    </span> <span class="hidemobile">    </span> <code>lib.rs</code></td><td>Default entry point for libraries. This is where lookup for <code>my_crate::f()</code> starts.</td></tr>
<tr><td>📁 <code>src/bin/</code></td><td>Place for additional binaries, even in library projects.</td></tr>
<tr><td><span class="hidemobile">    </span> <span class="hidemobile">    </span> <code>extra.rs</code></td><td>Additional binary, run with <code>cargo run --bin extra</code>.</td></tr>
<tr><td>📁 <code>tests/</code></td><td>Integration tests go here, invoked via <strong><code>cargo test</code></strong>. Unit tests often stay in <code>src/</code> file.</td></tr>
<tr><td><code>.rustfmt.toml</code></td><td>In case you want to <a href="https://rust-lang.github.io/rustfmt/"><strong>customize</strong></a> how <strong><code>cargo fmt</code></strong> works.</td></tr>
<tr><td><code>.clippy.toml</code></td><td>Special configuration for certain <a href="https://rust-lang.github.io/rust-clippy/master/index.html"><strong>clippy lints</strong></a>, utilized via <strong><code>cargo clippy</code></strong>  <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>build.rs</code></td><td><strong>Pre-build script</strong>, <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;cargo&#x2F;reference&#x2F;build-scripts.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> useful when compiling C / FFI, …</td></tr>
<tr><td><code class="ignore-auto language-bash">Cargo.toml</code></td><td>Main <strong>project manifest</strong>, <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;cargo&#x2F;reference&#x2F;manifest.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> Defines dependencies, artifacts …</td></tr>
<tr><td><code class="ignore-auto language-bash">Cargo.lock</code></td><td>For reproducible builds. Add to git for apps, consider not for libs. <a class="tooltip" title="Author's opinion."><sup>💬</sup></a> <a href="https:&#x2F;&#x2F;blog.rust-lang.org&#x2F;2023&#x2F;08&#x2F;29&#x2F;committing-lockfiles.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> <a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20240108203227&#x2F;https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;rust&#x2F;comments&#x2F;164qfjm&#x2F;change_in_guidance_on_committing_lockfiles_rust&#x2F;jya8ouf&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>rust-toolchain.toml</code></td><td>Define <strong>toolchain override</strong><a href="https:&#x2F;&#x2F;rust-lang.github.io&#x2F;rustup&#x2F;overrides.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> (channel, components, targets) for this project.</td></tr>
</tbody></table>
</div>
<footnotes>
<p><sup>*</sup> On stable consider <a href="https://github.com/bheisler/criterion.rs">Criterion</a>.</p>
</footnotes>
<div>&nbsp;</div>
<p><strong>Minimal examples</strong> for various entry points might look like:</p>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-anatomy-1" name="tab-group-anatomy" checked>
<label for="tab-anatomy-1"><b>Applications</b></label>
<panel><div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre><code>&#x2F;&#x2F; src&#x2F;main.rs (default application entry point)

fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre>
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-anatomy-2" name="tab-group-anatomy" >
<label for="tab-anatomy-2"><b>Libraries</b></label>
<panel><div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre><code>&#x2F;&#x2F; src&#x2F;lib.rs (default library entry point)

pub fn f() {}      &#x2F;&#x2F; Is a public item in root, so it&#x27;s accessible from the outside.

mod m {
    pub fn g() {}  &#x2F;&#x2F; No public path (`m` not public) from root, so `g`
}                  &#x2F;&#x2F; is not accessible from the outside of the crate.
</code></pre>
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-anatomy-3" name="tab-group-anatomy" >
<label for="tab-anatomy-3"><b>Unit Tests</b></label>
<panel><div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre><code>&#x2F;&#x2F; src&#x2F;my_module.rs (any file of your project)

fn f() -&gt; u32 { 0 }

#[cfg(test)]
mod test {
    use super::f;           &#x2F;&#x2F; Need to import items from parent module. Has
                            &#x2F;&#x2F; access to non-public members.
    #[test]
    fn ff() {
        assert_eq!(f(), 0);
    }
}
</code></pre>
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-anatomy-4" name="tab-group-anatomy" >
<label for="tab-anatomy-4"><b>Integration Tests</b></label>
<panel><div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre><code>&#x2F;&#x2F; tests&#x2F;sample.rs (sample integration test)

#[test]
fn my_sample() {
    assert_eq!(my_crate::f(), 123); &#x2F;&#x2F; Integration tests (and benchmarks) &#x27;depend&#x27; to the crate like
}                                   &#x2F;&#x2F; a 3rd party would. Hence, they only see public items.
</code></pre>
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-anatomy-5" name="tab-group-anatomy" >
<label for="tab-anatomy-5"><b>Benchmarks</b><a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></label>
<panel><div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre><code>&#x2F;&#x2F; benches&#x2F;sample.rs (sample benchmark)

#![feature(test)]   &#x2F;&#x2F; #[bench] is still experimental

extern crate test;  &#x2F;&#x2F; Even in &#x27;18 this is needed for … reasons.
                    &#x2F;&#x2F; Normally you don&#x27;t need this in &#x27;18 code.

use test::{black_box, Bencher};

#[bench]
fn my_algo(b: &amp;mut Bencher) {
    b.iter(|| black_box(my_crate::f())); &#x2F;&#x2F; `black_box` prevents `f` from being optimized away.
}
</code></pre>
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-anatomy-6" name="tab-group-anatomy" >
<label for="tab-anatomy-6"><b>Build Scripts</b></label>
<panel><div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre><code>&#x2F;&#x2F; build.rs (sample pre-build script)

fn main() {
    &#x2F;&#x2F; You need to rely on env. vars for target; `#[cfg(…)]` are for host.
    let target_os = env::var(&quot;CARGO_CFG_TARGET_OS&quot;);
}
</code></pre>
<p><sup>*</sup><a href="https://doc.rust-lang.org/cargo/reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts">See here for list</a> of environment variables set.</p>
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-anatomy-25" name="tab-group-anatomy" >
<label for="tab-anatomy-25"><b>Proc Macros</b><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></label>
<panel><div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre><code>&#x2F;&#x2F; src&#x2F;lib.rs (default entry point for proc macros)

extern crate proc_macro;  &#x2F;&#x2F; Apparently needed to be imported like this.

use proc_macro::TokenStream;

#[proc_macro_attribute]   &#x2F;&#x2F; Crates can now use `#[my_attribute]`
pub fn my_attribute(_attr: TokenStream, item: TokenStream) -&gt; TokenStream {
    item
}
</code></pre>
<pre><code>&#x2F;&#x2F; Cargo.toml

[package]
name = &quot;my_crate&quot;
version = &quot;0.1.0&quot;

[lib]
proc-macro = true
</code></pre>
</div></div></div></panel></tab>
</tabs>
<div>&nbsp;</div>
<p>Module trees and imports:</p>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-module-import-1" name="tab-group-module-import" checked>
<label for="tab-module-import-1"><b>Module Trees</b></label>
<panel><div>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<p><strong>Modules</strong> <a href="https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/mod.html#modules" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;modules.html#modules" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> and <strong>source files</strong> work as follows:</p>
<ul>
<li><strong>Module tree</strong> needs to be explicitly defined, is <strong>not</strong> implicitly built from <strong>file system tree</strong>. <a href="http:&#x2F;&#x2F;www.sheshbabu.com&#x2F;posts&#x2F;rust-module-system&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></li>
<li><strong>Module tree root</strong> equals library, app, … entry point (e.g., <code>lib.rs</code>).</li>
</ul>
<p>Actual <strong>module definitions</strong> work as follows:</p>
<ul>
<li>A <strong><code>mod m {}</code></strong> defines module in-file, while <strong><code>mod m;</code></strong> will read <code>m.rs</code> or <code>m/mod.rs</code>.</li>
<li>Path of <code>.rs</code> based on <strong>nesting</strong>, e.g., <code>mod a { mod b { mod c; }}}</code> is either <code>a/b/c.rs</code> or <code>a/b/c/mod.rs</code>.</li>
<li>Files not pathed from module tree root via some <code>mod m;</code> won't be touched by compiler! <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></li>
</ul>
<!-- - **Visibility** of items (e.g., functions, fields) between modules governed by: "Is there visible path to item?"
    - Visibility like `pub fn f() {}` does not mean "`f` is public", but "`f` at most public if all parents public`. -->
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-module-import-2" name="tab-group-module-import">
<label for="tab-module-import-2"><b>Namespaces</b><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></label>
<panel><div>
<p>Rust has three kinds of <strong>namespaces</strong>:</p>
<table>
    <thead>
        <tr>
            <th>Namespace <i>Types</i></th>
            <th>Namespace <i>Functions</i></th>
            <th>Namespace <i>Macros</i></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>mod X {}</code></td>
            <td><code>fn X() {}</code></td>
            <td><code>macro_rules! X { … }</code></td>
        </tr>
        <tr>
            <td><code>X</code> (crate)</td>
            <td><code>const X: u8 = 1;</code></td>
            <td><code></code></td>
        </tr>
        <tr>
            <td><code>trait X {}</code></td>
            <td><code>static X: u8 = 1;</code></td>
            <td><code></code></td>
        </tr>
        <tr>
            <td><code>enum X {}</code></td>
            <td><code></code></td>
            <td><code></code></td>
        </tr>
        <tr>
            <td><code>union X {}</code></td>
            <td><code></code></td>
            <td><code></code></td>
        </tr>
        <tr>
            <td><code>struct X {}</code></td>
            <td><code></code></td>
            <td><code></code></td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: center; padding-right: 50px;"> <span style="opacity: 50%">←</span> <code>struct X;</code><sup>1</sup> <span style="opacity: 50%">→</span> </td>
            <td></td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: center; padding-right: 50px;"> <span style="opacity: 50%">←</span> <code>struct X();</code><sup>2</sup> <span style="opacity: 50%">→</span> </td>
            <td></td>
        </tr>
    </tbody>
</table>
<footnotes>
<p><sup>1</sup> Counts in <i>Types</i> and in <i>Functions</i>, defines type <code>X</code> <em>and</em> constant <code>X</code>. <br>
<sup>2</sup> Counts in <i>Types</i> and in <i>Functions</i>, defines type <code>X</code> <em>and</em> function <code>X</code>.</p>
</footnotes>
<ul>
<li>In any given scope, for example within a module, only one item per namespace can exist, e.g.,
<ul>
<li><code>enum X {}</code> and <code>fn X() {}</code> can coexist</li>
<li><code>struct X;</code> and <code>const X</code> cannot coexist</li>
</ul>
</li>
<li>With a <code>use my_mod::X;</code> all items called <code>X</code> will be imported.</li>
</ul>
<blockquote>
<p>Due to naming conventions (e.g., <code>fn</code> and <code>mod</code> are lowercase by convention) and <em>common sense</em> (most developers just don't name all things <code>X</code>) you won't have to worry about these <em>kinds</em> in most cases. They can, however, be a factor when designing macros.</p>
</blockquote>
</div></panel></tab>
</tabs>
<div>&nbsp;</div>
<h2 id="cargo">Cargo<sup id="target-cargo" class="target"><a href="#cargo">url</a></sup></h2>
<p>Commands and tools that are good to know.</p>
<div class="color-header tooling">
<table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody>
<tr><td><code>cargo init</code></td><td>Create a new project for the latest edition.</td></tr>
<tr><td><code>cargo <span class="cargo-prefix">b</span>uild</code></td><td>Build the project in debug mode (<code>--<span class="cargo-prefix">r</span>elease</code> for all optimization).</td></tr>
<tr><td><code>cargo <span class="cargo-prefix">c</span>heck</code></td><td>Check if project would compile (much faster).</td></tr>
<tr><td><code>cargo <span class="cargo-prefix">t</span>est</code></td><td>Run tests for the project.</td></tr>
<tr><td><code>cargo <span class="cargo-prefix">d</span>oc --open</code></td><td>Locally generate documentation for your code and dependencies.</td></tr>
<tr><td><code>cargo <span class="cargo-prefix">r</span>un</code></td><td>Run your project, if a binary is produced (main.rs).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>cargo run --bin b</code></td><td>Run binary <code>b</code>. Unifies feat. with other dependents (can be confusing).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>cargo run -p w</code></td><td>Run main of sub-worksp. <code>w</code>. Treats features more sanely.</td></tr>
<tr><td><code>cargo … --timings</code></td><td>Show what crates caused your build to take so long. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></td></tr>
<tr><td><code>cargo tree</code></td><td>Show dependency graph.</td></tr>
<tr><td><code>cargo +{nightly, stable} …</code></td><td>Use given toolchain for command, e.g., for 'nightly only' tools.</td></tr>
<tr><td><code>cargo +nightly …</code></td><td>Some nightly-only commands (substitute <code>…</code> with command below)</td></tr>
<tr><td><span class="hidemobile">    </span> <code>rustc -- -Zunpretty=expanded</code></td><td>Show expanded macros. <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td></tr>
<tr><td><code>rustup doc</code></td><td>Open offline Rust documentation (incl. the books), good on a plane!</td></tr>
</tbody></table>
</div>
<footnotes>
<p>Here <code>cargo <span class="cargo-prefix">b</span>uild</code> means you can either type <code>cargo build</code> or just <code>cargo b</code>; and <code>--<span class="cargo-prefix">r</span>elease</code> means it can be replaced with <code>-r</code>.</p>
</footnotes>
<div>&nbsp;</div>
<p>These are optional <code>rustup</code> components.
Install them with <code>rustup component add [tool]</code>.</p>
<div class="color-header tooling">
<table><thead><tr><th>Tool</th><th>Description</th></tr></thead><tbody>
<tr><td><code>cargo clippy</code></td><td>Additional (<a href="https://rust-lang.github.io/rust-clippy/master/">lints</a>) catching common API misuses and unidiomatic code. <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust-clippy" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>cargo fmt</code></td><td>Automatic code formatter (<code>rustup component add rustfmt</code>). <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustfmt" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<p>A large number of additional cargo plugins <a href="https://crates.io/categories/development-tools::cargo-plugins?sort=downloads"><strong>can be found here</strong></a>.</p>
<div>&nbsp;</div>
<h2 id="cross-compilation">Cross Compilation<sup id="target-cross-compilation" class="target"><a href="#cross-compilation">url</a></sup></h2>
<!-- <div class="steps"> -->
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<p>🔘 Check <a href="https://doc.rust-lang.org/rustc/platform-support.html">target is supported</a>.</p>
<p>🔘 Install target via <strong><code>rustup target install aarch64-linux-android</code></strong> (for example).</p>
<p>🔘 Install native toolchain (required to <em>link</em>, depends on target).</p>
<p>Get from target vendor (Google, Apple, …), might not be available on all hosts (e.g., no iOS toolchain on Windows).</p>
<p><strong>Some toolchains require additional build steps</strong> (e.g., Android's <code>make-standalone-toolchain.sh</code>).</p>
<p>🔘 Update <strong><code>~/.cargo/config.toml</code></strong> like this:</p>
<pre><code>[target.aarch64-linux-android]
linker = &quot;[PATH_TO_TOOLCHAIN]&#x2F;aarch64-linux-android&#x2F;bin&#x2F;aarch64-linux-android-clang&quot;
</code></pre>
<p>or</p>
<pre><code>[target.aarch64-linux-android]
linker = &quot;C:&#x2F;[PATH_TO_TOOLCHAIN]&#x2F;prebuilt&#x2F;windows-x86_64&#x2F;bin&#x2F;aarch64-linux-android21-clang.cmd&quot;
</code></pre>
<p>🔘 Set <strong>environment variables</strong> (optional, wait until compiler complains before setting):</p>
<pre><code>set CC=C:\[PATH_TO_TOOLCHAIN]\prebuilt\windows-x86_64\bin\aarch64-linux-android21-clang.cmd
set CXX=C:\[PATH_TO_TOOLCHAIN]\prebuilt\windows-x86_64\bin\aarch64-linux-android21-clang.cmd
set AR=C:\[PATH_TO_TOOLCHAIN]\prebuilt\windows-x86_64\bin\aarch64-linux-android-ar.exe
…
</code></pre>
<p>Whether you set them depends on how compiler complains, not necessarily all are needed.</p>
<blockquote>
<p>Some platforms / configurations can be <strong>extremely sensitive</strong> how paths are specified (e.g., <code>\</code> vs <code>/</code>) and quoted.</p>
</blockquote>
<p>✔️ Compile with <strong><code>cargo build --target=aarch64-linux-android</code></strong></p>
<!-- End overflow area -->
</div>
</div>
<!-- End steps  -->
<!-- </div> -->
<div>&nbsp;</div>
<h2 id="tooling-directives">Tooling Directives<sup id="target-tooling-directives" class="target"><a href="#tooling-directives">url</a></sup></h2>
<p>Special tokens embedded in source code used by tooling or preprocessing.</p>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-preprocessing-1" name="tab-group-preprocessing" checked>
<label for="tab-preprocessing-1"><b>Macros</b></label>
<panel><div class="color-header undefined-color-3">
<fixed-2-column class="color-header special_example">
<!-- Tool: **Preprocessor (Automatic)** -->
<!-- ```
macro_rules! my_macro {
    ($x:ty) => { ... }
}
``` -->
<p>Inside a <strong>declarative</strong> <a href="https://doc.rust-lang.org/book/ch19-06-macros.html#declarative-macros-with-macro_rules-for-general-metaprogramming" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <strong>macro by example</strong> <a href="https://doc.rust-lang.org/book/ch19-06-macros.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/macros.html#macro_rules" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/macros-by-example.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <code>macro_rules!</code> implementation these work:</p>
<table><thead><tr><th>Within Macros</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>$x:ty</code></td><td>Macro capture (here a type).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:item</code></td><td>An item, like a function, struct, module, etc.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:block</code></td><td>A block <code>{}</code> of statements or expressions, e.g., <code>{ let x = 5; }</code></td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:stmt</code></td><td>A statement, e.g., <code>let x = 1 + 1;</code>, <code>String::new();</code> or <code>vec![];</code></td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:expr</code></td><td>An expression, e.g., <code>x</code>, <code>1 + 1</code>, <code>String::new()</code> or <code>vec![]</code></td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:pat</code></td><td>A pattern, e.g., <code>Some(t)</code>, <code>(17, 'a')</code> or <code>_</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:ty</code></td><td>A type, e.g., <code>String</code>, <code>usize</code> or <code>Vec&lt;u8&gt;</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:ident</code></td><td>An identifier, for example in <code>let x = 0;</code> the identifier is <code>x</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:path</code></td><td>A path (e.g., <code>foo</code>, <code>::std::mem::replace</code>, <code>transmute::&lt;_, int&gt;</code>).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:literal</code></td><td>A literal (e.g., <code>3</code>, <code>&quot;foo&quot;</code>, <code>b&quot;bar&quot;</code>, etc.).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:lifetime</code></td><td>A lifetime (e.g., <code>'a</code>, <code>'static</code>, etc.).</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:meta</code></td><td>A meta item; the things that go inside <code>#[…]</code> and <code>#![…]</code> attributes.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:vis</code></td><td>A visibility modifier;  <code>pub</code>, <code>pub(crate)</code>, etc.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>$x:tt</code></td><td>A single token tree, <a href="https://stackoverflow.com/a/40303308">see here</a> for more details.</td></tr>
<tr><td><code>$crate</code></td><td>Special hygiene variable, crate where macros is defined. <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></td></tr>
</tbody></table>
</fixed-2-column>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-preprocessing-2" name="tab-group-preprocessing">
<label for="tab-preprocessing-2"><b>Documentation</b></label>
<panel><div class="color-header undefined-color-2">
<fixed-2-column  class="color-header special_example">
<!-- ```
/// Accepts an [`S`].
///
/// ```rust
///     f(s);
/// ```
``` -->
<p>Inside a <strong>doc comment</strong> <a href="https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html#making-useful-documentation-comments" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/stable/rust-by-example/meta&#x2F;doc.html#documentation" title="See this topic in 'Rust by Example'."><sup class="entry">EX</sup></a> <a href="https://doc.rust-lang.org/stable/reference/comments.html#doc-comments" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> these work:</p>
<table><thead><tr><th>Within Doc Comments</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>```…```</code></td><td>Include a <a href="https://doc.rust-lang.org/rustdoc/documentation-tests.html"><strong>doc test</strong></a> (doc code running on <code>cargo test</code>).</td></tr>
<tr><td><code>```X,Y …```</code></td><td>Same, and include optional configurations; with <code>X</code>, <code>Y</code> being …</td></tr>
<tr><td><span class="hidemobile">    </span> <code style="color: gray;">rust</code></td><td>Make it explicit test is written in Rust; implied by Rust tooling.</td></tr>
<tr><td><span class="hidemobile">    </span> <code style="color: gray; opacity: 0.3;">-</code></td><td>Compile test. Run test. Fail if panic. <strong>Default behavior</strong>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code style="color: gray;">should_panic</code></td><td>Compile test. Run test. Execution should panic. If not, fail test.</td></tr>
<tr><td><span class="hidemobile">    </span> <code style="color: gray;">no_run</code></td><td>Compile test. Fail test if code can't be compiled, Don't run test.</td></tr>
<tr><td><span class="hidemobile">    </span> <code style="color: gray;">compile_fail</code></td><td>Compile test but fail test if code <em>can</em> be compiled.</td></tr>
<tr><td><span class="hidemobile">    </span> <code style="color: gray;">ignore</code></td><td>Do not compile. Do not run. Prefer option above instead.</td></tr>
<tr><td><span class="hidemobile">    </span> <code style="color: gray;">edition2018</code></td><td>Execute code as Rust '18; default is '15.</td></tr>
<tr><td><code>#</code></td><td>Hide line from documentation (<code>```   # use x::hidden; ```</code>).</td></tr>
<tr><td><code>[`S`]</code></td><td>Create a link to struct, enum, trait, function, … <code>S</code>.</td></tr>
<tr><td><code>[`S`](crate::S)</code></td><td>Paths can also be used, in the form of markdown links.</td></tr>
</tbody></table>
</fixed-2-column>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-preprocessing-7" name="tab-group-preprocessing">
<label for="tab-preprocessing-7"><b><code>#![globals]</code></b></label>
<panel><div class="color-header undefined-color-3">
<!-- ```
// Attributes usually found in toplevel project file.
#![no_std]
#![feature(xxx)]
``` -->
<fixed-3-column  class="color-header special_example">
<p>Attributes affecting the whole crate or app:</p>
<table><thead><tr><th>Opt-Out's</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#![no_std]</code></td><td><code>C</code></td><td>Don't (automatically) import <strong><code>std</code></strong><a href="https://doc.rust-lang.org/std&#x2F;"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> ; use <strong><code>core</code></strong><a href="https://doc.rust-lang.org/core&#x2F;"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> instead. <a href="https://doc.rust-lang.org/stable/reference/names&#x2F;preludes.html#the-no_std-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#![no_implicit_prelude]</code></td><td><code>CM</code></td><td>Don't add <strong><code>prelude</code></strong><a href="https://doc.rust-lang.org/std&#x2F;prelude&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a>, need to manually import <code>None</code>, <code>Vec</code>, … <a href="https://doc.rust-lang.org/stable/reference/names&#x2F;preludes.html#the-no_implicit_prelude-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#![no_main]</code></td><td><code>C</code></td><td>Don't emit <code>main()</code> in apps if you do that yourself. <a href="https://doc.rust-lang.org/stable/reference/crates-and-source-files.html#the-no_main-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<!-- | `#![no_builtins]` | `C` | Does ... something ... probably important. <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a> <pre data-shortcode><a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;codegen.html#the-no_builtins-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></pre>| -->
<div>&nbsp;</div>
<table><thead><tr><th>Opt-In's</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#![feature(a, b, c)]</code></td><td><code>C</code></td><td>Rely on f. that may not get stabilized, <em>c.</em> <a href="https://doc.rust-lang.org/unstable-book/the-unstable-book.html"><strong>Unstable Book</strong></a>. <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Builds</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#![windows_subsystem = &quot;x&quot;]</code></td><td><code>C</code></td><td>On Windows, make a <code>console</code> or <code>windows</code> app. <a href="https://doc.rust-lang.org/stable/reference/runtime.html#the-windows_subsystem-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>#![crate_name = &quot;x&quot;]</code></td><td><code>C</code></td><td>Specify current crate name, e.g., when not using <code>cargo</code>. <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a> <a href="https://doc.rust-lang.org/stable/reference/crates-and-source-files.html#the-crate_name-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>#![crate_type = &quot;bin&quot;]</code></td><td><code>C</code></td><td>Specify current crate type (<code>bin</code>, <code>lib</code>, <code>dylib</code>, <code>cdylib</code>, …). <a href="https://doc.rust-lang.org/stable/reference/linkage.html" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>#![recursion_limit = &quot;123&quot;]</code></td><td><code>C</code></td><td>Set <em>compile-time</em> recursion limit for deref, macros, … <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;limits.html#the-recursion_limit-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
<tr><td><code>#![type_length_limit = &quot;456&quot;]</code></td><td><code>C</code></td><td>Limits maximum number of type substitutions. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;limits.html#the-type_length_limit-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Handlers</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[panic_handler]</code></td><td><code>F</code></td><td>Make some <code>fn(&amp;PanicInfo) -&gt; !</code> app's <strong>panic handler</strong>. <a href="https://doc.rust-lang.org/stable/reference/runtime.html#the-panic_handler-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[alloc_error_handler]</code></td><td><code>F</code></td><td>Make some <code>fn(Layout) -&gt; !</code> the <strong>allocation fail. handler</strong>. <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;51540" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td></tr>
<tr><td><code>#[global_allocator]</code></td><td><code>S</code></td><td>Make static item impl. <code>GlobalAlloc</code> <a href="https://doc.rust-lang.org/alloc&#x2F;alloc&#x2F;trait.GlobalAlloc.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <strong>global allocator</strong>. <a href="https://doc.rust-lang.org/stable/reference/runtime.html#the-global_allocator-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
</fixed-3-column>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-preprocessing-4" name="tab-group-preprocessing">
<label for="tab-preprocessing-4"><b><code>#[code]</code></b></label>
<panel><div class="color-header undefined-color-3">
<p>Attributes primarily governing emitted code:</p>
<fixed-3-column  class="color-header special_example">
<table><thead><tr><th>Developer UX</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[non_exhaustive]</code></td><td><code>T</code></td><td>Future-proof <code>struct</code> or <code>enum</code>; hint it may grow in future. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;type_system.html#the-non_exhaustive-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[path = &quot;x.rs&quot;]</code></td><td><code>M</code></td><td>Get module from non-standard file. <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;modules.html#the-path-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Codegen</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[inline]</code></td><td><code>F</code></td><td>Nicely suggest compiler should inline function at call sites. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;codegen.html#the-inline-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[inline(always)]</code></td><td><code>F</code></td><td>Emphatically threaten compiler to inline call, or else. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;codegen.html#the-inline-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[inline(never)]</code></td><td><code>F</code></td><td>Instruct compiler to feel sad if it still inlines the function. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;codegen.html#the-inline-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cold]</code></td><td><code>F</code></td><td>Hint that function probably isn't going to be called. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;codegen.html#the-cold-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[target_feature(enable=&quot;x&quot;)]</code></td><td><code>F</code></td><td>Enable CPU feature (e.g., <code>avx2</code>) for code of <code>unsafe fn</code>. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;codegen.html#the-target_feature-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[track_caller]</code></td><td><code>F</code></td><td>Allows <code>fn</code> to find <strong><code>caller</code></strong><a href="https://doc.rust-lang.org/core&#x2F;panic&#x2F;struct.Location.html#method.caller"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> for better panic messages. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;codegen.html#the-track_caller-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[repr(X)]</code><sup>1</sup></td><td><code>T</code></td><td>Use another representation instead of the default <strong><code>rust</code></strong> <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-default-representation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> one:</td></tr>
<tr><td><span class="hidemobile">    </span> <code>#[repr(C)]</code></td><td><code>T</code></td><td>Use a C-compatible (f. FFI), predictable (f. <code>transmute</code>) layout. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-c-representation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>#[repr(C, u8)]</code></td><td><code>enum</code></td><td>Give <code>enum</code> discriminant the specified type. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-c-representation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>#[repr(transparent)]</code></td><td><code>T</code></td><td>Give single-element type same layout as contained field. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-transparent-representation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>#[repr(packed(1))]</code></td><td><code>T</code></td><td>Lower align. of struct and contained fields, mildly UB prone. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-alignment-modifiers" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>#[repr(align(8))]</code></td><td><code>T</code></td><td>Raise alignment of struct to given value, e.g., for SIMD types. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-alignment-modifiers" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<!-- <div>&nbsp;</div>

| Representation | On | Explanation |
|-------|---|-------------|
| `-` | `T`  | In absence of `#[repr]` the **`rust` representation** is used <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-default-representation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> |
| `#[repr(C)]` | `T`  | Use a predictable, C-compatible representation. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-c-representation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>|
| `#[repr(C, u8)]` | `enum`  | Give `enum` discriminant the specified type. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-c-representation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>|
| `#[repr(transparent)]` | `T`  | Give single-element type same layout as contained field. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-transparent-representation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>|
| `#[repr(packed(1))]` | `T`  | Lower alignment of struct and contained fields, mildly UB prone. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-alignment-modifiers" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>|
| `#[repr(align(8))]` | `T`  | Raise alignment of struct to given value, e.g., for SIMD types. <a href="https://doc.rust-lang.org/stable/reference/type-layout.html#the-alignment-modifiers" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>| -->
<footnotes>
<p><sup>1</sup> Some representation modifiers can be combined, e.g., <code>#[repr(C, packed(1))]</code>.</p>
</footnotes>
<div>&nbsp;</div>
<table><thead><tr><th>Linking</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[no_mangle]</code></td><td><code>*</code></td><td>Use item name directly as symbol name, instead of mangling.  <a href="https://doc.rust-lang.org/stable/reference/abi.html#the-no_mangle-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[no_link]</code></td><td><code>X</code></td><td>Don't link <code>extern crate</code> when only wanting macros. <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;extern-crates.html#the-no_link-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[link(name=&quot;x&quot;, kind=&quot;y&quot;)]</code></td><td><code>X</code></td><td>Native lib to link against when looking up symbol. <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;external-blocks.html#the-link-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[link_name = &quot;foo&quot;]</code></td><td><code>F</code></td><td>Name of symbol to search for resolving <code>extern fn</code>. <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;external-blocks.html#the-link_name-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[link_section = &quot;.sample&quot;]</code></td><td><code>FS</code></td><td>Section name of object file where item should be placed. <a href="https://doc.rust-lang.org/stable/reference/abi.html#the-link_section-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[export_name = &quot;foo&quot;]</code></td><td><code>FS</code></td><td>Export a <code>fn</code> or <code>static</code> under a different name. <a href="https://doc.rust-lang.org/stable/reference/abi.html#the-export_name-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[used]</code></td><td><code>S</code></td><td>Don't optimize away <code>static</code> variable despite it looking unused. <a href="https://doc.rust-lang.org/stable/reference/abi.html#the-used-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
</fixed-3-column>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-preprocessing-3" name="tab-group-preprocessing">
<label for="tab-preprocessing-3"><b><code>#[quality]</code></b></label>
<panel><div class="color-header undefined-color-3">
<p>Attributes used by Rust tools to improve code quality:</p>
<fixed-3-column  class="color-header special_example">
<table><thead><tr><th>Code Patterns</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[allow(X)]</code></td><td><code>*</code></td><td>Instruct <code>rustc</code> / <code>clippy</code> to ign. class <code>X</code> of possible issues. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;diagnostics.html#lint-check-attributes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[warn(X)]</code> <sup>1</sup></td><td><code>*</code></td><td>… emit a warning, mixes well with <code>clippy</code> lints. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a> <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;diagnostics.html#lint-check-attributes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[deny(X)]</code> <sup>1</sup></td><td><code>*</code></td><td>… fail compilation. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;diagnostics.html#lint-check-attributes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[forbid(X)]</code> <sup>1</sup></td><td><code>*</code></td><td>… fail compilation and prevent subsequent <code>allow</code> overrides. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;diagnostics.html#lint-check-attributes" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[deprecated = &quot;msg&quot;]</code></td><td><code>*</code></td><td>Let your users know you made a design mistake. <a href="https://doc.rust-lang.org/stable/reference/diagnostics.html#the-deprecated-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[must_use = &quot;msg&quot;]</code></td><td><code>FTX</code></td><td>Makes compiler check return value is <em>processed</em> by caller. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a> <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;diagnostics.html#the-must_use-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<footnotes>
<p><sup>1</sup> <a class="tooltip" title="Author's opinion."><sup>💬</sup></a> There is some debate which one is the <em>best</em> to ensure high quality crates. Actively maintained multi-dev crates probably benefit from more aggressive <code>deny</code> or <code>forbid</code> lints; less-regularly updated ones probably more from conservative use of <code>warn</code> (as future compiler or <code>clippy</code> updates may suddenly break otherwise working code with minor issues).</p>
</footnotes>
<div>&nbsp;</div>
</fixed-3-column>
<fixed-3-column  class="color-header special_example">
<table><thead><tr><th>Tests</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[test]</code></td><td><code>F</code></td><td>Marks the function as a test, run with <code>cargo test</code>. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a> <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;testing.html#the-test-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[ignore = &quot;msg&quot;]</code></td><td><code>F</code></td><td>Compiles but does not execute some <code>#[test]</code> for now. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;testing.html#the-ignore-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[should_panic]</code></td><td><code>F</code></td><td>Test must <code>panic!()</code> to actually succeed. <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;testing.html#the-ignore-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[bench]</code></td><td><code>F</code></td><td>Mark function in <code>bench/</code> as benchmark for <code>cargo bench</code>. <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a> <a href="https://doc.rust-lang.org/stable/reference/" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Formatting</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[rustfmt::skip]</code></td><td><code>*</code></td><td>Prevent <code>cargo fmt</code> from cleaning up item. <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustfmt" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#![rustfmt::skip::macros(x)]</code></td><td><code>CM</code></td><td>… from cleaning up macro <code>x</code>. <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustfmt" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#![rustfmt::skip::attributes(x)]</code></td><td><code>CM</code></td><td>… from cleaning up attribute <code>x</code>. <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rustfmt" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
</tbody></table>
</fixed-3-column>
<div>&nbsp;</div>
<fixed-3-column class="color-header special_example extra-wide">
<table><thead><tr><th>Documentation</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[doc = &quot;Explanation&quot;]</code></td><td><code>*</code></td><td>Same as adding a <code>///</code> doc comment. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustdoc&#x2F;the-doc-attribute.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#[doc(alias = &quot;other&quot;)]</code></td><td><code>*</code></td><td>Provide other name for search in docs. <a href="https:&#x2F;&#x2F;github.com&#x2F;rust-lang&#x2F;rust&#x2F;issues&#x2F;50146" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#[doc(hidden)]</code></td><td><code>*</code></td><td>Prevent item from showing up in docs. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustdoc&#x2F;write-documentation&#x2F;the-doc-attribute.html#hidden" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#![doc(html_favicon_url = &quot;&quot;)]</code></td><td><code>C</code></td><td>Sets the <code>favicon</code> for the docs. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustdoc&#x2F;write-documentation&#x2F;the-doc-attribute.html#html_favicon_url" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#![doc(html_logo_url  = &quot;&quot;)]</code></td><td><code>C</code></td><td>The logo used in the docs. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustdoc&#x2F;write-documentation&#x2F;the-doc-attribute.html#html_logo_url" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#![doc(html_playground_url  = &quot;&quot;)]</code></td><td><code>C</code></td><td>Generates <code>Run</code> buttons and uses given service. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustdoc&#x2F;write-documentation&#x2F;the-doc-attribute.html#html_playground_url" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#![doc(html_root_url  = &quot;&quot;)]</code></td><td><code>C</code></td><td>Base URL for links to external crates. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustdoc&#x2F;write-documentation&#x2F;the-doc-attribute.html#html_root_url" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
<tr><td><code>#![doc(html_no_source)]</code></td><td><code>C</code></td><td>Prevents source from being included in docs. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustdoc&#x2F;write-documentation&#x2F;the-doc-attribute.html#html_no_source" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td></tr>
</tbody></table>
<!-- | `#![doc(issue_tracker_base_url  = "")]` | `C` | Mostly for `std::`, where issue numbers link. <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustdoc&#x2F;the-doc-attribute.html#issue_tracker_base_url" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a>| -->
</fixed-3-column>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-preprocessing-8" name="tab-group-preprocessing">
<label for="tab-preprocessing-8"><b><code>#[macros]</code></b></label>
<panel><div class="color-header undefined-color-3">
<fixed-3-column  class="color-header special_example">
<p>Attributes related to the creation and use of macros:</p>
<table><thead><tr><th>Macros By Example</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[macro_export]</code></td><td><code>!</code></td><td>Export <code>macro_rules!</code> as <code>pub</code> on crate level <a href="https://doc.rust-lang.org/stable/reference/macros-by-example.html#path-based-scope" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[macro_use]</code></td><td><code>MX</code></td><td>Let macros persist past mod.; or import from <code>extern crate</code>. <a href="https://doc.rust-lang.org/stable/reference/macros-by-example.html#the-macro_use-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Proc Macros</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[proc_macro]</code></td><td><code>F</code></td><td>Mark <code>fn</code> as <strong>function-like</strong> procedural <em>m.</em> callable as <code>m!()</code>. <a href="https://doc.rust-lang.org/stable/reference/procedural-macros.html#function-like-procedural-macros" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[proc_macro_derive(Foo)]</code></td><td><code>F</code></td><td>Mark <code>fn</code> as <strong>derive macro</strong> which can <code>#[derive(Foo)]</code>. <a href="https://doc.rust-lang.org/stable/reference/procedural-macros.html#derive-macros" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[proc_macro_attribute]</code></td><td><code>F</code></td><td>Mark <code>fn</code> as <strong>attribute macro</strong> for new <code>#[x]</code>. <a href="https://doc.rust-lang.org/stable/reference/procedural-macros.html#attribute-macros" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Derives</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[derive(X)]</code></td><td><code>T</code></td><td>Let some proc macro provide a goodish <code>impl</code> of <code>trait X</code>. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a> <a href="https://doc.rust-lang.org/stable/reference/" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<!-- | `#[derive(Eq)]` |  | xxx<a href="https://doc.rust-lang.org/stable/reference/" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a>|
| `#[derive(PartialEq)]` | |  xxx|
| `#[derive(Ord)]` | |  xxx|
| `#[derive(PartialOrd)]` | |  xxx|
| `#[derive(Clone)]` | |  xxx|
| `#[derive(Copy)]` | |  xxx|
| `#[derive(Hash)]` | |  xxx|
| `#[derive(Default)]` | |  xxx|
| `#[derive(Debug)]` | |  xxx| -->
</fixed-3-column>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-preprocessing-5" name="tab-group-preprocessing">
<label for="tab-preprocessing-5"><b><code>#[cfg]</code></b></label>
<panel><div class="color-header undefined-color-3">
<p>Attributes governing conditional compilation:</p>
<fixed-3-column class="color-header special_example extra-wide">
<table><thead><tr><th>Config Attributes</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[cfg(X)]</code></td><td><code>*</code></td><td>Include item if configuration <code>X</code> holds. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#the-cfg-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(all(X, Y, Z))]</code></td><td><code>*</code></td><td>Include item if all options hold. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#conditional-compilation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(any(X, Y, Z))]</code></td><td><code>*</code></td><td>Include item if at least one option holds. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#conditional-compilation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(not(X))]</code></td><td><code>*</code></td><td>Include item if <code>X</code> does not hold. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#conditional-compilation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg_attr(X, foo = &quot;msg&quot;)]</code></td><td><code>*</code></td><td>Apply <code>#[foo = &quot;msg&quot;]</code> if configuration <code>X</code> holds. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#the-cfg_attr-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
<div>&nbsp;</div>
<blockquote>
<p>⚠️ Note, options can generally be set multiple times, i.e., the same key can show up with multiple values. One can expect <code>#[cfg(target_feature = &quot;avx&quot;)]</code> <strong>and</strong> <code>#[cfg(target_feature = &quot;avx2&quot;)]</code> to be true at the same time.</p>
</blockquote>
<div>&nbsp;</div>
<table><thead><tr><th>Known Options</th><th>On</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>#[cfg(target_arch = &quot;x86_64&quot;)]</code></td><td><code>*</code></td><td>The CPU architecture crate is compiled for. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#target_arch" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(target_feature = &quot;avx&quot;)]</code></td><td><code>*</code></td><td>Whether a particular class of instructions is avail. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#target_feature" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(target_os = &quot;macos&quot;)]</code></td><td><code>*</code></td><td>Operating system your code will run on. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#target_os" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(target_family = &quot;unix&quot;)]</code></td><td><code>*</code></td><td>Family operating system belongs to. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#target_family" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(target_env = &quot;msvc&quot;)]</code></td><td><code>*</code></td><td>How DLLs and functions are interf. with on OS. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#target_env" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(target_endian = &quot;little&quot;)]</code></td><td><code>*</code></td><td>Main reason your new zero-cost prot. fails. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#target_endian" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(target_pointer_width = &quot;64&quot;)]</code></td><td><code>*</code></td><td>How many bits ptrs, <code>usize</code> and words have. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#target_pointer_width" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(target_vendor = &quot;apple&quot;)]</code></td><td><code>*</code></td><td>Manufacturer of target. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#target_vendor" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(debug_assertions)]</code></td><td><code>*</code></td><td>Whether <code>debug_assert!()</code> &amp; co. would panic. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#debug_assertions" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(panic = &quot;unwind&quot;)]</code></td><td><code>*</code></td><td>Whether <code>unwind</code> or <code>abort</code> will happen on panic. <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></td></tr>
<tr><td><code>#[cfg(proc_macro)]</code></td><td><code>*</code></td><td>Whether crate compiled as proc macro. <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#proc_macro" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(test)]</code></td><td><code>*</code></td><td>Whether compiled with <code>cargo test</code>. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a> <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#test" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td><code>#[cfg(feature = &quot;foo&quot;)]</code></td><td><code>*</code></td><td>When your crate was compiled with <em>f.</em> <code>foo</code>. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a> <a href="https://doc.rust-lang.org/stable/reference/conditional-compilation.html#conditional-compilation" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
</tbody></table>
</fixed-3-column>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-preprocessing-6" name="tab-group-preprocessing">
<label for="tab-preprocessing-6"><b><code>build.rs</code></b></label>
<panel><div class="color-header undefined-color-3">
<p>Environment variables and outputs related to the pre-build script.</p>
<fixed-2-column class="color-header special_example extra-wide">
<table><thead><tr><th>Input Environment</th><th>Explanation <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;cargo&#x2F;reference&#x2F;environment-variables.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></th></tr></thead><tbody>
<tr><td><code>CARGO_FEATURE_X</code></td><td>Environment variable set for each feature <code>x</code> activated.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>CARGO_FEATURE_SOMETHING</code></td><td>If feature <code>something</code> were enabled.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>CARGO_FEATURE_SOME_FEATURE</code></td><td>If <em>f.</em> <code>some-feature</code> were enabled; dash <code>-</code> converted to <code>_</code>.</td></tr>
<tr><td><code>CARGO_CFG_X</code></td><td>Exposes cfg's; joins mult. opts. by <code>,</code> and converts <code>-</code> to <code>_</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>CARGO_CFG_TARGET_OS=macos</code></td><td>If <code>target_os</code> were set to <code>macos</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>CARGO_CFG_TARGET_FEATURE=avx,avx2</code></td><td>If <code>target_feature</code> were set to <code>avx</code> and <code>avx2</code>.</td></tr>
<tr><td><code>OUT_DIR</code></td><td>Where output should be placed.</td></tr>
<tr><td><code>TARGET</code></td><td>Target triple being compiled for.</td></tr>
<tr><td><code>HOST</code></td><td>Host triple (running this build script).</td></tr>
<tr><td><code>PROFILE</code></td><td>Can be <code>debug</code> or <code>release</code>.</td></tr>
</tbody></table>
<footnotes>
<p>Available in <code>build.rs</code> via <code>env::var()?</code>. List not exhaustive.</p>
</footnotes>
</fixed-2-column>
<fixed-2-column class="color-header special_example extra-wide">
<div>&nbsp;</div>
<table><thead><tr><th>Output String</th><th>Explanation <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;cargo&#x2F;reference&#x2F;build-scripts.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></th></tr></thead><tbody>
<tr><td><code>cargo:rerun-if-changed=PATH</code></td><td>(Only) run this <code>build.rs</code> again if <code>PATH</code> changed.</td></tr>
<tr><td><code>cargo:rerun-if-env-changed=VAR</code></td><td>(Only) run this <code>build.rs</code> again if environment <code>VAR</code> changed.</td></tr>
<tr><td><code>cargo:rustc-link-lib=[KIND=]NAME</code></td><td>Link native library as if via <code>-l</code> option.</td></tr>
<tr><td><code>cargo:rustc-link-search=[KIND=]PATH</code></td><td>Search path for native library as if via <code>-L</code> option.</td></tr>
<tr><td><code>cargo:rustc-flags=FLAGS</code></td><td>Add special flags to compiler. <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></td></tr>
<tr><td><code>cargo:rustc-cfg=KEY[=&quot;VALUE&quot;]</code></td><td>Emit given <code>cfg</code> option to be used for later compilation.</td></tr>
<tr><td><code>cargo:rustc-env=VAR=VALUE </code></td><td>Emit var accessible via <code>env!()</code> in crate during compilation.</td></tr>
<tr><td><code>cargo:rustc-cdylib-link-arg=FLAG </code></td><td>When building a <code>cdylib</code>, pass linker flag.</td></tr>
<tr><td><code>cargo:warning=MESSAGE</code></td><td>Emit compiler warning.</td></tr>
</tbody></table>
<footnotes>
<p>Emitted from <code>build.rs</code> via <code>println!()</code>. List not exhaustive.</p>
</footnotes>
</fixed-2-column>
</div></panel></tab>
</tabs>
<footnotes>
<p>For the <em>On</em> column in attributes: <br>
<code>C</code> means on crate level (usually given as <code>#![my_attr]</code> in the top level file). <br>
<code>M</code> means on modules. <br>
<code>F</code> means on functions. <br>
<code>S</code> means on static. <br>
<code>T</code> means on types. <br>
<code>X</code> means something special. <br>
<code>!</code> means on macros. <br>
<code>*</code> means on almost any item. <br></p>
</footnotes>
<hr />
<h1 id="working-with-types">Working with Types<sup id="target-working-with-types" class="target"><a href="#working-with-types">url</a></sup></h1>
<h2 id="types-traits-generics">Types, Traits, Generics<sup id="target-types-traits-generics" class="target"><a href="#types-traits-generics">url</a></sup></h2>
<p>Allowing users to <em>bring their own types</em> and avoid code duplication.</p>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-types-1" name="tab-group-types" checked>
<label for="tab-types-1"><b>Types & Traits</b></label>
<panel><div>
<!-- Section -->
<generics-section id="ttg-types">
<header>Types</header>
<description>
<mini-zoo class="zoo">
    <entry>
        <type class="primitive"><code>u8</code></type>
    </entry>
    <entry>
        <type class="composed"><code>String</code></type>
    </entry>
    <entry>
        <type class="composed"><code>Device</code></type>
    </entry>
</mini-zoo>
<ul>
<li>Set of values with given semantics, layout, …</li>
</ul>
<mini-table>
<table><thead><tr><th>Type</th><th>Values</th></tr></thead><tbody>
<tr><td><code>u8</code></td><td><code>{ 0<sub>u8</sub>, 1<sub>u8</sub>, …, 255<sub>u8</sub> }</code></td></tr>
<tr><td><code>char</code></td><td><code>{ 'a', 'b', … '🦀' }</code></td></tr>
<tr><td><code>struct S(u8, char)</code></td><td><code>{ (0<sub>u8</sub>, 'a'), … (255<sub>u8</sub>, '🦀') }</code></td></tr>
</tbody></table>
<p><subtitle>Sample types and sample values.</subtitle></p>
</mini-table>
</description>
</generics-section>
<!-- Section -->
<generics-section id="ttg-equivalence">
<header>Type Equivalence and Conversions</header>
<description>
<mini-zoo class="zoo">
    <entry>
        <type class="primitive"><code>u8</code></type>
    </entry>
    <entry>
        <type class="primitive"><code>&u8</code></type>
    </entry>
    <entry>
        <type class="primitive"><code>&mut u8</code></type>
    </entry>
    <entry>
        <type class="primitive"><code>[u8; 1]</code></type>
    </entry>
    <entry>
        <type class="composed"><code>String</code></type>
    </entry>
</mini-zoo>
<!-- - Question: which of the types above is different from all others?
    - Trick question: all of these types are totally different -->
<ul>
<li>It may be obvious but   <code>u8</code>,    <code>&amp;u8</code>,    <code>&amp;mut u8</code>, are entirely different from each other</li>
<li>Any <code>t: T</code> only accepts values from exactly <code>T</code>, e.g.,
<ul>
<li><code>f(0_u8)</code> can't be called with <code>f(&amp;0_u8)</code>,</li>
<li><code>f(&amp;mut my_u8)</code> can't be called with <code>f(&amp;my_u8)</code>,</li>
<li><code>f(0_u8)</code> can't be called with <code>f(0_i8)</code>.</li>
</ul>
</li>
</ul>
<blockquote>
<p>Yes, <code>0 != 0</code> (in a mathematical sense) when it comes to types! In a language sense, the operation  <code>==(0<sub>u8</sub>, 0<sub>u16</sub>)</code> just isn't defined to prevent happy little accidents.</p>
</blockquote>
<mini-table>
<table><thead><tr><th>Type</th><th>Values</th></tr></thead><tbody>
<tr><td><code>u8</code></td><td><code>{ 0<sub>u8</sub>, 1<sub>u8</sub>, …, 255<sub>u8</sub> }</code></td></tr>
<tr><td><code>u16</code></td><td><code>{ 0<sub>u16</sub>, 1<sub>u16</sub>, …, 65_535<sub>u16</sub> }</code></td></tr>
<tr><td><code>&amp;u8</code></td><td><code>{ 0xffaa<sub>&amp;u8</sub>, 0xffbb<sub>&amp;u8</sub>, … }</code></td></tr>
<tr><td><code>&amp;mut u8</code></td><td><code>{ 0xffaa<sub>&amp;mut u8</sub>, 0xffbb<sub>&amp;mut u8</sub>, … }</code></td></tr>
</tbody></table>
<p><subtitle>How values differ between types.</subtitle></p>
</mini-table>
<ul>
<li>However, Rust might sometimes help to <strong>convert between types</strong><sup>1</sup>
<ul>
<li><strong>casts</strong> manually convert values of types, <code>0_i8 as u8</code></li>
<li><strong>coercions</strong>  <a href="#language-sugar" title="On this site, above."><sup>↑</sup></a> automatically convert types if safe<sup>2</sup>, <code>let x: &amp;u8 = &amp;mut 0_u8;</code></li>
</ul>
</li>
</ul>
<footnotes>
<p><sup>1</sup> Casts and coercions convert values from one set (e.g., <code>u8</code>) to another (e.g., <code>u16</code>), possibly adding CPU instructions to do so; and in such differ from <strong>subtyping</strong>, which would imply type and subtype are part of the same set (e.g., <code>u8</code> being subtype of <code>u16</code> and <code>0_u8</code> being the same as <code>0_u16</code>) where such a conversion would be purely a compile time check. Rust does not use subtyping for regular types (and <code>0_u8</code> <em>does</em> differ from <code>0_u16</code>) but sort-of for lifetimes. <a href="https:&#x2F;&#x2F;featherweightmusings.blogspot.com&#x2F;2014&#x2F;03&#x2F;subtyping-and-coercion-in-rust.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></p>
<p><sup>2</sup> Safety here is not just physical concept (e.g., <code>&amp;u8</code> can't be coerced to <code>&amp;u128</code>), but also whether 'history has shown that such a conversion would lead to programming errors'.</p>
</footnotes>
</description>
</generics-section>
<!-- Section -->
<generics-section id="ttg-impl-s">
<header>Implementations &mdash; <code>impl S { }</code></header>
<description>
<mini-zoo class="zoo">
    <entry>
        <type class="primitive"><code>u8</code></type>
        <impl><code>impl { … }</code></impl>
    </entry>
    <entry>
        <type class="composed"><code>String</code></type>
        <impl><code>impl { … }</code></impl>
    </entry>
    <entry>
        <type class="composed"><code>Port</code></type>
        <impl><code>impl { … }</code></impl>
    </entry>
</mini-zoo>
<pre><code>impl Port {
    fn f() { … }
}
</code></pre>
<ul>
<li>Types usually come with <strong>inherent implementations</strong>, <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;implementations.html#inherent-implementations" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> e.g., <code>impl Port {}</code>, behavior <em>related</em> to type:
<ul>
<li><strong>associated functions</strong> <code>Port::new(80)</code></li>
<li><strong>methods</strong> <code>port.close()</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>What's considered <em>related</em> is more philosophical than technical, nothing (except good taste) would prevent a <code>u8::play_sound()</code> from happening.</p>
</blockquote>
</description>
</generics-section>
<!-- Section -->
<generics-section id="ttg-traits">
<header>Traits &mdash; <code>trait T { }</code></header>
<description>
<mini-zoo class="zoo">
    <entry>
        <trait-impl>⌾ <code>Copy</code></trait-impl>
    </entry>
    <entry>
        <trait-impl>⌾ <code>Clone</code></trait-impl>
    </entry>
    <entry>
        <trait-impl>⌾ <code>Sized</code></trait-impl>
    </entry>
    <entry>
        <trait-impl>⌾ <code>ShowHex</code></trait-impl>
    </entry>
</mini-zoo>
<ul>
<li><strong>Traits</strong> …
<ul>
<li>are way to &quot;abstract&quot; behavior,</li>
<li>trait author declares semantically <em>this trait means X</em>,</li>
<li>other can implement (&quot;subscribe to&quot;) that behavior for their type.</li>
</ul>
</li>
<li>Think about trait as &quot;membership list&quot; for types:</li>
</ul>
<mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th>Copy Trait</th></tr>
        <tr class="subheader"><th><code>Self</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>u8</code></td></tr>
        <tr><td><code>u16</code></td></tr>
        <tr><td><code>…</code></td></tr>
    </tbody>
</table>
</mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th>Clone Trait</th></tr>
        <tr class="subheader"><th><code>Self</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>u8</code></td></tr>
        <tr><td><code>String</code></td></tr>
        <tr><td><code>…</code></td></tr>
    </tbody>
</table>
</mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th>Sized Trait</th></tr>
        <tr class="subheader"><th><code>Self</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>char</code></td></tr>
        <tr><td><code>Port</code></td></tr>
        <tr><td><code>…</code></td></tr>
    </tbody>
</table>
</mini-table>
<p><subtitle>Traits as membership tables, <code>Self</code> refers to the type included.</subtitle></p>
</mini-table>
<ul>
<li><strong>Whoever is part of that membership list will adhere to behavior of list.</strong></li>
<li>Traits can also include associated methods, functions, …</li>
</ul>
<pre><code>trait ShowHex {
    &#x2F;&#x2F; Must be implemented according to documentation.
    fn as_hex() -&gt; String;

    &#x2F;&#x2F; Provided by trait author.
    fn print_hex() {}
}
</code></pre>
<mini-zoo class="zoo">
    <entry>
        <trait-impl>⌾ <code>Copy</code></trait-impl>
    </entry>
</mini-zoo>
<pre><code>trait Copy { }
</code></pre>
<ul>
<li>Traits without methods often called <strong>marker traits</strong>.</li>
<li><code>Copy</code> is example marker trait, meaning <em>memory may be copied bitwise</em>.</li>
</ul>
<mini-zoo class="zoo">
    <entry>
        <trait-impl>⌾ <code>Sized</code></trait-impl>
    </entry>
</mini-zoo>
<ul>
<li>Some traits entirely outside explicit control</li>
<li><code>Sized</code> provided by compiler for types with <em>known size</em>; either this is, or isn't</li>
</ul>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Implementing Traits for Types &mdash; <code>impl T for S { }</code></header>
<description>
<pre><code>impl ShowHex for Port { … }
</code></pre>
<ul>
<li>Traits are implemented for types 'at some point'.</li>
<li>Implementation <code>impl A for B</code> add type <code>B</code> to the trait membership list:</li>
</ul>
<mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr><th>ShowHex Trait</th></tr>
        <tr class="subheader"><th><code>Self</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>Port</code></td></tr>
    </tbody>
</table>
</mini-table>
</mini-table>
<ul>
<li>Visually, you can think of the type getting a &quot;badge&quot; for its membership:</li>
</ul>
<mini-zoo class="zoo">
    <entry>
        <type class="primitive"><code>u8</code></type>
        <impl><code>impl { … }</code></impl>
        <trait-impl>⌾ <code>Sized</code></trait-impl>
        <trait-impl>⌾ <code>Clone</code></trait-impl>
        <trait-impl>⌾ <code>Copy</code></trait-impl>
    </entry>
    <entry>
        <type class="composed"><code>Device</code></type>
        <impl><code>impl { … }</code></impl>
        <trait-impl>⌾ <code>Transport</code></trait-impl>
    </entry>
    <entry>
        <type class="composed"><code>Port</code></type>
        <impl><code>impl { … }</code></impl>
        <trait-impl>⌾ <code>Sized</code></trait-impl>
        <trait-impl>⌾ <code>Clone</code></trait-impl>
        <trait-impl>⌾ <code>ShowHex</code></trait-impl>
    </entry>
</mini-zoo>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Traits vs. Interfaces</header>
<description>
<mini-zoo class="zoo">
    <person>👩‍🦰</person>
    <entry>
        <trait-impl>⌾ <code>Eat</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>🧔</person>
    <entry>
        <type class="composed"><code>Venison</code></type>
        <trait-impl>⌾ <code>Eat</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px; width: 130px;">
    <person></person>
    <entry>
        <code style="text-align:center; width: 100%;"></code>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>🎅</person>
    <entry>
        <code>venison.eat()</code>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<p><strong>Interfaces</strong></p>
<ul>
<li>In <strong>Java</strong>, Alice creates interface <code>Eat</code>.</li>
<li>When Bob authors <code>Venison</code>, he must decide if <code>Venison</code> implements <code>Eat</code> or not.</li>
<li>In other words, all membership must be exhaustively declared during type definition.</li>
<li>When using <code>Venison</code>, Santa can make use of behavior provided by <code>Eat</code>:</li>
</ul>
<pre><code>&#x2F;&#x2F; Santa imports `Venison` to create it, can `eat()` if he wants.
import food.Venison;

new Venison(&quot;rudolph&quot;).eat();
</code></pre>
<div>&nbsp;</div>
<div>&nbsp;</div>
<mini-zoo class="zoo">
    <person>👩‍🦰</person>
    <entry>
        <trait-impl>⌾ <code>Eat</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>🧔</person>
    <entry>
        <type class="composed"><code>Venison</code></type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>👩‍🦰</person> / <person>🧔</person>
    <entry>
        <type class="composed"><code>Venison</code></type>
        <code style="text-align:center; width: 100%;">+</code>
        <trait-impl>⌾ <code>Eat</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>🎅</person>
    <entry>
        <code>venison.eat()</code>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<p><strong>Traits</strong></p>
<ul>
<li>In <strong>Rust</strong>, Alice creates trait <code>Eat</code>.</li>
<li>Bob creates type <code>Venison</code> and decides not to implement <code>Eat</code> (he might not even know about <code>Eat</code>).</li>
<li>Someone<sup>*</sup> later decides adding <code>Eat</code> to <code>Venison</code> would be a really good idea.</li>
<li>When using <code>Venison</code> Santa must import <code>Eat</code> separately:</li>
</ul>
<pre><code>&#x2F;&#x2F; Santa needs to import `Venison` to create it, and import `Eat` for trait method.
use food::Venison;
use tasks::Eat;

&#x2F;&#x2F; Ho ho ho
Venison::new(&quot;rudolph&quot;).eat();
</code></pre>
<footnotes>
<p><sup>*</sup> To prevent two persons from implementing <code>Eat</code> differently Rust limits that choice to either Alice or Bob; that is, an <code>impl Eat for Venison</code> may only happen in the crate of <code>Venison</code> or in the crate of <code>Eat</code>. For details see coherence. <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a></p>
</footnotes>
</description>
</generics-section>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-types-2" name="tab-group-types">
<label for="tab-types-2"><b>Generics</b></label>
<panel><div>
<!-- Section -->
<generics-section>
<header>Type Constructors &mdash; <code>Vec&lt;&gt;</code></header>
<description>
<mini-zoo class="zoo">
    <entry>
        <type class="composed"><code>Vec&lt;u8&gt;</code></type>
    </entry>
    <entry>
        <type class="composed"><code>Vec&lt;char&gt;</code></type>
    </entry>
</mini-zoo>
<ul>
<li><code>Vec&lt;u8&gt;</code> is type &quot;vector of bytes&quot;; <code>Vec&lt;char&gt;</code> is type &quot;vector of chars&quot;, but what is <code>Vec&lt;&gt;</code>?</li>
</ul>
<mini-table>
<table><thead><tr><th>Construct</th><th>Values</th></tr></thead><tbody>
<tr><td><code>Vec&lt;u8&gt;</code></td><td><code>{ [], [1], [1, 2, 3], … }</code></td></tr>
<tr><td><code>Vec&lt;char&gt;</code></td><td><code>{ [], ['a'], ['x', 'y', 'z'], … }</code></td></tr>
<tr><td><code>Vec&lt;&gt;</code></td><td>-</td></tr>
</tbody></table>
<p><subtitle>Types vs type constructors.</subtitle></p>
</mini-table>
<mini-zoo class="zoo">
    <entry>
        <type class="generic dotted"><code>Vec&lt;&gt;</code></type>
    </entry>
</mini-zoo>
<ul>
<li><code>Vec&lt;&gt;</code> is no type, does not occupy memory, can't even be translated to code.</li>
<li><code>Vec&lt;&gt;</code> is <strong>type constructor</strong>, a &quot;template&quot; or &quot;recipe to create types&quot;
<ul>
<li>allows 3<sup>rd</sup> party to construct concrete type via parameter,</li>
<li>only then would this <code>Vec&lt;UserType&gt;</code> become real type itself.</li>
</ul>
</li>
</ul>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Generic Parameters &mdash; <code>&lt;T&gt;</code></header>
<description>
<mini-zoo class="zoo">
    <entry>
        <type class="generic dotted"><code>Vec&lt;T&gt;</code></type>
    </entry>
    <entry>
        <type class="generic dotted"><code>[T; 128]</code></type>
    </entry>
    <entry>
        <type class="generic dotted"><code>&T</code></type>
    </entry>
    <entry>
        <type class="generic dotted"><code>&mut T</code></type>
    </entry>
    <entry>
        <type class="generic dotted"><code>S&lt;T&gt;</code></type>
    </entry>
</mini-zoo>
<ul>
<li>Parameter for <code>Vec&lt;&gt;</code> often named <code>T</code> therefore <code>Vec&lt;T&gt;</code>.</li>
<li><code>T</code> &quot;variable name for type&quot; for user to plug in something specific, <code>Vec&lt;f32&gt;</code>, <code>S&lt;u8&gt;</code>, …</li>
</ul>
<mini-table>
<table><thead><tr><th>Type Constructor</th><th>Produces Family</th></tr></thead><tbody>
<tr><td><code>struct Vec&lt;T&gt; {}</code></td><td><code>Vec&lt;u8&gt;</code>, <code>Vec&lt;f32&gt;</code>, <code>Vec&lt;Vec&lt;u8&gt;&gt;</code>, …</td></tr>
<tr><td><code>[T; 128]</code></td><td><code>[u8; 128]</code>, <code>[char; 128]</code>, <code>[Port; 128]</code> …</td></tr>
<tr><td><code>&amp;T</code></td><td><code>&amp;u8</code>, <code>&amp;u16</code>, <code>&amp;str</code>,  …</td></tr>
</tbody></table>
<p><subtitle>Type vs type constructors.</subtitle></p>
</mini-table>
<pre><code>&#x2F;&#x2F; S&lt;&gt; is type constructor with parameter T; user can supply any concrete type for T.
struct S&lt;T&gt; {
    x: T
}

&#x2F;&#x2F; Within &#x27;concrete&#x27; code an existing type must be given for T.
fn f() {
    let x: S&lt;f32&gt; = S::new(0_f32);
}

</code></pre>
</description>
</generics-section>
<!-- Section -->
<generics-section >
<header>Const Generics &mdash; <code>[T; N]</code> and <code>S&lt;const N: usize&gt;</code></header>
<description>
<mini-zoo class="zoo">
    <entry>
        <type class="generic dotted"><code>[T; n]</code></type>
    </entry>
    <entry>
        <type class="generic dotted"><code>S&lt;const N&gt;</code></type>
    </entry>
</mini-zoo>
<ul>
<li>Some type constructors not only accept specific type, but also <strong>specific constant</strong>.</li>
<li><code>[T; n]</code> constructs array type holding <code>T</code> type <code>n</code> times.</li>
<li>For custom types declared as <code>MyArray&lt;T, const N: usize&gt;</code>.</li>
</ul>
<mini-table>
<table><thead><tr><th>Type Constructor</th><th>Produces Family</th></tr></thead><tbody>
<tr><td><code>[u8; N]</code></td><td><code>[u8; 0]</code>, <code>[u8; 1]</code>, <code>[u8; 2]</code>, …</td></tr>
<tr><td><code>struct S&lt;const N: usize&gt; {}</code></td><td><code>S&lt;1&gt;</code>, <code>S&lt;6&gt;</code>, <code>S&lt;123&gt;</code>,  …</td></tr>
</tbody></table>
<p><subtitle>Type constructors based on constant.</subtitle></p>
</mini-table>
<pre><code>let x: [u8; 4]; &#x2F;&#x2F; &quot;array of 4 bytes&quot;
let y: [f32; 16]; &#x2F;&#x2F; &quot;array of 16 floats&quot;

&#x2F;&#x2F; `MyArray` is type constructor requiring concrete type `T` and
&#x2F;&#x2F; concrete usize `N` to construct specific type.
struct MyArray&lt;T, const N: usize&gt; {
    data: [T; N],
}
</code></pre>
</description>
</generics-section>
<!-- Section -->
<!-- <generics-section >
<header>Generics in Types</header>
<description>

</description>
</generics-section> -->
<!-- Section -->
<generics-section >
<header>Bounds (Simple) &mdash; <code>where T: X</code></header>
<description>
<mini-zoo class="zoo">
    <person>🧔</person>
    <entry>
        <type class="generic dotted"><code>Num&lt;T&gt;</code></type>
    </entry>
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
    <person>🎅</person>
    <entry>
        <type class="composed"><code>Num&lt;u8&gt;</code></type>
    </entry>
    <entry>
        <type class="composed"><code>Num&lt;f32&gt;</code></type>
    </entry>
    <entry>
        <type class="composed"><code>Num&lt;Cmplx&gt;</code></type>
    </entry>
    <narrow-entry>
        <code style="text-align:center; width: 50px;">&nbsp;</code>
    </narrow-entry>
    <entry class="">
        <type class="primitive"><code>u8</code></type>
        <trait-impl>⌾ <code>Absolute</code></trait-impl>
        <trait-impl>⌾ <code>Dim</code></trait-impl>
        <trait-impl>⌾ <code>Mul</code></trait-impl>
    </entry>
    <entry class="grayed">
        <type class="composed"><code>Port</code></type>
        <trait-impl>⌾ <code>Clone</code></trait-impl>
        <trait-impl>⌾ <code>ShowHex</code></trait-impl>
    </entry>
</mini-zoo>
<ul>
<li>If <code>T</code> can be any type, how can we <em>reason</em> about (write code) for such a <code>Num&lt;T&gt;</code>?</li>
<li>Parameter <strong>bounds</strong>:
<ul>
<li>limit what types (<strong>trait bound</strong>) or values (<strong>const bound</strong> <a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a>) allowed,</li>
<li>we now can make use of these limits!</li>
</ul>
</li>
<li>Trait bounds act as &quot;membership check&quot;:</li>
</ul>
<mini-table>
<div style="display: inline-block;">
<pre><code>&#x2F;&#x2F; Type can only be constructed for some `T` if that
&#x2F;&#x2F; T is part of `Absolute` membership list.
struct Num&lt;T&gt; where T: Absolute {
    …
}

</code></pre>
</div>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th>Absolute Trait</th></tr>
        <tr class="subheader"><th><code>Self</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>u8</code></td></tr>
        <tr><td><code>u16</code></td></tr>
        <tr><td><code>…</code></td></tr>
    </tbody>
</table>
</mini-table>
</mini-table>
<!--
// Constant `N` must be `usize`
struct Arrayf32<const N: usize> {
    data: [f32; N],
} -->
<footnotes>
<p>We add bounds to the struct here. In practice it's nicer add bounds to the respective impl blocks instead, see later this section.</p>
</footnotes>
<!-- > Note to self, is `const N: usize` a "const bound"? It seemingly acts as one, limiting the choice of values for N (albeit to specific types only). -->
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Bounds (Compound) &mdash; <code>where T: X + Y</code></header>
<description>
<mini-zoo class="zoo">
    <entry class="grayed">
        <type class="primitive"><code>u8</code></type>
        <trait-impl>⌾ <code>Absolute</code></trait-impl>
        <trait-impl>⌾ <code>Dim</code></trait-impl>
        <trait-impl>⌾ <code>Mul</code></trait-impl>
    </entry>
    <entry class="grayed">
        <type class="primitive"><code>f32</code></type>
        <trait-impl>⌾ <code>Absolute</code></trait-impl>
        <trait-impl>⌾ <code>Mul</code></trait-impl>
    </entry>
    <entry class="grayed">
        <type class="primitive"><code>char</code></type>
    </entry>
    <entry>
        <type class="composed"><code>Cmplx</code></type>
        <trait-impl>⌾ <code>Absolute</code></trait-impl>
        <trait-impl>⌾ <code>Dim</code></trait-impl>
        <trait-impl>⌾ <code>Mul</code></trait-impl>
        <trait-impl>⌾ <code>DirName</code></trait-impl>
        <trait-impl>⌾ <code>TwoD</code></trait-impl>
    </entry>
    <entry class="grayed">
        <type class="composed"><code>Car</code></type>
        <trait-impl>⌾ <code>DirName</code></trait-impl>
    </entry>
</mini-zoo>
<pre><code>struct S&lt;T&gt;
where
    T: Absolute + Dim + Mul + DirName + TwoD
{ … }
</code></pre>
<ul>
<li>Long trait bounds can look intimidating.</li>
<li>In practice, each <code>+ X</code> addition to a bound merely cuts down space of eligible types.</li>
</ul>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Implementing Families &mdash; <code>impl&lt;&gt;</code></header>
<description>
<div>&nbsp;</div>
<p>When we write:</p>
<pre><code>impl&lt;T&gt; S&lt;T&gt; where T: Absolute + Dim + Mul {
    fn f(&amp;self, x: T) { … };
}
</code></pre>
<p>It can be read as:</p>
<ul>
<li>here is an implementation recipe for any type <code>T</code> (the <code>impl &lt;T&gt;</code> part),</li>
<li>where<!--sup>*</sup--> that type must be member of the <code>Absolute + Dim + Mul</code> traits,</li>
<li>you may add an implementation block to the type family <code>S&lt;&gt;</code>,</li>
<li>containing the methods …</li>
</ul>
<p>You can think of such <code>impl&lt;T&gt; … {} </code> code as <strong>abstractly implementing a family of behaviors</strong>. <a href="https://doc.rust-lang.org/stable/reference/items&#x2F;implementations.html#generic-implementations" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> Most notably, they allow 3<sup>rd</sup> parties to transparently materialize implementations similarly to how type constructors materialize types:</p>
<pre><code>&#x2F;&#x2F; If compiler encounters this, it will
&#x2F;&#x2F; - check `0` and `x` fulfill the membership requirements of `T`
&#x2F;&#x2F; - create two new version of `f`, one for `char`, another one for `u32`.
&#x2F;&#x2F; - based on &quot;family implementation&quot; provided
s.f(0_u32);
s.f(&#x27;x&#x27;);
</code></pre>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Blanket Implementations &mdash; <code>impl&lt;T&gt X for T { … }</code></header>
<description>
<div>&nbsp;</div>
<p>Can also write &quot;family implementations&quot; so they apply trait to many types:</p>
<pre><code>&#x2F;&#x2F; Also implements Serialize for any type if that type already implements ToHex
impl&lt;T&gt; Serialize for T where T: ToHex { … }
</code></pre>
<p>These are called <strong>blanket implementations</strong>.</p>
<mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th>ToHex</th></tr>
        <tr class="subheader"><th><code>Self</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>Port</code></td></tr>
        <tr><td><code>Device</code></td></tr>
        <tr><td><code>…</code></td></tr>
    </tbody>
</table>
</mini-table>
<div style="display: inline-block; width: 100px;">
<p>→  Whatever was in left table, may be added to right table, based on the following recipe (<code>impl</code>) →</p>
</div>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th>Serialize Trait</th></tr>
        <tr class="subheader"><th><code>Self</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>u8</code></td></tr>
        <tr><td><code>Port</code></td></tr>
        <tr><td><code>…</code></td></tr>
    </tbody>
</table>
</mini-table>
</mini-table>
<p>They can be neat way to give foreign types functionality in a modular way if they just implement another interface.</p>
</description>
</generics-section>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-types-3" name="tab-group-types">
<label for="tab-types-3"><b>Advanced Concepts</b><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></label>
<panel><div>
<!-- Section -->
<!-- <generics-section >
<header>Pseudo-Specialization</header>
<description>

</description>
</generics-section> -->
<!-- Section -->
<generics-section>
<header>Trait Parameters &mdash; <code>Trait&lt;In&gt; { type Out; } </code></header>
<description>
<div>&nbsp;</div>
<p>Notice how some traits can be &quot;attached&quot; multiple times, but others just once?</p>
<mini-zoo class="zoo">
    <entry style="left:300px; top: 25px;">
        <type class="composed"><code>Port</code></type>
        <trait-impl class="">⌾ <code>From&lt;u8&gt;</code></trait-impl>
        <trait-impl class="">⌾ <code>From&lt;u16&gt;</code></trait-impl>
    </entry>
    <entry style="left:400px; top: 25px;">
        <type class="composed"><code>Port</code></type>
        <trait-impl class="">⌾ <code>Deref</code></trait-impl>
        <associated-type class="grayed"><code>type u8;</code></associated-type>
    </entry>
</mini-zoo>
<!--
<mini-zoo class="zoo">
    <entry>
        <trait-impl class="">⌾ <code>A&lt;T&gt;</code></trait-impl>
    </entry>
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
    <entry>
        <trait-impl class="">⌾ <code>A&lt;u8&gt;</code></trait-impl>
    </entry>
    <entry>
        <trait-impl class="">⌾ <code>A&lt;f32&gt;</code></trait-impl>
    </entry>
    <entry>
        <trait-impl class="">⌾ <code>A&lt;str&gt;</code></trait-impl>
    </entry>
</mini-zoo>

<br>

<mini-zoo class="zoo">
    <entry>
        <trait-impl class="">⌾ <code>B</code></trait-impl>
        <associated-type class=""><code>type T;</code></associated-type>
    </entry>
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
    <entry>
        <trait-impl class="">⌾ <code>B</code></trait-impl>
        <associated-type class=""><code>T = u8;</code></associated-type>
    </entry>
</mini-zoo> -->
<br>
<div>&nbsp;</div>
<p>Why is that?</p>
<ul>
<li>Traits themselves can be generic over two <strong>kinds of parameters</strong>:
<ul>
<li><code>trait From&lt;I&gt; {}</code></li>
<li><code>trait Deref { type O; }</code></li>
</ul>
</li>
<li>Remember we said traits are &quot;membership lists&quot; for types and called the list <code>Self</code>?</li>
<li>Turns out, parameters <code>I</code> (for <strong>input</strong>) and <code>O</code> (for <strong>output</strong>) are just more <em>columns</em> to that trait's list:</li>
</ul>
<pre><code>impl From&lt;u8&gt; for u16 {}
impl From&lt;u16&gt; for u32 {}
impl Deref for Port { type O = u8; }
impl Deref for String { type O = str; }
</code></pre>
<mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th colspan="2">From</th></tr>
        <tr class="subheader"><th><code>Self</code></th><th><code>I</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>u16</code></td><td><code>u8</code></td></tr>
        <tr><td><code>u32</code></td><td><code>u16</code></td></tr>
        <tr><td colspan="2"><code>…</code></td></tr>
    </tbody>
</table>
</mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th colspan="2">Deref</th></tr>
        <tr class="subheader"><th><code>Self</code></th><th><code>O</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>Port</code></td><td><code>u8</code></td></tr>
        <tr><td><code>String</code></td><td><code>str</code></td></tr>
        <tr><td colspan="2"><code>…</code></td></tr>
    </tbody>
</table>
</mini-table>
<p><subtitle>Input and output parameters.</subtitle></p>
</mini-table>
<p>Now here's the twist,</p>
<ul>
<li><strong>any output <code>O</code> parameters must be uniquely determined by input parameters <code>I</code></strong>,</li>
<li>(in the same way as a relation <code>X Y</code> would represent a function),</li>
<li><code>Self</code> counts as an input.</li>
</ul>
<p>A more complex example:</p>
<pre><code>trait Complex&lt;I1, I2&gt; {
    type O1;
    type O2;
}
</code></pre>
<ul>
<li>this creates a relation of types named <code>Complex</code>,</li>
<li>with 3 inputs (<code>Self</code> is always one) and 2 outputs, and it holds <code>(Self, I1, I2) =&gt; (O1, O2)</code></li>
</ul>
<mini-table>
<table>
    <thead>
        <tr style=""><th colspan="5">Complex</th></tr>
        <tr class="subheader"><th><code>Self [I]</code></th><th><code>I1</code></th><th><code>I2</code></th><th><code>O1</code></th><th><code>O2</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>Player</code></td><td><code>u8</code></td><td><code>char</code></td><td><code>f32</code></td><td><code>f32</code></td></tr>
        <tr><td><code>EvilMonster</code></td><td><code>u16</code></td><td><code>str</code></td><td><code>u8</code></td><td><code>u8</code></td></tr>
        <tr><td><code>EvilMonster</code></td><td><code>u16</code></td><td><code>String</code></td><td><code>u8</code></td><td><code>u8</code></td></tr>
        <tr><td><code>NiceMonster</code></td><td><code>u16</code></td><td><code>String</code></td><td><code>u8</code></td><td><code>u8</code></td></tr>
        <tr><td><code>NiceMonster</code><sup><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></sup></td><td><code>u16</code></td><td><code>String</code></td><td><code>u8</code></td><td><code>u16</code></td></tr>
    </tbody>
</table>
<p><subtitle>Various trait implementations. The last one is not valid as <code>(NiceMonster, u16, String)</code> has <br> already uniquely determined the outputs.</subtitle></p>
</mini-table>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Trait Authoring Considerations (Abstract)</header>
<description>
<mini-zoo class="zoo">
    <person>👩‍🦰</person>
    <entry>
        <trait-impl class="dotted">⌾ <code>A&lt;I&gt;</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>🧔</person>
    <entry>
        <type class="composed"><code>Car</code></type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>👩‍🦰</person> / <person>🧔</person>
    <entry>
        <type class="composed"><code>Car</code></type>
        <trait-impl class="dotted">⌾ <code>A&lt;I&gt;</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>🎅</person>
    <entry>
        <code>car.a(0_u8)</code>
        <code>car.a(0_f32)</code>
    </entry>
</mini-zoo>
<br>
<mini-zoo class="zoo">
    <person>👩‍🦰</person>
    <entry>
        <trait-impl class="">⌾ <code>B</code></trait-impl>
        <associated-type class=""><code>type O;</code></associated-type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>🧔</person>
    <entry>
        <type class="composed"><code>Car</code></type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>👩‍🦰</person> / <person>🧔</person>
    <entry>
        <type class="composed"><code>Car</code></type>
        <trait-impl class="">⌾ <code>B</code></trait-impl>
        <associated-type class=""><code>T = u8;</code></associated-type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="margin-left: 10px;">
    <person>🎅</person>
    <entry>
        <code>car.b(0_u8)</code>
        <code style="text-decoration: line-through;">car.b(0_f32)</code>
    </entry>
</mini-zoo>
<ul>
<li>Parameter choice (input vs. output) also determines who may be allowed to add members:
<ul>
<li><code>I</code> parameters allow &quot;familes of implementations&quot; be forwarded to user (Santa),</li>
<li><code>O</code> parameters must be determined by trait implementor (Alice or Bob).</li>
</ul>
</li>
</ul>
<pre><code>trait A&lt;I&gt; { }
trait B { type O; }

&#x2F;&#x2F; Implementor adds (X, u32) to A.
impl A&lt;u32&gt; for X { }

&#x2F;&#x2F; Implementor adds family impl. (X, …) to A, user can materialze.
impl&lt;T&gt; A&lt;T&gt; for Y { }

&#x2F;&#x2F; Implementor must decide specific entry (X, O) added to B.
impl B for X { type O = u32; }
</code></pre>
<mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th colspan="2">A</th></tr>
        <tr class="subheader"><th><code>Self</code></th><th><code>I</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>X</code></td><td><code>u32</code></td></tr>
        <tr><td><code>Y</code></td><td><code>…</code></td></tr>
    </tbody>
</table>
<p><subtitle>Santa may add more members by providing his own type for <code>T</code>.</subtitle></p>
</mini-table>
<mini-table style="width: 200px; display:inline-block;">
<table>
    <thead>
        <tr style=""><th colspan="2">B</th></tr>
        <tr class="subheader"><th><code>Self</code></th><th><code>O</code></th></tr>
    </thead>
    <tbody>
        <tr><td><code>Player</code></td><td><code>String</code></td></tr>
        <tr><td><code>X</code></td><td><code>u32</code></td></tr>
    </tbody>
</table>
<p><subtitle>For given set of inputs (here <code>Self</code>), implementor must pre-select <code>O</code>.</subtitle></p>
</mini-table>
</mini-table>
</description>
</generics-section>
<!-- Section -->
<generics-section id="trait-authoring-examples">
<header>Trait Authoring Considerations (Example)</header>
<description>
<mini-zoo class="zoo">
    <entry>
        <trait-impl class="">⌾ <code>Query</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry>
        <code style="text-align:center; width: 100%;">vs.</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry>
        <trait-impl class="dotted">⌾ <code>Query&lt;I&gt;</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry>
        <code style="text-align:center; width: 100%;">vs.</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry>
        <trait-impl class="">⌾ <code>Query</code></trait-impl>
        <associated-type class=""><code>type O;</code></associated-type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry>
        <code style="text-align:center; width: 100%;">vs.</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry>
        <trait-impl class="dotted">⌾ <code>Query&lt;I&gt;</code></trait-impl>
        <associated-type class=""><code>type O;</code></associated-type>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<p>Choice of parameters goes along with purpose trait has to fill.</p>
<hr>
<p><strong>No Additional Parameters</strong></p>
<pre><code>trait Query {
    fn search(&amp;self, needle: &amp;str);
}

impl Query for PostgreSQL { … }
impl Query for Sled { … }

postgres.search(&quot;SELECT …&quot;);
</code></pre>
<mini-zoo class="zoo">
    <person>👩‍🦰</person>
    <entry>
        <trait-impl class="">⌾ <code>Query</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo">
    <person>🧔</person>
    <entry>
        <type class="composed"><code>PostgreSQL</code></type>
        <trait-impl class="">⌾ <code>Query</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry>
        <type class="composed"><code>Sled</code></type>
        <trait-impl class="">⌾ <code>Query</code></trait-impl>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<p>Trait author assumes:</p>
<ul>
<li>neither implementor nor user need to customize API.</li>
</ul>
<div>&nbsp;</div>
<hr>
<p><strong>Input Parameters</strong></p>
<pre><code>trait Query&lt;I&gt; {
    fn search(&amp;self, needle: I);
}

impl Query&lt;&amp;str&gt; for PostgreSQL { … }
impl Query&lt;String&gt; for PostgreSQL { … }
impl&lt;T&gt; Query&lt;T&gt; for Sled where T: ToU8Slice { … }

postgres.search(&quot;SELECT …&quot;);
postgres.search(input.to_string());
sled.search(file);
</code></pre>
<mini-zoo class="zoo">
    <person>👩‍🦰</person>
    <entry>
        <trait-impl class="dotted">⌾ <code>Query&lt;I&gt;</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo">
    <person>🧔</person>
    <entry>
        <type class="composed"><code>PostgreSQL</code></type>
        <trait-impl class="">⌾ <code>Query&lt;&str&gt;</code></trait-impl>
        <trait-impl class="">⌾ <code>Query&lt;String&gt;</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry>
        <type class="composed"><code>Sled</code></type>
        <trait-impl class="dotted">⌾ <code>Query&lt;T&gt;</code></trait-impl>
        <note><span style="margin-left: 10px; display: inline-block; transform: rotate(90deg); font-size: 100%">↲</span> where <code>T</code> is <code>ToU8Slice</code>.</note>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<p>Trait author assumes:</p>
<ul>
<li>implementor would customize API in multiple ways for same <code>Self</code> type,</li>
<li>users may want ability to decide for which <code>I</code>-types behavior should be possible.</li>
</ul>
<div>&nbsp;</div>
<hr>
<p><strong>Output Parameters</strong></p>
<pre><code>trait Query {
    type O;
    fn search(&amp;self, needle: Self::O);
}

impl Query for PostgreSQL { type O = String; …}
impl Query for Sled { type O = Vec&lt;u8&gt;; … }

postgres.search(&quot;SELECT …&quot;.to_string());
sled.search(vec![0, 1, 2, 4]);
</code></pre>
<mini-zoo class="zoo">
    <person>👩‍🦰</person>
    <entry>
        <trait-impl class="">⌾ <code>Query</code></trait-impl>
        <associated-type class=""><code>type O;</code></associated-type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo">
    <person>🧔</person>
    <entry>
        <type class="composed"><code>PostgreSQL</code></type>
        <trait-impl class="">⌾ <code>Query</code></trait-impl>
        <associated-type class=""><code>O = String;</code></associated-type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry>
        <type class="composed"><code>Sled</code></type>
        <trait-impl class="">⌾ <code>Query</code></trait-impl>
        <associated-type class=""><code>O = Vec&lt;u8&gt;;</code></associated-type>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<p>Trait author assumes:</p>
<ul>
<li>implementor would customize API for <code>Self</code> type (but in only one way),</li>
<li>users do not need, or should not have, ability to influence customization for specific <code>Self</code>.</li>
</ul>
<blockquote>
<p>As you can see here, the term <strong>input</strong> or <strong>output</strong> does <strong>not</strong> (necessarily) have anything to do with whether <code>I</code> or <code>O</code> are inputs or outputs to an actual function!</p>
</blockquote>
<div>&nbsp;</div>
<hr>
<p><strong>Multiple In- and Output Parameters</strong></p>
<pre><code>trait Query&lt;I&gt; {
    type O;
    fn search(&amp;self, needle: I) -&gt; Self::O;
}

impl Query&lt;&amp;str&gt; for PostgreSQL { type O = String; … }
impl Query&lt;CString&gt; for PostgreSQL { type O = CString; … }
impl&lt;T&gt; Query&lt;T&gt; for Sled where T: ToU8Slice { type O = Vec&lt;u8&gt;; … }

postgres.search(&quot;SELECT …&quot;).to_uppercase();
sled.search(&amp;[1, 2, 3, 4]).pop();
</code></pre>
<mini-zoo class="zoo">
    <person>👩‍🦰</person>
    <entry>
        <trait-impl class="dotted">⌾ <code>Query&lt;I&gt;</code></trait-impl>
        <associated-type class=""><code>type O;</code></associated-type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo">
    <person>🧔</person>
    <entry>
        <type class="composed"><code>PostgreSQL</code></type>
        <trait-impl class="">⌾ <code>Query&lt;&str&gt;</code></trait-impl>
        <associated-type class=""><code>O = String;</code></associated-type>
        <trait-impl class="">⌾ <code>Query&lt;CString&gt;</code></trait-impl>
        <associated-type class=""><code>O = CString;</code></associated-type>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <entry>
        <type class="composed"><code>Sled</code></type>
        <trait-impl class="dotted">⌾ <code>Query&lt;T&gt;</code></trait-impl>
        <associated-type class=""><code>O = Vec&lt;u8&gt;;</code></associated-type>
        <note><span style="margin-left: 10px; display: inline-block; transform: rotate(90deg); font-size: 100%">↲</span> where <code>T</code> is <code>ToU8Slice</code>.</note>
    </entry>
</mini-zoo>
<div>&nbsp;</div>
<p>Like examples above, in particular trait author assumes:</p>
<ul>
<li>users may want ability to decide for which <code>I</code>-types ability should be possible,</li>
<li>for given inputs, implementor should determine resulting output type.</li>
</ul>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Dynamic / Zero Sized Types</header>
<description>
<mini-zoo class="zoo" style="">
    <entry>
        <type class="composed"><code>MostTypes</code></type>
        <trait-impl>⌾ <code>Sized</code></trait-impl>
        <note>Normal types.</note>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry style="width: 60px;">
        <code style="text-align:center; width: 100%;">vs.</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo" style="">
    <entry>
        <type class="zero"><code>Z</code></type>
        <trait-impl>⌾ <code>Sized</code></trait-impl>
        <note>Zero sized.</note>
    </entry>
</mini-zoo>
<mini-zoo class="zoo">
    <narrow-entry style="width: 60px;">
        <code style="text-align:center; width: 100%;">vs.</code>
    </narrow-entry>
</mini-zoo>
<mini-zoo class="zoo" style="">
    <entry>
        <type class="primitive"><code>str</code></type>
        <trait-impl class="grayed">⌾ <code style="text-decoration: line-through">Sized</code></trait-impl>
        <note>Dynamically sized.</note>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="">
    <entry>
        <type class="primitive"><code>[u8]</code></type>
        <trait-impl class="grayed">⌾ <code style="text-decoration: line-through">Sized</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="">
    <entry>
        <type class="primitive"><code>dyn Trait</code></type>
        <trait-impl class="grayed">⌾ <code style="text-decoration: line-through">Sized</code></trait-impl>
    </entry>
</mini-zoo>
<mini-zoo class="zoo" style="">
    <entry>
        <type class="primitive"><code>…</code></type>
        <trait-impl class="grayed">⌾ <code style="text-decoration: line-through">Sized</code></trait-impl>
    </entry>
</mini-zoo>
<ul>
<li>A type <code>T</code> is <strong><code>Sized</code></strong> <a href="https://doc.rust-lang.org/std&#x2F;marker&#x2F;trait.Sized.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> if at compile time it is known how many bytes it occupies, <code>u8</code> and <code>&amp;[u8]</code> are, <code>[u8]</code> isn't.</li>
<li>Being <code>Sized</code> means <code>impl Sized for T {}</code> holds. Happens automatically and cannot be user impl'ed.</li>
<li>Types not <code>Sized</code> are called <strong>dynamically sized types</strong> <a href="https://doc.rust-lang.org/book/ch19-04-advanced-types.html#dynamically-sized-types-and-the-sized-trait" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a href="https://doc.rust-lang.org/nightly/nomicon/exotic-sizes.html#dynamically-sized-types-dsts" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a>  <a href="https://doc.rust-lang.org/stable/reference/dynamically-sized-types.html#dynamically-sized-types" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> (DSTs), sometimes <strong>unsized</strong>.</li>
<li>Types without data are called <strong>zero sized types</strong> <a href="https://doc.rust-lang.org/nightly/nomicon/exotic-sizes.html#zero-sized-types-zsts" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> (ZSTs), do not occupy space.</li>
</ul>
<div class="color-header sized cheats">
<table><thead><tr><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>struct A { x: u8 }</code></td><td>Type <code>A</code> is sized, i.e., <code>impl Sized for A</code> holds, this is a 'regular' type.</td></tr>
<tr><td><code>struct B { x: [u8] }</code></td><td>Since <code>[u8]</code> is a DST, <code>B</code> in turn becomes DST, i.e., does not <code>impl Sized</code>.</td></tr>
<tr><td><code>struct C&lt;T&gt; { x: T }</code></td><td>Type params <strong>have</strong> implicit <code>T: Sized</code> bound, e.g., <code>C&lt;A&gt;</code> is valid, <code>C&lt;B&gt;</code> is not.</td></tr>
<tr><td><code>struct D&lt;T: ?Sized&gt; { x: T }</code></td><td>Using <strong><code>?Sized</code></strong> <a href="https://doc.rust-lang.org/stable/reference/trait-bounds.html#sized" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> allows opt-out of that bound, i.e., <code>D&lt;B&gt;</code> is also valid.</td></tr>
<tr><td><code>struct E;</code></td><td>Type <code>E</code> is zero-sized (and also sized) and will not consume memory.</td></tr>
<tr><td><code>trait F { fn f(&amp;self); }</code></td><td>Traits <strong>do not have</strong> an implicit <code>Sized</code> bound, i.e., <code>impl F for B {}</code> is valid.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>trait F: Sized {}</code></td><td>Traits can however opt into <code>Sized</code> via supertraits.<a href="#functions-behavior" title="On this site, above."><sup>↑</sup></a></td></tr>
<tr><td><code>trait G { fn g(self); }</code></td><td>For <code>Self</code>-like params DST <code>impl</code> may still fail as params can't go on stack.</td></tr>
</tbody></table>
</div>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header><code>?Sized</code></header>
<description>
<mini-zoo class="zoo">
    <entry>
        <type class="generic dotted"><code>S&lt;T&gt;</code></type>
    </entry>
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
    <entry>
        <type class="composed"><code>S&lt;u8&gt;</code></type>
    </entry>
    <entry>
        <type class="composed"><code>S&lt;char&gt;</code></type>
    </entry>
    <entry>
        <type class="composed grayed"><code>S&lt;str&gt;</code></type>
    </entry>
</mini-zoo>
<pre><code>struct S&lt;T&gt; { … }
</code></pre>
<ul>
<li><code>T</code> can be any concrete type.</li>
<li>However, there exists invisible default bound <code>T: Sized</code>, so <code>S&lt;str&gt;</code> is not possible out of box.</li>
<li>Instead we have to add <code>T : ?Sized</code> to opt-out of that bound:</li>
</ul>
<mini-zoo class="zoo">
    <entry>
        <type class="generic dotted"><code>S&lt;T&gt;</code></type>
    </entry>
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
    <entry>
        <type class="composed"><code>S&lt;u8&gt;</code></type>
    </entry>
    <entry>
        <type class="composed"><code>S&lt;char&gt;</code></type>
    </entry>
    <entry>
        <type class="composed"><code>S&lt;str&gt;</code></type>
    </entry>
</mini-zoo>
<pre><code>struct S&lt;T&gt; where T: ?Sized { … }
</code></pre>
</description>
</generics-section>
<!-- Section -->
<generics-section>
<header>Generics and Lifetimes &mdash; <code>&lt;'a&gt;</code></header>
<description>
<mini-zoo class="zoo">
    <entry>
        <type class="generic dotted"><code>S&lt;'a&gt;</code></type>
    </entry>
    <entry>
        <type class="generic dotted"><code>&'a f32</code></type>
    </entry>
    <entry>
        <type class="generic dotted"><code>&'a mut u8</code></type>
    </entry>
</mini-zoo>
<ul>
<li>Lifetimes act<sup>*</sup> as type parameters:
<ul>
<li>user must provide specific <code>'a</code> to instantiate type (compiler will help within methods),</li>
<li><code>S&lt;'p&gt;</code> and <code>S&lt;'q&gt;</code> are different types, just like <code>Vec&lt;f32&gt;</code> and <code>Vec&lt;u8&gt;</code> are</li>
<li>meaning you can't just assign value of type <code>S&lt;'a&gt;</code> to variable expecting <code>S&lt;'b&gt;</code> (exception: subtype relationship for lifetimes, i.e., <code>'a</code> outlives <code>'b</code>).</li>
</ul>
</li>
</ul>
<mini-zoo class="zoo">
    <entry>
        <type class="generic dotted"><code>S&lt;'a&gt;</code></type>
    </entry>
    <narrow-entry>
        <code style="text-align:center; width: 100%;">→</code>
    </narrow-entry>
    <entry>
        <type class="composed"><code>S&lt;'auto&gt;</code></type>
    </entry>
    <entry>
        <type class="composed"><code>S&lt;'static&gt;</code></type>
    </entry>
</mini-zoo>
<ul>
<li><code>'static</code> is only globally available type of the lifetimes <em>kind</em>.</li>
</ul>
<pre><code>&#x2F;&#x2F; `&#x27;a is free parameter here (user can pass any specific lifetime)
struct S&lt;&#x27;a&gt; {
    x: &amp;&#x27;a u32
}

&#x2F;&#x2F; In non-generic code, &#x27;static is the only nameable lifetime we can explicitly put in here.
let a: S&lt;&#x27;static&gt;;

&#x2F;&#x2F; Alternatively, in non-generic code we can (often must) omit &#x27;a and have Rust determine
&#x2F;&#x2F; the right value for &#x27;a automatically.
let b: S;
</code></pre>
<footnotes>
<p><sup>*</sup> There are subtle differences, for example you can create an explicit instance <code>0</code> of a type <code>u32</code>, but with the exception of <code>'static</code> you can't really create a lifetime, e.g., &quot;lines 80 - 100&quot;, the compiler will do that for you. <a href="https:&#x2F;&#x2F;medium.com&#x2F;nearprotocol&#x2F;understanding-rust-lifetimes-e813bcd405fa" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></p>
</footnotes>
</description>
</generics-section>
<!-- Section -->
<!-- <generics-section>
<header>Types of types: kinds</header>
<description>

Rust does not support higher-kinded types or even mention kinds, but knowing a
bit of theory can shed some light on how generics work. Note that the following
uses Rust-like syntax for explanations, but is not actually valid Rust.

- Values have types, e.g. `true` has type `bool`, written `true: bool`.
- Types have _kinds_, e.g. `bool` has kind `*`, also written `bool: *`. (`*` is
  pronounced _star_ or, sometimes a bit confusingly, _type_.)
- (Kinds have _sorts_, which is beyond scope here. Type theories ran out of
  English synonyms for _type_ afterwards, but luckily value/type/kind is enough
  for most type systems anyway.)

Rust conceptually uses three kinds: `*`, `kind1 -> kind2` (type constructors),
and `lifetime`.

- All values have a type of kind `*`.
- The opposite is not true: there are types of kind `*` that have no values,
  e.g. `!` (the empty type).
- Type constructors such as `Vec` take a type of kind `*`, e.g. `bool`, to a
  new type of kind `*`, in this case `Vec<bool>`. We can say `Vec: * -> *`.
- `lifetime` is the kind of lifetimes, e.g. `'static: lifetime`. Since
  `lifetime` is not `*`, types of kind `lifetime` cannot have values. They can
  however be used as parameters to create types. For example in

  ```rust
  struct S<'a> {
      x: &'a u32
  }
  ```

  the kind of `S` is `lifetime -> *`.
- Note that `Vec<'static>` is a kind error, because `Vec: * -> *`, not
  `lifetime -> *`.

</description>
</generics-section> -->
<!-- Section -->
<!-- <generics-section >
<header>Another <code>?X</code></header>
<description>

- `Sized` is trait, automatically implemented **and** automatically used as default bound
- Could there (ever) be another trait `T` so that:
    - `S<T>` means `S<T> where T: Sized + X` by default and
    - you'd have to opt out with `S<T> where T: ?X` ?
- Issue:
    - Any `S<T>` written today does not know `X`, so can't opt into supporting it
    - If `X` were introduced and not implemented for any existing type, `S<T>` would stop working on that type

</description>
</generics-section> -->
<!-- Section -->
<!-- <generics-section >
<header>GAT <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></header>
<description>


</description>
</generics-section> -->
<!-- Section -->
<!-- <generics-section >
<header>(Co-/Contra-) Variance </header>
<description>


</description>
</generics-section>
 -->
<!-- Section -->
<!-- <generics-section id="zoo_todo">
<header>Todo</header>
<description>


</description>
</generics-section>
 -->
</div></panel></tab>
</tabs>
<footnotes>
<p>Examples expand by clicking.</p>
</footnotes>
<h2 id="foreign-types-and-traits">Foreign Types and Traits<sup id="target-foreign-types-and-traits" class="target"><a href="#foreign-types-and-traits">url</a></sup></h2>
<p>A visual overview of types and traits in your crate and upstream.</p>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 750px;">
<zoo class="zoo">
<!-- REGION -->
<region style="height: 310px;">
<!-- Primitives -->
<group style="left:6%; width: 200px;">
    <entry style="left:100px; top: 10%;">
        <type class="primitive"><code>u8</code></type>
    </entry>
    <entry style="left:20px; top: 32%;">
        <type class="primitive"><code>u16</code></type>
    </entry>
    <entry style="left:30px; top: 20%;">
        <type class="primitive"><code>f32</code></type>
    </entry>
    <entry style="left:0px; top: 7%;">
        <type class="primitive"><code>bool</code></type>
    </entry>
    <entry style="left:120px; top: 32%;">
        <type class="primitive"><code>char</code></type>
    </entry>
    <label style="left:8px; top: 43%;">Primitive Types</label>
</group>
<!-- Composed -->
<group style="left:50%; width: 350px;">
    <entry style="left:110px; top: 60px;">
        <type class="composed"><code>File</code></type>
    </entry>
    <entry style="left:180px; top: 34%;">
        <type class="composed"><code>String</code></type>
    </entry>
    <entry style="left:230px; top: 13%;">
        <type class="composed"><code>Builder</code></type>
    </entry>
    <label style="left:150px; top: 43%;">Composite Types</label>
</group>
<!-- Type constructors -->
<group style="left: 30px; top:53%; width: 200px;">
    <!-- Group -->
    <entry style="left:50px; top: 8%;">
        <type class="composed"><code>Vec&lt;T&gt;</code></type>
    </entry>
    <entry style="left:45px; top: 9%;">
        <type class="composed"><code>Vec&lt;T&gt;</code></type>
    </entry>
    <entry style="left:40px; top: 10%;">
        <type class="generic dotted"><code>Vec&lt;T&gt;</code></type>
    </entry>
    <!-- Group -->
    <entry style="left:170px; top: 2%;">
        <type class="primitive"><code>&'a T</code></type>
    </entry>
    <entry style="left:165px; top: 3%;">
        <type class="primitive"><code>&'a T</code></type>
    </entry>
    <entry style="left:160px; top: 4%;">
        <type class="generic dotted"><code>&'a T</code></type>
    </entry>
    <!-- Group -->
    <entry style="left:140px; top: 18%;">
        <type class="primitive"><code>&mut 'a T</code></type>
    </entry>
    <entry style="left:135px; top: 19%;">
        <type class="primitive"><code>&mut 'a T</code></type>
    </entry>
    <entry style="left:130px; top: 20%;">
        <type class="generic dotted"><code>&mut 'a T</code></type>
    </entry>
    <!-- Group -->
    <entry style="left:40px; top: 28%;">
        <type class="primitive"><code>[T; n]</code></type>
    </entry>
    <entry style="left:35px; top: 29%;">
        <type class="primitive"><code>[T; n]</code></type>
    </entry>
    <entry style="left:30px; top: 30%;">
        <type class="generic dotted"><code>[T; n]</code></type>
    </entry>
    <label style="left:80px; top: 40%;">Type Constructors</label>
</group>
<!-- Functrions -->
<group style="left: 50%; top:53%; width: 200px;">
    <!-- Group -->
    <entry style="left:10px; top: 8%;">
        <function class=""><code>Vec&lt;T&gt;</code></function>
    </entry>
    <entry style="left:5px; top: 9%;">
        <function class=""><code>Vec&lt;T&gt;</code></function>
    </entry>
    <entry style="left:0px; top: 10%;">
        <function class="dotted"><code>f&lt;T&gt;() {}</code></function>
    </entry>
    <!-- Group -->
    <entry style="left:20px; top: 24%;">
        <function><code>drop() {}</code></function>
    </entry>
    <label style="left:10px; top: 40%;">Functions</label>
</group>
<!-- Unsized -->
<!-- <group style="left: 50%; top:53%;">
    <entry style="left:30%; top: 10%;">
        <type class="unsized"><code>str</code></type>
    </entry>
    <entry style="left:35%; top: 20%;">
        <type class="unsized"><code>[u8]</code></type>
    </entry>
    <entry style="left:28%; top: 30%;">
        <type class="unsized"><code>dyn Trait</code></type>
    </entry>
    <label style="left:30%; top: 40%;">Unsized Types</label>
</group> -->
<!-- Macros -->
<group class="grayed" style="left: 80%; top:53%; width: 140px;">
    <entry style="left:5px; top: 15%;">
        <macro><code>PI</code></macro>
    </entry>
    <entry style="left:0px; top: 28%;">
        <macro><code>dbg!</code></macro>
    </entry>
    <label style="left:20px; top: 40%;">Other</label>
</group>
<!-- Traits -->
<group style="left:36%; width: 30px;">
    <entry style="left:20px; top: 20px;">
        <trait-impl>⌾ <code>Copy</code></trait-impl>
    </entry>
    <entry style="left:60px; top: 90px;">
        <trait-impl class="">⌾ <code>Deref</code></trait-impl>
        <associated-type class=""><code>type Tgt;</code></associated-type>
    </entry>
    <entry style="left:90px; top: 50px;">
        <trait-impl class="">⌾ <code>From&lt;T&gt;</code></trait-impl>
    </entry>
    <entry style="left:85px; top: 55px;">
        <trait-impl class="">⌾ <code>From&lt;T&gt;</code></trait-impl>
    </entry>
    <entry style="left:80px; top: 60px;">
        <trait-impl class="dotted">⌾ <code>From&lt;T&gt;</code></trait-impl>
    </entry>
    <label style="left:60px; top: 43%;">Traits</label>
</group>
</region>
<region-label>Items defined in upstream crates.</region-label>
<!-- REGION -->
<region class="your-crate" style="height: 190px;">
<!-- traits -->
<group style="left:5px; width: 200px;">
    <entry style="left:10px; top: 25px;">
        <trait-impl class="">⌾ <code>Serialize</code></trait-impl>
    </entry>
    <entry style="left:30px; top: 65px;">
        <trait-impl class="">⌾ <code>Transport</code></trait-impl>
    </entry>
    <entry style="left:15px; top: 105px;">
        <trait-impl class="">⌾ <code>ShowHex</code></trait-impl>
    </entry>
    <!-- <label style="left:60px; top: 165px">Traits</label> -->
</group>
<!-- types -->
<group style="left:150px; width: 200px;">
    <entry style="left:0px; top: 25px;">
        <type class="composed"><code>Device</code></type>
        <trait-impl class="grayed">⌾ <code>From&lt;u8&gt;</code></trait-impl>
        <!-- <trait-impl class="grayed">⌾ <code>Deref</code></trait-impl>
        <associated-type class="grayed"><code>type Thing;</code></associated-type> -->
        <note>Foreign trait impl. for local type.</note>
    </entry>
    <entry style="left:100px; top: 25px;">
        <type class="grayed composed"><code>String</code></type>
        <trait-impl class="">⌾ <code>Serialize</code></trait-impl>
        <note>Local trait impl. for foreign type.</note>
    </entry>
    <entry style="left:200px; top: 25px;">
        <type class="composed grayed"><code>String</code></type>
        <trait-impl class="grayed">⌾ <code>From&lt;u8&gt;</code></trait-impl>
        <note><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Illegal, foreign trait for f. type.</note>
    </entry>
    <entry style="left:200px; top: 110px;">
        <type class="composed grayed"><code>String</code></type>
        <trait-impl class="grayed">⌾ <code>From&lt;Port&gt;</code></trait-impl>
        <note>Exception: Legal if used type local.</note>
    </entry>
    <entry style="left:300px; top: 25px;">
        <type class="composed"><code>Port</code></type>
        <trait-impl class="">⌾ <code>From&lt;u8&gt;</code></trait-impl>
        <trait-impl class="">⌾ <code>From&lt;u16&gt;</code></trait-impl>
        <note>Mult. impl. of trait with differing <b>IN</b> params.</note>
    </entry>
    <entry style="left:400px; top: 25px;">
        <type class="composed"><code>Container</code></type>
        <trait-impl class="">⌾ <code>Deref</code></trait-impl>
        <associated-type class="grayed"><code>Tgt = u8;</code></associated-type>
        <trait-impl class="">⌾ <code>Deref</code></trait-impl>
        <associated-type class="grayed"><code>Tgt = f32;</code></associated-type>
        <note><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Illegal impl. of trait with differing <b>OUT</b> params.</note>
    </entry>
    <entry style="left:510px; top: 15px;">
        <type class="composed"><code>T</code></type>
    </entry>
    <entry style="left:505px; top: 20px;">
        <type class="composed"><code>T</code></type>
    </entry>
    <entry style="left:500px; top: 25px;">
        <type class="generic dotted"><code>T</code></type>
        <trait-impl class="">⌾ <code>ShowHex</code></trait-impl>
        <note>Blanket impl. of trait for any type.</note>
    </entry>
</group>
</region>
<region-label>Your crate.</region-label>
<!-- REGION -->
<!-- <region style="height: 90px;">
<group style="left:324px; width: 200px;">
    <entry style="left:20px; top: 30px;">
        <code>ccc.f();</code>
    </entry>
</group>
</region>
<region-label>Downstream crates.</region-label> -->
</zoo>
<footnotes>
<p>Examples of traits and types, and which traits you can implement for which type.</p>
</footnotes>
<!-- End scrollable overflow-->
</div>
</div>
<h2 id="type-conversions">Type Conversions<sup id="target-type-conversions" class="target"><a href="#type-conversions">url</a></sup></h2>
<p>How to get <code>B</code> when you have <code>A</code>?</p>
<div class="color-header variance">
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-variance-1" name="tab-variance" checked>
<label for="tab-variance-1"><b>Intro</b></label>
<panel><div>
<pre><code>fn f(x: A) -&gt; B {
    &#x2F;&#x2F; How can you obtain B from A?
}
</code></pre>
<table><thead><tr><th>Method</th><th>Explanation</th></tr></thead><tbody>
<tr><td><strong>Identity</strong></td><td>Trivial case, <code>B</code> <strong>is exactly</strong> <code>A</code>.</td></tr>
<tr><td><strong>Computation</strong></td><td>Create and manipulate instance of <code>B</code> by <strong>writing code</strong> transforming data.</td></tr>
<tr><td><strong>Casts</strong></td><td><strong>On-demand</strong> conversion between types where caution is advised.</td></tr>
<tr><td><strong>Coercions</strong></td><td><strong>Automatic</strong> conversion within <em>'weakening ruleset'</em>.<sup>1</sup></td></tr>
<tr><td><strong>Subtyping</strong></td><td><strong>Automatic</strong> conversion within <em>'same-layout-different-lifetimes ruleset'</em>.<sup>1</sup></td></tr>
</tbody></table>
<div>&nbsp;</div>
<footnotes>
<p><sup>1</sup> While both convert <code>A</code> to <code>B</code>, <strong>coercions</strong> generally link to an <em>unrelated</em> <code>B</code> (a type &quot;one could reasonably expect to have different methods&quot;),
while <strong>subtyping</strong> links to a <code>B</code> differing only in lifetimes.</p>
</footnotes>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-variance-2" name="tab-variance">
<label for="tab-variance-2"><b>Computation (Traits)</b></label>
<panel><div>
<pre><code>fn f(x: A) -&gt; B {
    x.into()
}
</code></pre>
<p><em>Bread and butter</em> way to get <code>B</code> from <code>A</code>. Some traits provide canonical, user-computable type relations:</p>
<table><thead><tr><th>Trait</th><th>Example</th><th>Trait implies …</th></tr></thead><tbody>
<tr><td><code>impl From&lt;A&gt; for B {}</code></td><td><code>a.into()</code></td><td><em>Obvious</em>, always-valid relation.</td></tr>
<tr><td><code>impl TryFrom&lt;A&gt; for B {}</code></td><td><code>a.try_into()?</code></td><td><em>Obvious</em>, sometimes-valid relation.</td></tr>
<tr><td><code>impl Deref for A {}</code></td><td><code>*a</code></td><td><code>A</code> is smart pointer carrying <code>B</code>; also enables coercions.</td></tr>
<tr><td><code>impl AsRef&lt;B&gt; for A {}</code></td><td><code>a.as_ref()</code></td><td><code>A</code> can be <em>viewed</em> as <code>B</code>.</td></tr>
<tr><td><code>impl AsMut&lt;B&gt; for A {}</code></td><td><code>a.as_mut()</code></td><td><code>A</code> can be mutably viewed as <code>B</code>.</td></tr>
<tr><td><code>impl Borrow&lt;B&gt; for A {}</code></td><td><code>a.borrow()</code></td><td><code>A</code> has borrowed <em>analog</em> <code>B</code> (behaving same under <code>Eq</code>, …).</td></tr>
<tr><td><code>impl ToOwned for A { … }</code></td><td><code>a.to_owned()</code></td><td><code>A</code> has owned analog <code>B</code>.</td></tr>
</tbody></table>
<!--
<footnotes>

<sup>1</sup> Pretty much any function, like `is_signed(x)`, puts values of two types in a _specific_ relationship, especially if their _meaning_ is highly _overloaded_ (e.g., `true` in the `is_signed` relation is proxy for a different concept than `true` in an `is_odd` one). In contrast, the traits above (and type conversions in general) are mainly about unambiguous conversions across any possible meaning.

</footnotes>
 -->
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-variance-3" name="tab-variance">
<label for="tab-variance-3"><b>Casts</b></label>
<panel><div>
<pre><code>fn f(x: A) -&gt; B {
    x as B
}
</code></pre>
<p>Convert types <strong>with keyword <code>as</code></strong> if conversion <em>relatively obvious</em> but <strong>might cause issues</strong>. <a href="https://doc.rust-lang.org/nightly/nomicon/casts.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a></p>
<table><thead><tr><th>A</th><th>B</th><th>Example</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>Pointer</code></td><td><code>Pointer</code></td><td><code>device_ptr as *const u8</code></td><td>If <code>*A</code>, <code>*B</code> are <code>Sized</code>.</td></tr>
<tr><td><code>Pointer</code></td><td><code>Integer</code></td><td><code>device_ptr as usize</code></td><td></td></tr>
<tr><td><code>Integer</code></td><td><code>Pointer</code></td><td><code>my_usize as *const Device</code></td><td></td></tr>
<tr><td><code>Number</code></td><td><code>Number</code></td><td><code>my_u8 as u16</code></td><td>Often surprising behavior. <a href="#numeric-types-ref" title="On this site, above."><sup>↑</sup></a></td></tr>
<tr><td><code>enum</code> w/o fields</td><td><code>Integer</code></td><td><code>E::A as u8</code></td><td></td></tr>
<tr><td><code>bool</code></td><td><code>Integer</code></td><td><code>true as u8</code></td><td></td></tr>
<tr><td><code>char</code></td><td><code>Integer</code></td><td><code>'A' as u8</code></td><td></td></tr>
<tr><td><code>&amp;[T; N]</code></td><td><code>*const T</code></td><td><code>my_ref as *const u8</code></td><td></td></tr>
<tr><td><code>fn(…)</code></td><td><code>Pointer</code></td><td><code>f as *const u8</code></td><td>If <code>Pointer</code> is <code>Sized</code>.</td></tr>
<tr><td><code>fn(…)</code></td><td><code>Integer</code></td><td><code>f as usize</code></td><td></td></tr>
</tbody></table>
<div>&nbsp;</div>
<footnote>
<p>Where <code>Pointer</code>, <code>Integer</code>, <code>Number</code> are just used for brevity and actually mean:</p>
<ul>
<li><code>Pointer</code> any <code>*const T</code> or <code>*mut T</code>;</li>
<li><code>Integer</code> any countable <code>u8</code> … <code>i128</code>;</li>
<li><code>Number</code> any <code>Integer</code>, <code>f32</code>, <code>f64</code>.</li>
</ul>
</footnote>
<blockquote>
<p><strong>Opinion</strong> <a class="tooltip" title="Author's opinion."><sup>💬</sup></a> — Casts, esp. <code>Number - Number</code>, can easily go wrong.
If you are concerned with correctness, consider more explicit methods instead.</p>
</blockquote>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-variance-4" name="tab-variance">
<label for="tab-variance-4"><b>Coercions</b></label>
<panel><div>
<pre><code>fn f(x: A) -&gt; B {
    x
}
</code></pre>
<p>Automatically <strong>weaken</strong> type <code>A</code> to <code>B</code>; types can be <em>substantially</em><sup>1</sup> different. <a href="https://doc.rust-lang.org/nightly/nomicon/coercions.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a></p>
<table><thead><tr><th>A</th><th>B</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>&amp;mut T</code></td><td><code>&amp;T</code></td><td><strong>Pointer weakening</strong>.</td></tr>
<tr><td><code>&amp;mut T</code></td><td><code>*mut T</code></td><td>-</td></tr>
<tr><td><code>&amp;T</code></td><td><code>*const T</code></td><td>-</td></tr>
<tr><td><code>*mut T</code></td><td><code>*const T</code></td><td>-</td></tr>
<tr><td><code>&amp;T</code></td><td><code>&amp;U</code></td><td><strong>Deref</strong>, if <code>impl Deref&lt;Target=U&gt; for T</code>.</td></tr>
<tr><td><code>T</code></td><td><code>U</code></td><td><strong>Unsizing</strong>, if <code>impl CoerceUnsized&lt;U&gt; for T</code>.<sup>2</sup> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td></tr>
<tr><td><code>T</code></td><td><code>V</code></td><td><strong>Transitivity</strong>, if <code>T</code> coerces to <code>U</code> and <code>U</code> to <code>V</code>.</td></tr>
<tr><td><code>|x| x + x</code></td><td><code>fn(u8) -&gt; u8</code></td><td><strong>Non-capturing closure</strong>, to equivalent <code>fn</code> pointer.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<footnote>
<p><sup>1</sup> <em>Substantially</em> meaning one can regularly expect a coercion result <code>B</code> to be <em>an entirely different type</em> (i.e., have entirely different methods) than the original type <code>A</code>.</p>
<p><sup>2</sup> Does not quite work in example above as unsized can't be on stack; imagine <code>f(x: &amp;A) -&gt; &amp;B</code> instead. Unsizing works by default for:</p>
<ul>
<li><code>[T; n]</code> to <code>[T]</code></li>
<li><code>T</code> to <code>dyn Trait</code> if <code>impl Trait for T {}</code>.</li>
<li><code>Foo&lt;…, T, …&gt;</code> to <code>Foo&lt;…, U, …&gt;</code> under arcane <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;nomicon&#x2F;coercions.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a> circumstances.</li>
</ul>
</footnote>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-variance-5" name="tab-variance">
<label for="tab-variance-5"><b>Subtyping</b><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></label>
<panel><div>
<pre><code>fn f(x: A) -&gt; B {
    x
}
</code></pre>
<p>Automatically converts <code>A</code> to <code>B</code> for types <strong>only differing in lifetimes</strong> <a href="https://doc.rust-lang.org/nightly/nomicon/subtyping.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> - subtyping <strong>examples</strong>:</p>
<table><thead><tr><th>A<sup>(subtype)</sup></th><th>B<sup>(supertype)</sup></th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>&amp;'static u8</code></td><td><code>&amp;'a u8</code></td><td>Valid, <i>forever-</i>pointer is also <i>transient-</i>pointer.</td></tr>
<tr><td><code>&amp;'a u8</code></td><td><code>&amp;'static u8</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Invalid, transient should not be forever.</td></tr>
<tr><td><code>&amp;'a &amp;'b u8</code></td><td><code>&amp;'a &amp;'b u8</code></td><td>Valid, same thing. <strong>But now things get interesting. Read on.</strong></td></tr>
<tr><td><code>&amp;'a &amp;'static u8</code></td><td><code>&amp;'a &amp;'b u8</code></td><td>Valid, <code>&amp;'static u8</code> is also <code>&amp;'b u8</code>; <strong>covariant</strong> inside <code>&amp;</code>.</td></tr>
<tr><td><code>&amp;'a mut &amp;'static u8</code></td><td><code>&amp;'a mut &amp;'b u8</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Invalid and surprising; <strong>invariant</strong> inside <code>&amp;mut</code>.</td></tr>
<tr><td><code>Box&lt;&amp;'static u8&gt;</code></td><td><code>Box&lt;&amp;'a u8&gt;</code></td><td>Valid, <code>Box</code> with forever is also box with transient; covariant.</td></tr>
<tr><td><code>Box&lt;&amp;'a u8&gt;</code></td><td><code>Box&lt;&amp;'static u8&gt;</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Invalid, <code>Box</code> with transient may not be with forever.</td></tr>
<tr><td><code>Box&lt;&amp;'a mut u8&gt;</code></td><td><code>Box&lt;&amp;'a u8&gt;</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> <sup>⚡</sup> Invalid, see table below, <code>&amp;mut u8</code> never <em>was a</em> <code>&amp;u8</code>.</td></tr>
<tr><td><code>Cell&lt;&amp;'static u8&gt;</code></td><td><code>Cell&lt;&amp;'a u8&gt;</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Invalid, <code>Cell</code> are <strong>never</strong> something else; invariant.</td></tr>
<tr><td><code>fn(&amp;'static u8)</code></td><td><code>fn(&amp;'a u8)</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> If <code>fn</code> needs forever it may choke on transients; <strong>contravar.</strong></td></tr>
<tr><td><code>fn(&amp;'a u8)</code></td><td><code>fn(&amp;'static u8)</code></td><td>But sth. that eats transients <strong>can be</strong>(!) sth. that eats forevers.</td></tr>
<tr><td><code>for&lt;'r&gt; fn(&amp;'r u8)</code></td><td><code>fn(&amp;'a u8)</code></td><td>Higher-ranked type <code>for&lt;'r&gt; fn(&amp;'r u8)</code> is also <code>fn(&amp;'a u8).</code></td></tr>
</tbody></table>
<div>&nbsp;</div>
<p>In contrast, these are <strong>not</strong><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> examples of subtyping:</p>
<table><thead><tr><th>A</th><th>B</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>u16</code></td><td><code>u8</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> <strong>Obviously invalid</strong>; <code>u16</code> should never automatically be <code>u8</code>.</td></tr>
<tr><td><code>u8</code></td><td><code>u16</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Invalid <strong>by design</strong>; types w. different data still never subtype even if they <em>could</em>.</td></tr>
<tr><td><code>&amp;'a mut u8</code></td><td><code>&amp;'a u8</code></td><td><a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> Trojan horse, not subtyping; but coercion (still works, just not subtyping).</td></tr>
</tbody></table>
<div>&nbsp;</div>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-variance-8" name="tab-variance">
<label for="tab-variance-8"><b>Variance</b><a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a></label>
<panel><div>
<pre><code>fn f(x: A) -&gt; B {
    x
}
</code></pre>
<p>Automatically converts <code>A</code> to <code>B</code> for types <strong>only differing in lifetimes</strong> <a href="https://doc.rust-lang.org/nightly/nomicon/subtyping.html" title="See this topic in 'The Rustonomicon'."><sup class="expert">NOM</sup></a> -  subtyping <strong>variance rules</strong>:</p>
<ul>
<li>A longer lifetime <code>'a</code> that outlives a shorter <code>'b</code> is a subtype of <code>'b</code>.</li>
<li>Implies <code>'static</code> is subtype of all other lifetimes <code>'a</code>.</li>
<li>Whether types with parameters (e.g., <code>&amp;'a T</code>) are subtypes of each other the following variance table is used:</li>
</ul>
<table><thead><tr><th>Construct<sup>1</sup></th><th><code>'a</code></th><th><code>T</code></th><th><code>U</code></th></tr></thead><tbody>
<tr><td><code>&amp;'a T</code></td><td>covariant</td><td>covariant</td><td></td></tr>
<tr><td><code>&amp;'a mut T</code></td><td>covariant</td><td>invariant</td><td></td></tr>
<tr><td><code>Box&lt;T&gt;</code></td><td></td><td>covariant</td><td></td></tr>
<tr><td><code>Cell&lt;T&gt;</code></td><td></td><td>invariant</td><td></td></tr>
<tr><td><code>fn(T) -&gt; U</code></td><td></td><td><strong>contra</strong>variant</td><td>covariant</td></tr>
<tr><td><code>*const T</code></td><td></td><td>covariant</td><td></td></tr>
<tr><td><code>*mut T</code></td><td></td><td>invariant</td><td></td></tr>
</tbody></table>
<footnotes>
<p><strong>Covariant</strong> means if <code>A</code> is subtype of <code>B</code>, then <code>T[A]</code> is subtype of <code>T[B]</code>. <br>
<strong>Contravariant</strong> means if <code>A</code> is subtype of <code>B</code>, then <strong><code>T[B]</code></strong> is subtype of <code>T[A]</code>. <br>
<strong>Invariant</strong> means even if <code>A</code> is subtype of <code>B</code>, neither <code>T[A]</code> nor <code>T[B]</code> will be subtype of the other.<br></p>
<!-- <br> -->
<p><sup>1</sup> Compounds like <code>struct S&lt;T&gt; {}</code> obtain variance through their used fields, usually becoming invariant if multiple variances are mixed.<br></p>
</footnotes>
<blockquote>
<p>💡 <strong>In other words</strong>, 'regular' types are never subtypes of each other (e.g., <code>u8</code> is not subtype of <code>u16</code>),
and a <code>Box&lt;u32&gt;</code> would never be sub- or supertype of anything.
However, generally a <code>Box&lt;A&gt;</code>, <em>can</em> be subtype of <code>Box&lt;B&gt;</code> (via covariance) if <code>A</code> is a subtype
of <code>B</code>, which can only happen if <code>A</code> and <code>B</code> are 'sort of the same type that only differed in lifetimes', e.g., <code>A</code> being <code>&amp;'static u32</code> and <code>B</code> being <code>&amp;'a u32</code>.</p>
</blockquote>
</div></panel></tab>
</tabs>
</div>
<div>&nbsp;</div>
<hr />
<h1 id="coding-guides">Coding Guides<sup id="target-coding-guides" class="target"><a href="#coding-guides">url</a></sup></h1>
<h2 id="idiomatic-rust">Idiomatic Rust<sup id="target-idiomatic-rust" class="target"><a href="#idiomatic-rust">url</a></sup></h2>
<p>If you are used to Java or C, consider these.</p>
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px; ">
<div class="color-header number">
<table><thead><tr><th>Idiom</th><th>Code</th></tr></thead><tbody>
<tr><td><strong>Think in Expressions</strong></td><td><code>y = if x { a } else { b };</code></td></tr>
<tr><td></td><td><code>y = loop { break 5 };</code></td></tr>
<tr><td></td><td><code>fn f() -&gt; u32 { 0 }</code></td></tr>
<tr><td><strong>Think in Iterators</strong></td><td><code>(1..10).map(f).collect()</code></td></tr>
<tr><td></td><td><code>names.iter().filter(|x| x.starts_with(&quot;A&quot;))</code></td></tr>
<tr><td><strong>Test Absence with <code>?</code></strong></td><td><code>y = try_something()?;</code></td></tr>
<tr><td></td><td><code>get_option()?.run()?</code></td></tr>
<tr><td><strong>Use Strong Types</strong></td><td><code>enum E { Invalid, Valid { … } }</code> over <code>ERROR_INVALID = -1</code></td></tr>
<tr><td></td><td><code>enum E { Visible, Hidden }</code> over <code>visible: bool</code></td></tr>
<tr><td></td><td><code>struct Charge(f32)</code> over <code>f32</code></td></tr>
<tr><td><strong>Illegal State: Impossible</strong></td><td><code>my_lock.write().unwrap().guaranteed_at_compile_time_to_be_locked = 10;</code> <sup>1</sup></td></tr>
<tr><td></td><td><code>thread::scope(|s| { /* Threads can't exist longer than scope() */ });</code></td></tr>
<tr><td><strong>Provide Builders</strong></td><td><code>Car::new(&quot;Model T&quot;).hp(20).build();</code></td></tr>
<tr><td><strong>Don't Panic</strong></td><td>Panics are <em>not</em> exceptions, they suggest immediate process abortion!</td></tr>
<tr><td></td><td>Only panic on programming error; use <code>Option&lt;T&gt;</code><a href="https://doc.rust-lang.org/std&#x2F;option&#x2F;enum.Option.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> or <code>Result&lt;T,E&gt;</code><a href="https://doc.rust-lang.org/std&#x2F;result&#x2F;enum.Result.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> otherwise.</td></tr>
<tr><td></td><td>If clearly user requested, e.g., calling <code>obtain()</code> vs. <code>try_obtain()</code>, panic ok too.</td></tr>
<tr><td><strong>Generics in Moderation</strong></td><td>A simple <code>&lt;T: Bound&gt;</code> (e.g., <code>AsRef&lt;Path&gt;</code>) can make your APIs nicer to use.</td></tr>
<tr><td></td><td>Complex bounds make it impossible to follow. If in doubt don't be creative with <em>g</em>.</td></tr>
<tr><td><strong>Split Implementations</strong></td><td>Generics like <code>Point&lt;T&gt;</code> can have separate <code>impl</code> per <code>T</code> for some specialization.</td></tr>
<tr><td></td><td><code>impl&lt;T&gt; Point&lt;T&gt; { /* Add common methods here */ }</code></td></tr>
<tr><td></td><td><code>impl Point&lt;f32&gt; { /* Add methods only relevant for Point&lt;f32&gt; */ }</code></td></tr>
<tr><td><strong>Unsafe</strong></td><td>Avoid <code>unsafe {}</code>,<a href="#unsafe-unsound-undefined" title="On this site, below."><sup>↓</sup></a> often safer, faster solution without it.</td></tr>
<tr><td><strong>Implement Traits</strong></td><td><code>#[derive(Debug, Copy, …)]</code> and custom <code>impl</code> where needed.</td></tr>
<tr><td><strong>Tooling</strong></td><td>Run <a href="https://github.com/rust-lang/rust-clippy"><strong>clippy</strong></a> regularly to significantly improve your code quality. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></td></tr>
<tr><td></td><td>Format your code with <a href="https://github.com/rust-lang/rustfmt"><strong>rustfmt</strong></a> for consistency. <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></td></tr>
<tr><td></td><td>Add <strong>unit tests</strong> <a href="https://doc.rust-lang.org/book/ch11-01-writing-tests.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> (<code>#[test]</code>) to ensure your code works.</td></tr>
<tr><td></td><td>Add <strong>doc tests</strong> <a href="https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> (<code>``` my_api::f() ```</code>) to ensure docs match code.</td></tr>
<tr><td><strong>Documentation</strong></td><td>Annotate your APIs with doc comments that can show up on <a href="https://docs.rs"><strong>docs.rs</strong></a>.</td></tr>
<tr><td></td><td>Don't forget to include a <strong>summary sentence</strong> and the <strong>Examples</strong> heading.</td></tr>
<tr><td></td><td>If applicable: <strong>Panics</strong>, <strong>Errors</strong>, <strong>Safety</strong>, <strong>Abort</strong> and <strong>Undefined Behavior</strong>.</td></tr>
</tbody></table>
</div>
</div>
</div>
<footnotes>
<p><sup>1</sup> In most cases you should prefer <code>?</code> over <code>.unwrap()</code>. In the case of locks however the returned <a href="https://doc.rust-lang.org/stable/std/sync/struct.PoisonError.html"><strong><code>PoisonError</code></strong></a> signifies a panic in another thread, so unwrapping it (thus propagating the panic) is often the better idea.</p>
</footnotes>
<div>&nbsp;</div>
<blockquote>
<p>🔥 We <strong>highly</strong> recommend you also follow the
<a href="https://rust-lang.github.io/api-guidelines/"><strong>API Guidelines</strong></a> (<a href="https://rust-lang.github.io/api-guidelines/checklist.html"><strong>Checklist</strong></a>)
for any shared project! 🔥</p>
</blockquote>
<div>&nbsp;</div>
<h2 id="performance-tips">Performance Tips<sup id="target-performance-tips" class="target"><a href="#performance-tips">url</a></sup></h2>
<p>&quot;My code is slow&quot; sometimes comes up when porting microbenchmarks to Rust, or after profiling.</p>
<div class="color-header blue">
<table><thead><tr><th>Rating</th><th>Name</th><th>Description</th></tr></thead><tbody>
<tr><td>🚀🍼</td><td><strong>Release Mode</strong> <a href="https://doc.rust-lang.org/book/ch01-03-hello-cargo.html" title="See this topic in 'The Rust Programming Language'."><sup class="entry">BK</sup></a> <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></td><td>Always do <code>cargo build --release</code> for massive speed boost.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼<span style="opacity:0%;">🚀</span>⚠️</td><td><strong>Target Native CPU</strong> <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustc&#x2F;codegen-options&#x2F;index.html#target-cpu" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Add <code>rustflags = [&quot;-Ctarget-cpu=native&quot;]</code> to <code>config.toml</code>. <a href="#project-anatomy" title="On this site, above."><sup>↑</sup></a></td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼⚖️</td><td><strong>Codegen Units</strong> <a href="https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;rustc&#x2F;codegen-options&#x2F;index.html#codegen-units" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Codegen units <code>1</code> may yield faster code, slower compile.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼</td><td><strong>Reserve Capacity</strong> <a href="https://doc.rust-lang.org/std&#x2F;?search=with_capacity"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td>Pre-allocation of collections reduces allocation pressure.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼</td><td><strong>Recycle Collections</strong> <a href="https://doc.rust-lang.org/std&#x2F;index.html?search=clear"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td>Calling <code>x.clear()</code> and reusing <code>x</code> prevents allocations.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼</td><td><strong>Append to Strings</strong> <a href="https://doc.rust-lang.org/std&#x2F;macro.write.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td>Using <code>write!(&amp;mut s, &quot;{}&quot;)</code> can prevent extra allocation.</td></tr>
<tr><td></td><td><strong>Bump Allocations</strong> <a href="https:&#x2F;&#x2F;docs.rs&#x2F;bumpalo&#x2F;latest&#x2F;bumpalo&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Cheaply gets <em>temporary</em>, dynamic memory, esp. in hot loops.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼⚖️</td><td><strong>Replace Allocator</strong> <a href="https:&#x2F;&#x2F;nical.github.io&#x2F;posts&#x2F;rust-custom-allocators.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>On some platforms ext. allocator (e.g., <strong>mimalloc</strong> <a href="https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;mimalloc" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a>) faster.</td></tr>
<tr><td></td><td><strong>Batch APIs</strong></td><td>Design APIs to handle multiple similar elements at once, e.g., slices.</td></tr>
<tr><td><span style="opacity:0%;">🚀🚀</span>⚖️</td><td><strong>SoA</strong> / <strong>AoSoA</strong> <a href="https:&#x2F;&#x2F;www.rustsim.org&#x2F;blog&#x2F;2020&#x2F;03&#x2F;23&#x2F;simd-aosoa-in-nalgebra&#x2F;" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Beyond that consider <em>struct of arrays</em> (SoA) and similar.</td></tr>
<tr><td>🚀<span style="opacity:0%;">🚀</span>⚖️</td><td><strong>SIMD</strong> <a href="https://doc.rust-lang.org/std&#x2F;simd&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td><td>Inside (math heavy) batch APIs using SIMD can give 2x - 8x boost.</td></tr>
<tr><td></td><td><strong>Reduce Data Size</strong></td><td>Small types (e.g, <code>u8</code> vs <code>u32</code>, niches<a class="tooltip" title="Is missing an authoritative source or needs a better explanation. Please help!"><sup>?</sup></a>) and data have better cache use.</td></tr>
<tr><td></td><td><strong>Keep Data Nearby</strong> <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Data-oriented_design" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Storing often-used data <em>nearby</em> can improve memory access times.</td></tr>
<tr><td></td><td><strong>Pass by Size</strong> <a href="https:&#x2F;&#x2F;github.com&#x2F;isocpp&#x2F;CppCoreGuidelines&#x2F;blob&#x2F;master&#x2F;CppCoreGuidelines.md#reason-45" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Small (2-3 words) structs best passed by value, larger by reference.</td></tr>
<tr><td><span style="opacity:0%;">🚀🚀</span>⚖️</td><td><strong>Async-Await</strong> <a href="https:&#x2F;&#x2F;rust-lang.github.io&#x2F;async-book&#x2F;01_getting_started&#x2F;01_chapter.html" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>If <em>parallel waiting</em> happens a lot (e.g., server I/O) <code>async</code> good idea.</td></tr>
<tr><td></td><td><strong>Threading</strong> <a href="https://doc.rust-lang.org/std&#x2F;thread&#x2F;index.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td>Threads allow you to perform <em>parallel work</em> on mult. items at once.</td></tr>
<tr><td>🚀</td><td>... <strong>in app</strong></td><td>Often good for apps, as lower wait times means better UX.</td></tr>
<tr><td>🚀<span style="opacity:0%;">🚀</span>⚖️</td><td>... <strong>inside libs</strong></td><td>Opaque <em>t.</em> use <em>inside</em> lib often not good idea, can be too opinionated.</td></tr>
<tr><td>🚀<span style="opacity:0%;">🚀</span></td><td>... <strong>for lib callers</strong></td><td>However, allowing <em>your user</em> to process <em>you</em> in parallel excellent idea.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼</td><td><strong>Buffered I/O</strong> <a href="https://doc.rust-lang.org/std&#x2F;io&#x2F;index.html#bufreader-and-bufwriter"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> <a class="tooltip" title="Has outstanding utility."><sup>🔥</sup></a></td><td>Raw <code>File</code> I/O highly inefficient w/o buffering.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼<span style="opacity:0%;">🚀</span>⚠️</td><td><strong>Faster Hasher</strong> <a href="https:&#x2F;&#x2F;lib.rs&#x2F;crates&#x2F;seahash" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Default <code>HashMap</code> <a href="https://doc.rust-lang.org/std&#x2F;collections&#x2F;struct.HashMap.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> hasher DoS attack-resilient but slow.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼<span style="opacity:0%;">🚀</span>⚠️</td><td><strong>Faster RNG</strong></td><td>If you use a crypto RNG consider swapping for non-crypto.</td></tr>
<tr><td><span style="opacity:0%;">🚀🚀</span>⚖️</td><td><strong>Avoid Trait Objects</strong> <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;28621980&#x2F;what-are-the-actual-runtime-performance-costs-of-dynamic-dispatch" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>T.O. reduce code size, but increase memory indirection.</td></tr>
<tr><td><span style="opacity:0%;">🚀🚀</span>⚖️</td><td><strong>Defer Drop</strong> <a href="https:&#x2F;&#x2F;abrams.cc&#x2F;rust-dropping-things-in-another-thread" title="Third-party site (mainly used in conjunction with other symbols)."><sup>🔗</sup></a></td><td>Dropping <em>heavy</em> objects in dump-thread can free up current one.</td></tr>
<tr><td><span style="opacity:0%;">🚀</span>🍼<span style="opacity:0%;">🚀</span>⚠️</td><td><strong>Unchecked APIs</strong>  <a href="https://doc.rust-lang.org/std&#x2F;?search=unchecked"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td><td>If you are 100% confident, <code>unsafe { unchecked_ }</code> skips checks.</td></tr>
</tbody></table>
</div>
<footnotes>
<p>Entries marked 🚀 often come with a massive (&gt; 2x) performance boost, 🍼 are easy to implement even after-the-fact, ⚖️ might have costly side effects (e.g., memory, complexity), ⚠️ have special risks (e.g., security, correctness).</p>
</footnotes>
<div>&nbsp;</div>
<blockquote>
<p><strong>Profiling Tips</strong> <a class="tooltip" title="Author's opinion."><sup>💬</sup></a></p>
<p>Profilers are indispensable to identify hot spots in code. For the best experience add this to your <code class="ignore-auto language-bash">Cargo.toml</code>:</p>
<pre data-lang="cargo" class="language-cargo "><code class="language-cargo" data-lang="cargo">[profile.release]
debug = true
</code></pre>
<p>Then do a <code>cargo build --release</code> and run the result with <a href="https://superluminal.eu/rust/"><strong>Superluminal</strong></a> (Windows) or <a href="https://en.wikipedia.org/wiki/Instruments_%28software%29"><strong>Instruments</strong></a> (macOS).
That said, there are many performance opportunities profilers won't find, but that need to be <em>designed in</em>.</p>
</blockquote>
<div>&nbsp;</div>
<h2 id="async-await-101">Async-Await 101<sup id="target-async-await-101" class="target"><a href="#async-await-101">url</a></sup></h2>
<p>If you are familiar with async / await in C# or TypeScript, here are some things to keep in mind:</p>
<tabs class="color-header orange">
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-async-1" name="tab-async" checked>
<label for="tab-async-1"><b>Basics</b></label>
<panel><div>
<table><thead><tr><th>Construct</th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>async</code></td><td>Anything declared <code>async</code> always returns an <code>impl Future&lt;Output=_&gt;</code>. <a href="https://doc.rust-lang.org/std&#x2F;future&#x2F;trait.Future.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></td></tr>
<tr><td><span class="hidemobile">    </span> <code>async fn f() {}</code></td><td>Function <code>f</code> returns an <code>impl Future&lt;Output=()&gt;</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>async fn f() -&gt; S {}</code></td><td>Function <code>f</code> returns an <code>impl Future&lt;Output=S&gt;</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>async { x }</code></td><td>Transforms <code>{ x }</code> into an <code>impl Future&lt;Output=X&gt;</code>.</td></tr>
<tr><td><code>let sm = f();   </code></td><td>Calling <code>f()</code> that is <code>async</code> will <strong>not</strong> execute <code>f</code>, but produce state machine <code>sm</code>. <sup>1</sup> <sup>2</sup></td></tr>
<tr><td><span class="hidemobile">    </span> <code>sm = async { g() };</code></td><td>Likewise, does <strong>not</strong> execute the <code>{ g() }</code> block; produces state machine.</td></tr>
<tr><td><code>runtime.block_on(sm);</code></td><td>Outside an <code>async {}</code>, schedules <code>sm</code> to actually run. Would execute <code>g()</code>. <sup>3</sup> <sup>4</sup></td></tr>
<tr><td><code>sm.await</code></td><td>Inside an <code>async {}</code>, run <code>sm</code> until complete. Yield to runtime if <code>sm</code> not ready.</td></tr>
</tbody></table>
<footnotes>
<p><sup>1</sup> Technically <code>async</code> transforms following code into anonymous, compiler-generated state machine type; <code>f()</code> instantiates that machine. <br>
<sup>2</sup> The state machine always <code>impl Future</code>, possibly <code>Send</code> &amp; co, depending on types used inside <code>async</code>. <br>
<sup>3</sup> State machine driven by worker thread invoking <code>Future::poll()</code> via runtime directly, or parent <code>.await</code> indirectly. <br>
<sup>4</sup> Rust doesn't come with runtime, need external crate instead, e.g., <a href="https://crates.io/crates/tokio">tokio</a>. Also, more helpers in <a href="https://github.com/rust-lang-nursery/futures-rs">futures crate</a>.</p>
</footnotes>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-async-2" name="tab-async">
<label for="tab-async-2"><b>Execution Flow</b></label>
<panel><div>
<p>At each <code>x.await</code>, state machine passes control to subordinate state machine <code>x</code>. At some point a low-level state machine invoked via <code>.await</code> might not be ready. In that the case worker
thread returns all the way up to runtime so it can drive another Future. Some time later the runtime:</p>
<ul>
<li><strong>might</strong> resume execution. It usually does, unless <code>sm</code> / <code>Future</code> dropped.</li>
<li><strong>might</strong> resume with the previous worker <strong>or another</strong> worker thread (depends on runtime).</li>
</ul>
<p>Simplified diagram for code written inside an <code>async</code> block :</p>
<!-- Create a horizontal scrollable area on small displays to preserve layout-->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre><code>       consecutive_code();           consecutive_code();           consecutive_code();
START --------------------&gt; x.await --------------------&gt; y.await --------------------&gt; READY
&#x2F;&#x2F; ^                          ^     ^                               Future&lt;Output=X&gt; ready -^
&#x2F;&#x2F; Invoked via runtime        |     |
&#x2F;&#x2F; or an external .await      |     This might resume on another thread (next best available),
&#x2F;&#x2F;                            |     or NOT AT ALL if Future was dropped.
&#x2F;&#x2F;                            |
&#x2F;&#x2F;                            Execute `x`. If ready: just continue execution; if not, return
&#x2F;&#x2F;                            this thread to runtime.
</code></pre>
</div>
</div>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-async-3" name="tab-async">
<label for="tab-async-3"><b>Caveats</b> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a> </label>
<panel><div>
<p>With the execution flow in mind, some considerations when writing code inside an <code>async</code> construct:</p>
<div class="color-header orange">
<table><thead><tr><th>Constructs <sup>1</sup></th><th>Explanation</th></tr></thead><tbody>
<tr><td><code>sleep_or_block();</code></td><td>Definitely bad <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a>, never halt current thread, clogs executor.</td></tr>
<tr><td><code>set_TL(a); x.await; TL();</code></td><td>Definitely bad <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a>, <code>await</code> may return from other thread, <a href="https://doc.rust-lang.org/std/macro.thread_local.html">thread local</a> invalid.</td></tr>
<tr><td><code>s.no(); x.await; s.go();</code></td><td>Maybe bad <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a>, <code>await</code> will <a href="http://www.randomhacks.net/2019/03/09/in-nightly-rust-await-may-never-return/">not return</a> if <code>Future</code> dropped while waiting. <sup>2</sup></td></tr>
<tr><td><code>Rc::new(); x.await; rc();</code></td><td>Non-<code>Send</code> types prevent <code>impl Future</code> from being <code>Send</code>; less compatible.</td></tr>
</tbody></table>
</div>
<footnotes>
<p><sup>1</sup> Here we assume <code>s</code> is any non-local that could temporarily be put into an invalid state;
<code>TL</code> is any thread local storage, and that the <code>async {}</code> containing the code is written
without assuming executor specifics. <br/>
<sup>2</sup> Since <a href="https://doc.rust-lang.org/std/ops/trait.Drop.html">Drop</a> is run in any case when <code>Future</code> is dropped, consider using drop guard that cleans up / fixes application state if it has to be left in bad condition across <code>.await</code> points.</p>
</footnotes>
</div></panel></tab>
<!-- end tabs -->
</tabs>
<div>&nbsp;</div>
<h2 id="closures-in-apis">Closures in APIs<sup id="target-closures-in-apis" class="target"><a href="#closures-in-apis">url</a></sup></h2>
<p>There is a subtrait relationship <code>Fn</code> : <code>FnMut</code> : <code>FnOnce</code>. That means a closure that
implements <code>Fn</code> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;trait.Fn.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> also implements <code>FnMut</code> and <code>FnOnce</code>. Likewise a closure
that implements <code>FnMut</code> <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;trait.FnMut.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a> also implements <code>FnOnce</code>. <a href="https://doc.rust-lang.org/std&#x2F;ops&#x2F;trait.FnOnce.html"  title="See this topic in 'The Rust Standard Library'."><sup class="mid">STD</sup></a></p>
<p>From a call site perspective that means:</p>
<div class="color-header green">
<table><thead><tr><th>Signature</th><th>Function <code>g</code> can call …</th><th>Function <code>g</code> accepts …</th></tr></thead><tbody>
<tr><td><code>g&lt;F: FnOnce()&gt;(f: F)</code></td><td>… <code>f()</code> at most once.</td><td><code>Fn</code>, <code>FnMut</code>, <code>FnOnce</code></td></tr>
<tr><td><code>g&lt;F: FnMut()&gt;(mut f: F)</code></td><td>… <code>f()</code> multiple times.</td><td><code>Fn</code>, <code>FnMut</code></td></tr>
<tr><td><code>g&lt;F: Fn()&gt;(f: F)</code></td><td>… <code>f()</code> multiple times.</td><td><code>Fn</code></td></tr>
</tbody></table>
</div>
<footnotes>
<p>Notice how <strong>asking</strong> for a <code>Fn</code> closure as a function is
most restrictive for the caller; but <strong>having</strong> a <code>Fn</code>
closure as a caller is most compatible with any function.</p>
</footnotes>
<div>&nbsp;</div>
<p>From the perspective of someone defining a closure:</p>
<div class="color-header green">
<table><thead><tr><th>Closure</th><th>Implements<sup>*</sup></th><th>Comment</th></tr></thead><tbody>
<tr><td><code> || { moved_s; } </code></td><td><code>FnOnce</code></td><td>Caller must give up ownership of <code>moved_s</code>.</td></tr>
<tr><td><code> || { &amp;mut s; } </code></td><td><code>FnOnce</code>, <code>FnMut</code></td><td>Allows <code>g()</code> to change caller's local state <code>s</code>.</td></tr>
<tr><td><code> || { &amp;s; } </code></td><td><code>FnOnce</code>, <code>FnMut</code>, <code>Fn</code></td><td>May not mutate state; but can share and reuse <code>s</code>.</td></tr>
</tbody></table>
</div>
<div class="footnotes">
<p><sup>*</sup> Rust <a href="https://doc.rust-lang.org/stable/reference/expressions/closure-expr.html">prefers capturing</a> by reference
(resulting in the most &quot;compatible&quot; <code>Fn</code> closures from a caller perspective), but can be
forced to capture its environment by copy or move via the
<code>move || {}</code> syntax.</p>
</div>
<div>&nbsp;</div>
<p>That gives the following advantages and disadvantages:</p>
<div class="color-header green">
<table><thead><tr><th>Requiring</th><th>Advantage</th><th>Disadvantage</th></tr></thead><tbody>
<tr><td><code>F: FnOnce</code></td><td><span class="good">Easy to satisfy as caller.</span></td><td><span class="bad">Single use only, <code>g()</code> may call <code>f()</code> just once.</span></td></tr>
<tr><td><code>F: FnMut</code></td><td><span class="good">Allows <code>g()</code> to change caller state.</span></td><td><span class="bad">Caller may not reuse captures during <code>g()</code>.</span></td></tr>
<tr><td><code>F: Fn</code></td><td><span class="good">Many can exist at same time.</span></td><td><span class="bad">Hardest to produce for caller.</span></td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<!-- ## Macro Hygiene -->
<!-- <div>&nbsp;</div> -->
<h2 id="unsafe-unsound-undefined">Unsafe, Unsound, Undefined<sup id="target-unsafe-unsound-undefined" class="target"><a href="#unsafe-unsound-undefined">url</a></sup></h2>
<p>Unsafe leads to unsound. Unsound leads to undefined. Undefined leads to the dark side of the force.</p>
<tabs>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-unsafe-0" name="tab-unsafe" checked>
<label for="tab-unsafe-0"><b>Safe Code</b></label>
<panel><div>
<p><strong>Safe Code</strong></p>
<ul>
<li><em>Safe</em> has narrow meaning in Rust, vaguely 'the <em>intrinsic</em> prevention of undefined behavior (UB)'.</li>
<li>Intrinsic means the language won't allow you to use <em>itself</em> to cause UB.</li>
<li>Making an airplane crash or deleting your database is not UB, therefore 'safe' from Rust's perspective.</li>
<li>Writing to <code>/proc/[pid]/mem</code> to self-modify your code is also 'safe', resulting UB not caused <em>intrinsincally</em>.</li>
</ul>
<!-- In other words, _safe_ only means the language will produce binary code that, when reasonably invoked, executes in a manner consistent with what was written in source code. -->
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">let y = x + x;  &#x2F;&#x2F; Safe Rust only guarantees the execution of this code is consistent with
print(y);       &#x2F;&#x2F; &#x27;specification&#x27; (long story …). It does not guarantee that y is 2x
                &#x2F;&#x2F; (X::add might be implemented badly) nor that y is printed (Y::fmt may panic).
</code></pre>
</div></div>
</div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-unsafe-1" name="tab-unsafe">
<label for="tab-unsafe-1"><b>Unsafe Code</b></label>
<panel><div>
<p><strong>Unsafe Code</strong></p>
<ul>
<li>Code marked <code>unsafe</code> has special permissions, e.g., to deref raw pointers, or invoke other <code>unsafe</code> functions.</li>
<li>Along come special <strong>promises the author <em>must</em> uphold to the compiler</strong>, and the compiler <em>will</em> trust you.</li>
<li>By itself <code>unsafe</code> code is not bad, but dangerous, and needed for FFI or exotic data structures.</li>
</ul>
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">&#x2F;&#x2F; `x` must always point to race-free, valid, aligned, initialized u8 memory.
unsafe fn unsafe_f(x: *mut u8) {
    my_native_lib(x);
}
</code></pre>
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-unsafe-2" name="tab-unsafe" >
<label for="tab-unsafe-2"><b>Undefined Behavior</b></label>
<panel><div>
<p><strong>Undefined Behavior (UB)</strong></p>
<ul>
<li>As mentioned, <code>unsafe</code> code implies <a href="https://doc.rust-lang.org/stable/reference/behavior-considered-undefined.html">special promises</a> to the compiler (it wouldn't need be <code>unsafe</code> otherwise).</li>
<li>Failure to uphold any promise makes compiler produce fallacious code, execution of which leads to UB.</li>
<li>After triggering undefined behavior <em>anything</em> can happen. Insidiously, the effects may be 1) subtle, 2) manifest far away from the site of violation or 3) be visible only under certain conditions.</li>
<li>A seemingly <em>working</em> program (incl. any number of unit tests) is no proof UB code might not fail on a whim.</li>
<li>Code with UB is objectively dangerous, invalid and should never exist.</li>
</ul>
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">if maybe_true() {
    let r: &amp;u8 = unsafe { &amp;*ptr::null() };   &#x2F;&#x2F; Once this runs, ENTIRE app is undefined. Even if
} else {                                     &#x2F;&#x2F; line seemingly didn&#x27;t do anything, app might now run
    println!(&quot;the spanish inquisition&quot;);     &#x2F;&#x2F; both paths, corrupt database, or anything else.
}
</code></pre>
</div></div></div></panel></tab>
<!-- NEW TAB -->
<tab>
<input type="radio" id="tab-unsafe-3" name="tab-unsafe" >
<label for="tab-unsafe-3"><b>Unsound Code</b></label>
<panel><div>
<p><strong>Unsound Code</strong></p>
<ul>
<li>Any <em>safe</em> Rust that could (even only theoretically) produce UB for any user input is always <strong>unsound</strong>.</li>
<li>As is <code>unsafe</code> code that may invoke UB on its own accord by violating above-mentioned promises.</li>
<li>Unsound code is a stability and security risk, and violates basic assumption many Rust users have.</li>
</ul>
<div style="overflow:auto;">
<div style="min-width: 100%; width: 650px;">
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">fn unsound_ref&lt;T&gt;(x: &amp;T) -&gt; &amp;u128 {      &#x2F;&#x2F; Signature looks safe to users. Happens to be
    unsafe { mem::transmute(x) }         &#x2F;&#x2F; ok if invoked with an &amp;u128, UB for practically
}                                        &#x2F;&#x2F; everything else.
</code></pre>
</div></div></div></panel></tab>
</tabs>
<div>&nbsp;</div>
<blockquote>
<p><strong>Responsible use of Unsafe</strong> <a class="tooltip" title="Author's opinion."><sup>💬</sup></a></p>
<ul>
<li>Do not use <code>unsafe</code> unless you absolutely have to.</li>
<li>Follow the <a href="https://doc.rust-lang.org/nightly/nomicon/">Nomicon</a>, <a href="https://rust-lang.github.io/unsafe-code-guidelines/">Unsafe Guidelines</a>, <strong>always</strong> follow <strong>all</strong> safety rules, and <strong>never</strong> invoke <a href="https://doc.rust-lang.org/stable/reference/behavior-considered-undefined.html">UB</a>.</li>
<li>Minimize the use of <code>unsafe</code> and encapsulate it in small, sound modules that are easy to review.</li>
<li>Never create unsound abstractions; if you can't encapsulate <code>unsafe</code> properly, don't do it.</li>
<li>Each <code>unsafe</code> unit should be accompanied by plain-text reasoning outlining its safety.</li>
</ul>
</blockquote>
<div>&nbsp;</div>
<h2 id="adversarial-code">Adversarial Code <a class="tooltip" title="Esoteric, most people will not need to bother with this in years."><sup style="font-size:100%; position: relative; top: -4px;">🝖</sup></a><sup id="target-adversarial-code" class="target"><a href="#adversarial-code">url</a></sup></h2>
<p><em>Adversarial</em> code is <em>safe</em> 3<sup>rd</sup> party code that compiles but does not follow API <em>expectations</em>, and might interfere with your own (safety) guarantees.</p>
<div class="color-header redred">
<table><thead><tr><th>You author</th><th>User code may possibly …</th></tr></thead><tbody>
<tr><td><code>fn g&lt;F: Fn()&gt;(f: F) { … }</code></td><td>Unexpectedly panic.</td></tr>
<tr><td><code>struct S&lt;X: T&gt; { … }</code></td><td>Implement <code>T</code> badly, e.g., misuse <code>Deref</code>, …</td></tr>
<tr><td><code>macro_rules! m { … }</code></td><td>Do all of the above; call site can have <em>weird</em> scope.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Risk Pattern</th><th>Description</th></tr></thead><tbody>
<tr><td><code>#[repr(packed)]</code></td><td>Packed alignment can make reference <code>&amp;s.x</code> invalid.</td></tr>
<tr><td><code>impl std::… for S {}</code></td><td>Any trait <code>impl</code>, esp. <code>std::ops</code> may be broken. In particular …</td></tr>
<tr><td><span class="hidemobile">    </span> <code>impl Deref for S {}</code></td><td>May randomly <code>Deref</code>, e.g., <code>s.x != s.x</code>, or panic.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>impl PartialEq for S {}</code></td><td>May violate equality rules; panic.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>impl Eq for S {}</code></td><td>May cause <code>s != s</code>; panic; must not use <code>s</code> in <code>HashMap</code> &amp; co.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>impl Hash for S {}</code></td><td>May violate hashing rules; panic; must not use <code>s</code> in <code>HashMap</code> &amp; co.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>impl Ord for S {}</code></td><td>May violate ordering rules; panic; must not use <code>s</code> in <code>BTreeMap</code> &amp; co.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>impl Index for S {}</code></td><td>May randomly index, e.g., <code>s[x] != s[x]</code>; panic.</td></tr>
<tr><td><span class="hidemobile">    </span> <code>impl Drop for S {}</code></td><td>May run code or panic end of scope <code>{}</code>, during assignment <code>s = new_s</code>.</td></tr>
<tr><td><code>panic!()</code></td><td>User code can panic <em>any</em> time, resulting in abort or unwind.</td></tr>
<tr><td><code>catch_unwind(|| s.f(panicky))</code></td><td>Also, caller might force observation of broken state in <code>s</code>.</td></tr>
<tr><td><code>let … = f();</code></td><td>Variable name can affect order of <code>Drop</code> execution. <sup>1</sup> <a class="tooltip" title="Intentionally wrong example or pitfall."><sup>🛑</sup></a></td></tr>
</tbody></table>
<footnotes>
<p><sup>1</sup> Notably, when you rename a variable from <code>_x</code> to <code>_</code> you will also change Drop behavior since you change semantics. A variable named <code>_x</code> will have <code>Drop::drop()</code> executed at the end of its scope, a variable named <code>_</code> can have it executed immediately on 'apparent' assignment ('apparent' because a binding named <code>_</code> means <strong>wildcard</strong> <a href="https://doc.rust-lang.org/stable/reference/patterns.html#wildcard-pattern" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a> <em>discard this</em>, which will happen as soon as feasible, often right away)!</p>
</footnotes>
<div>&nbsp;</div>
</div>
<blockquote>
<p><strong>Implications</strong></p>
<ul>
<li>Generic code <strong>cannot be safe if safety depends on type cooperation</strong> w.r.t. most (<code>std::</code>) traits.</li>
<li>If type cooperation is needed you must use <code>unsafe</code> traits (prob. implement your own).</li>
<li>You must consider random code execution at unexpected places (e.g., re-assignments, scope end).</li>
<li>You may still be observable after a worst-case panic.</li>
</ul>
<p>As a corollary, <em>safe</em>-but-deadly code (e.g., <code>airplane_speed&lt;T&gt;()</code>) should probably also follow these guides.</p>
</blockquote>
<div>&nbsp;</div>
<h2 id="api-stability">API Stability<sup id="target-api-stability" class="target"><a href="#api-stability">url</a></sup></h2>
<p>When updating an API, these changes can break client code.<a href="https://rust-lang.github.io/rfcs/1105-api-evolution.html"  title="See this topic in the official RFC documents."><sup class="expert">RFC</sup></a> Major changes (🔴) are <strong>definitely breaking</strong>, while minor changes (🟡) <strong>might be breaking</strong>:</p>
<div class="color-header api-stability">
<div>&nbsp;</div>
<table><thead><tr><th>Crates</th></tr></thead><tbody>
<tr><td>🔴 Making a crate that previously compiled for <em>stable</em> require <em>nightly</em>.</td></tr>
<tr><td>🟡 Altering use of Cargo features (e.g., adding or removing features).</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Modules</th></tr></thead><tbody>
<tr><td>🔴 Renaming / moving / removing any public items.</td></tr>
<tr><td>🟡 Adding new public items, as this might break code that does <code>use your_crate::*</code>.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Structs</th></tr></thead><tbody>
<tr><td>🔴 Adding private field when all current fields public.</td></tr>
<tr><td>🔴 Adding public field when no private field exists.</td></tr>
<tr><td>🟡 Adding or removing private fields when at least one already exists (before and after the change).</td></tr>
<tr><td>🟡 Going from a tuple struct with all private fields (with at least one field) to a normal struct, or vice versa.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Enums</th></tr></thead><tbody>
<tr><td>🔴 Adding new variants; can be mitigated with early <code>#[non_exhaustive]</code> <a href="https://doc.rust-lang.org/stable/reference/attributes&#x2F;type_system.html#the-non_exhaustive-attribute" title="See this topic in 'The Rust Reference'."><sup class="expert">REF</sup></a></td></tr>
<tr><td>🔴 Adding new fields to a variant.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Traits</th></tr></thead><tbody>
<tr><td>🔴 Adding a non-defaulted item, breaks all existing <code>impl T for S {}</code>.</td></tr>
<tr><td>🔴 Any non-trivial change to item signatures, will affect either consumers or implementors.</td></tr>
<tr><td>🟡 Adding a defaulted item; might cause dispatch ambiguity with other existing trait.</td></tr>
<tr><td>🟡 Adding a defaulted type parameter.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Traits</th></tr></thead><tbody>
<tr><td>🔴 Implementing any &quot;fundamental&quot; trait, as <em>not</em> implementing a fundamental trait already was a promise.</td></tr>
<tr><td>🟡 Implementing any non-fundamental trait; might also cause dispatch ambiguity.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Inherent Implementations</th></tr></thead><tbody>
<tr><td>🟡 Adding any inherent items; might cause clients to prefer that over trait fn and produce compile error.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Signatures in Type Definitions</th></tr></thead><tbody>
<tr><td>🔴 Tightening bounds (e.g., <code>&lt;T&gt;</code> to <code>&lt;T: Clone&gt;</code>).</td></tr>
<tr><td>🟡 Loosening bounds.</td></tr>
<tr><td>🟡 Adding defaulted type parameters.</td></tr>
<tr><td>🟡 Generalizing to generics.</td></tr>
</tbody></table>
<table><thead><tr><th>Signatures in Functions</th></tr></thead><tbody>
<tr><td>🔴 Adding / removing arguments.</td></tr>
<tr><td>🟡 Introducing a new type parameter.</td></tr>
<tr><td>🟡 Generalizing to generics.</td></tr>
</tbody></table>
<div>&nbsp;</div>
<table><thead><tr><th>Behavioral Changes</th></tr></thead><tbody>
<tr><td>🔴 / 🟡 <em>Changing semantics might not cause compiler errors, but might make clients do wrong thing.</em></td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<!-- ## Authoring Quality Crates

> **Note** <sup>💬</sup> &mdash; This chapter is mildly **subjective**. That said, it tries to be observational with respect to successful Rust crates (i.e., crates with most downloads should check most of these boxes).


<div class="color-header quality_crate">

#### Code Patterns

| What | Why |
|--------| ---- |
| ☐ Write idiomatic code, follow API guides. |  |
| ☐ Regularly use `clippy`, `fmt` |   |
| ☐ Err on the side of `#[deny]`, not `#[allow]` | asdasd |


#### Infrastructure

| What | Why |
|--------| ---- |
| ☐ Minimize dependencies. | asds |
| ☐ Add optional deps. to essential `trait` crates |  asds |
| ☐ Have unit & integration tests |  asds |
| ☐ Have benchmarks |  asds |


#### Site

| What | Why |
|--------| ---- |
| ☐ Feature **prominent** API example, screenshot … | asds |
| ☐ Have permissive license for libs. | asds |

</div>

<footnotes>


</footnotes> -->
<!-- Don't render this section for printing, won't be helpful -->
<noprint>
<hr />
<h1 id="misc">Misc<sup id="target-misc" class="target"><a href="#misc">url</a></sup></h1>
<h2 id="links-services">Links &amp; Services<sup id="target-links-services" class="target"><a href="#links-services">url</a></sup></h2>
<p>These are other great guides and tables.</p>
<div class="color-header lavender">
<!-- This is for major other "cheat sheet" like material on the web. Main question when adding: does it add something
    significant not found elsewhere? -->
<table><thead><tr><th>Cheat Sheets</th><th>Description</th></tr></thead><tbody>
<tr><td><a href="https://github.com/ctjhoa/rust-learning">Rust Learning⭐</a></td><td>Probably the best collection of links about learning Rust.</td></tr>
<tr><td><a href="https://github.com/JasonShin/functional-programming-jargon.rs">Functional Jargon in Rust</a></td><td>A collection of functional programming jargon explained in Rust.</td></tr>
<tr><td><a href="https://danielkeep.github.io/itercheat_baked.html">Rust Iterator Cheat Sheet</a></td><td>Summary of iterator-related methods from <code>std::iter</code> and <code>itertools</code>.</td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<p>All major Rust books developed by the community.</p>
<div class="color-header lavender">
<!-- Official Rust online "books" about Rust itself or major components (e.g., WebAssembly, Embedded, …). Good test
    for inclusion can be official community involvement, +1k Github stars, … -->
<table><thead><tr><th>Books ️📚</th><th>Description</th></tr></thead><tbody>
<tr><td><a href="https://doc.rust-lang.org/stable/book/">The Rust Programming Language</a></td><td>Standard introduction to Rust, <strong>start here if you are new</strong>.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rust-lang.github.io/api-guidelines/">API Guidelines</a></td><td>How to write idiomatic and re-usable Rust.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rust-lang.github.io/async-book/">Asynchronous Programming</a>  <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td><td>Explains <code>async</code> code, <code>Futures</code>, …</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rust-unofficial.github.io/patterns//">Design Patterns</a></td><td>Idioms, Patterns, Anti-Patterns.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://doc.rust-lang.org/nightly/edition-guide/">Edition Guide</a></td><td>Working with Rust 2015, Rust 2018, and beyond.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://nrc.github.io/error-docs/intro.html">Error Handling</a></td><td>Language features, libraries, and writing good error code.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rustc-dev-guide.rust-lang.org/index.html">Guide to Rustc Development</a></td><td>Explains how the compiler works internally.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://veykril.github.io/tlborm/introduction.html">Little Book of Rust Macros</a></td><td>Community's collective knowledge of Rust macros.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://doc.rust-lang.org/stable/reference/">Reference</a> <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td><td>Reference of the Rust language.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rust-lang.github.io/rfcs/">RFC Book</a></td><td>Look up accepted RFCs and how they change the language.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://nnethercote.github.io/perf-book/">Performance Book</a></td><td>Techniques to improve the speed and memory usage.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rust-lang-nursery.github.io/rust-cookbook/">Rust Cookbook</a></td><td>Collection of simple examples that demonstrate good practices.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://dhghomon.github.io/easy_rust/Chapter_3.html">Rust in Easy English</a></td><td>Explains concepts in simplified English, <strong>good alternative start</strong>.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://www.chiark.greenend.org.uk/%7Eianmdlvl/rust-polyglot/index.html">Rust for the Polyglot Programmer</a></td><td>A guide for the experienced programmer.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://doc.rust-lang.org/stable/rustdoc/">Rustdoc Book</a></td><td>Tips how to customize <code>cargo doc</code> and <code>rustdoc</code>.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://doc.rust-lang.org/nomicon/">Rustonomicon</a></td><td>Dark Arts of Advanced and Unsafe Rust Programming.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rust-lang.github.io/unsafe-code-guidelines/">Unsafe Code Guidelines</a>  <a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></td><td>Concise information about writing <code>unsafe</code> code.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://doc.rust-lang.org/unstable-book/index.html">Unstable Book</a></td><td>Information about unstable items, e.g, <code>#![feature(…)]</code>.</td></tr>
<tr><td><a href="https://doc.rust-lang.org/cargo/">The Cargo Book</a></td><td>How to use <code>cargo</code> and write <code>Cargo.toml</code>.</td></tr>
<tr><td><a href="https://rust-lang-nursery.github.io/cli-wg/">The CLI Book</a></td><td>Information about creating CLI tools.</td></tr>
<tr><td><a href="https://docs.rust-embedded.org/book/intro/index.html">The Embedded Book</a></td><td>Working with embedded and <code>#![no_std]</code> devices.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://docs.rust-embedded.org/embedonomicon/">The Embedonomicon</a></td><td>First <code>#![no_std]</code> from scratch on a Cortex-M.</td></tr>
<tr><td><a href="https://rustwasm.github.io/docs/book/">The WebAssembly Book</a></td><td>Working with the web and producing <code>.wasm</code> files.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rustwasm.github.io/docs/wasm-bindgen/">The <code>wasm-bindgen</code> Guide</a></td><td>How to bind Rust and JavaScript APIs in particular.</td></tr>
</tbody></table>
</div>
<footnotes>
<p>For more inofficial books see <a href="https://lborb.github.io/book/title-page.html">Little Book of Rust Books</a>.</p>
</footnotes>
<!-- Disabled for now as looks abandoned w/o content -->
<!-- | <span class="hidemobile">&nbsp;&nbsp;&nbsp;&nbsp;</span> [SIMD Performance Guide](https://rust-lang.github.io/packed_simd/perf-guide/) <pre data-shortcode><a class="tooltip" title="Unstable, needs 'nightly' compiler."><sup>🚧</sup></a></pre> | Work with `u8x32` or `f32x8` to speed up your computations.  | -->
<div>&nbsp;</div>
<p>Comprehensive lookup tables for common components.</p>
<div class="color-header lavender">
<!-- Table-like sites, often auto-generated. -->
<table><thead><tr><th>Tables 📋</th><th>Description</th></tr></thead><tbody>
<tr><td><a href="https://forge.rust-lang.org/">Rust Forge</a></td><td>Lists release train and links for people working on the compiler.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://doc.rust-lang.org/rustc/platform-support.html">Rust Platform Support</a></td><td>All supported platforms and their Tier.</td></tr>
<tr><td><span class="hidemobile">    </span> <a href="https://rust-lang.github.io/rustup-components-history/">Rust Component History</a></td><td>Check <strong>nightly</strong> status of various Rust tools for a platform.</td></tr>
<tr><td><a href="https://rust-lang.github.io/rust-clippy/master/">ALL the Clippy Lints</a></td><td>All the <a href="https://github.com/rust-lang/rust-clippy"><strong>clippy</strong></a> lints you might be interested in.</td></tr>
<tr><td><a href="https://rust-lang.github.io/rustfmt/">Configuring Rustfmt</a></td><td>All <a href="https://github.com/rust-lang/rustfmt"><strong>rustfmt</strong></a> options you can use in <code>.rustfmt.toml</code>.</td></tr>
<tr><td><a href="https://doc.rust-lang.org/error-index.html">Compiler Error Index</a></td><td>Ever wondered what <code>E0404</code> means?</td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<p>Online services which provide information or tooling.</p>
<div class="color-header lavender">
<!-- Other online web services related to Rust. As a heuristic, things here should
    be essential (or at least address a major concern as "best of class") and be
    a self-contained, user-facing web site. -->
<table><thead><tr><th>Services ⚙️</th><th>Description</th></tr></thead><tbody>
<tr><td><a href="https://crates.io/">crates.io</a></td><td>All 3<sup>rd</sup> party libraries for Rust.</td></tr>
<tr><td><a href="https://std.rs/">std.rs</a></td><td>Shortcut to <code>std</code> documentation.</td></tr>
<tr><td><a href="https://docs.rs/">docs.rs</a></td><td>Documentation for 3<sup>rd</sup> party libraries, automatically generated from source.</td></tr>
<tr><td><a href="https://lib.rs/">lib.rs</a></td><td>Unofficial overview of quality Rust libraries and applications.</td></tr>
<tr><td><a href="https://caniuse.rs/">caniuse.rs</a></td><td>Check which Rust version introduced or stabilized a feature.</td></tr>
<tr><td><a href="https://releases.rs/">releases.rs</a></td><td>Release notes for previous and upcoming versions.</td></tr>
<tr><td><a href="https://play.rust-lang.org/">Rust Playground</a></td><td>Try and share snippets of Rust code.</td></tr>
</tbody></table>
</div>
<div>&nbsp;</div>
<h2 id="printing-pdf">Printing &amp; PDF<sup id="target-printing-pdf" class="target"><a href="#printing-pdf">url</a></sup></h2>
<blockquote>
<p>Want this Rust cheat sheet as a PDF? Download the <a href="https://cheats.rs/dl/rust_cheat_sheet_a4.pdf"><b>latest PDF here</b></a>. Alternatively, generate it yourself via <i>File &gt; Print</i> and then &quot;Save as PDF&quot; (works great in Chrome, has some issues in Firefox).</p>
</blockquote>
</noprint>
<footer>
<p><a href="https://xr.io">Ralf Biedert</a>, 2024 — <a href="https://cheats.rs">cheats.rs</a></p>
<noprint>
<p><a href="https://techlivewang.gitee.io/cheats.rs/legal">Legal &amp; Privacy</a> - <a href="https://techlivewang.gitee.io/cheats.rs/faq">FAQ</a></p>
</noprint>
</footer>

            </div>
        </div>
    </div>

    <!--  To get data url which our embed script doesn't see for some reason   -->
    <!-- <img src="magic.png"/>-->

    <!-- Syntax highlighting -->
    <script type="text/javascript" src="prism.js"></script>
    <script type="text/javascript" src="index.js"></script>
</body>

</html>
